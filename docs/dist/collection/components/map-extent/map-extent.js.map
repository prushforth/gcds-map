{"version":3,"file":"map-extent.js","sourceRoot":"","sources":["../../../src/components/map-extent/map-extent.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, Element, Watch, Method } from '@stencil/core';\nimport { bounds as Lbounds, point as Lpoint } from 'leaflet';\n\nimport { Util } from '../utils/mapml/Util.js';\nimport { mapExtentLayer } from '../utils/mapml/layers/MapExtentLayer.js';\nimport { createLayerControlExtentHTML } from '../utils/mapml/elementSupport/extents/createLayerControlForExtent.js';\nimport { calculatePosition } from '../utils/mapml/elementSupport/layers/calculatePosition.js';\n\ndeclare const M: any;\n@Component({\n  tag: 'map-extent',\n  shadow: true\n})\nexport class GcdsMapExtent {\n    @Element() el: HTMLElement;\n  @Prop({ mutable: true, reflect: true }) checked?: boolean = false;\n  @Prop({ mutable: true }) _label?: string;\n  @Prop({ mutable: true }) opacity?: number = 1;\n  @Prop({ mutable: true }) _opacity?: number;\n  @Prop({ reflect: true, mutable: true }) hidden: boolean = false;\n  @Prop({ mutable: false, reflect: true }) units!: string;\n  @Prop({ mutable: true, reflect: true }) disabled?: boolean = false;\n\n  // Internal getter for use within component\n  get label(): string {\n    return this._label || this.mapEl?.locale?.dfExtent || 'Sub-layer';\n  }\n\n  get opacityValue(): number {\n    return this._opacity ?? this.opacity ?? 1.0;\n  }\n\n  mapEl: any;\n  parentLayer: any;\n  _map: any;\n  _extentLayer: any;\n  _layerControlHTML: any;\n  _layerControlCheckbox: any;\n  _layerControlLabel: any;\n  _opacityControl: any;\n  _opacitySlider: any;\n  _selectdetails: any;\n  _observer: any;\n  _changeHandler: any;\n  _boundsCalculated: boolean = false;\n\n  @Watch('units')\n  unitsChanged(newValue: string, oldValue: string) {\n    if (this._extentLayer && oldValue !== newValue) {\n      // handle units change\n    }\n  }\n\n  @Watch('_label')\n  labelChanged() {\n    if (this._layerControlHTML) {\n      this._layerControlHTML.querySelector(\n        '.mapml-extent-item-name'\n      ).textContent = this.label;\n    }\n  }\n\n  @Watch('checked')\n  checkedChanged() {\n    if (this.parentLayer && this._extentLayer) {\n      this.parentLayer\n        .whenReady()\n        .then(() => {\n          this._handleChange();\n          this._calculateBounds();\n          if (this._layerControlCheckbox) {\n            this._layerControlCheckbox.checked = this.checked;\n          }\n        })\n        .catch((error) => {\n          console.log(\n            'Error while waiting on parentLayer for map-extent checked callback: ' +\n              error\n          );\n        });\n    }\n  }\n\n  @Watch('_opacity')\n  opacityChanged(newValue: number, oldValue: number) {\n    // This watcher handles programmatic changes to the opacity property\n    if (oldValue !== newValue && this._extentLayer) {\n      this._opacity = newValue;\n      this._extentLayer.changeOpacity(newValue);\n      // Update opacity slider if it exists\n      if (this._opacitySlider) {\n        this._opacitySlider.value = newValue.toString();\n      }\n    }\n  }\n\n  @Watch('hidden')\n  hiddenChanged(newValue: boolean, oldValue: boolean) {\n    // Only process hidden changes after the extent is fully initialized\n    // During initial load, this will be handled in connectedCallback\n    if (oldValue !== newValue && this._extentLayer && this._layerControlHTML) {\n      this._applyHiddenState(newValue);\n    }\n  }\n  \n  private _applyHiddenState(isHidden: boolean) {\n    if (!this._extentLayer || !this._layerControlHTML || !this.parentLayer) return;\n    \n    this.parentLayer\n      .whenReady()\n      .then(() => {\n        let extentsRootFieldset = this.parentLayer._propertiesGroupAnatomy;\n        // Get all map-extent elements and filter by component property, not DOM attribute\n        const allExtents = this.parentLayer.src\n          ? Array.from(this.parentLayer.shadowRoot.querySelectorAll(':host > map-extent'))\n          : Array.from(this.parentLayer.querySelectorAll(':scope > map-extent'));\n        \n        // Filter visible extents using component property\n        const visibleExtents = allExtents.filter(extent => !(extent as any).hidden);\n        let position = visibleExtents.indexOf(this.el);\n        \n        if (isHidden) {\n          // Hidden was set to true - remove from layer control (hide from user)\n          this._layerControlHTML.remove();\n        } else {\n          // Hidden was set to false - add back to layer control in calculated position\n          if (position === 0) {\n            extentsRootFieldset.insertAdjacentElement(\n              'afterbegin',\n              this._layerControlHTML\n            );\n          } else if (position > 0) {\n            (Array.from(\n              this.parentLayer.src\n                ? this.parentLayer.shadowRoot.querySelectorAll(\n                    ':host > map-extent:not([hidden])'\n                  )\n                : this.parentLayer.querySelectorAll(\n                    ':scope > map-extent:not([hidden])'\n                  )\n            )[position - 1] as any)._layerControlHTML.insertAdjacentElement(\n              'afterend',\n              this._layerControlHTML\n            );\n          }\n        }\n        this._validateLayerControlContainerHidden();\n      })\n      .catch(() => {\n        console.log(\n          'Error while waiting on parentLayer for map-extent hidden callback'\n        );\n      });\n  }\n\n  get extent() {\n    const getExtent = (extent) => {\n      return Object.assign(\n        Util._convertAndFormatPCRS(\n          extent._extentLayer.bounds,\n          M[extent.units],\n          extent.units\n        ),\n        { zoom: extent._extentLayer.zoomBounds }\n      );\n    };\n    const getCalculatedExtent = (extent) => {\n      extent._calculateBounds();\n      return getExtent(extent);\n    };\n\n    return this._extentLayer.bounds\n      ? getExtent(this)\n      : getCalculatedExtent(this);\n  }\n  get position() {\n    return calculatePosition(this.el);\n  }\n\n  getOuterHTML() {\n    let tempElement = this.el.cloneNode(true) as Element;\n\n    if (this.el.querySelector('map-link')) {\n      let mapLinks = tempElement.querySelectorAll('map-link');\n\n      mapLinks.forEach((mapLink) => {\n        if (mapLink.hasAttribute('href')) {\n          mapLink.setAttribute(\n            'href',\n            decodeURI(\n              new URL(\n                mapLink.getAttribute('href'),\n                this.el.baseURI ? this.el.baseURI : document.baseURI\n              ).href\n            )\n          );\n        } else if (mapLink.hasAttribute('tref')) {\n          mapLink.setAttribute(\n            'tref',\n            decodeURI(\n              new URL(\n                mapLink.getAttribute('tref'),\n                this.el.baseURI ? this.el.baseURI : document.baseURI\n              ).href\n            )\n          );\n        }\n      });\n    }\n\n    let outerLayer = tempElement.outerHTML;\n\n    tempElement.remove();\n\n    return outerLayer;\n  }\n\n  zoomTo() {\n    let extent = this.extent;\n    let map = this.getMapEl()._map,\n      xmin = extent.topLeft.pcrs.horizontal,\n      xmax = extent.bottomRight.pcrs.horizontal,\n      ymin = extent.bottomRight.pcrs.vertical,\n      ymax = extent.topLeft.pcrs.vertical,\n      bounds = Lbounds(Lpoint(xmin, ymin), Lpoint(xmax, ymax)),\n      center = map.options.crs.unproject(bounds.getCenter(true)),\n      maxZoom = extent.zoom.maxZoom,\n      minZoom = extent.zoom.minZoom;\n    map.setView(center, Util.getMaxZoom(bounds, map, minZoom, maxZoom), {\n      animate: false\n    });\n  }\n\n  getMapEl() {\n    return Util.getClosest(this.el, 'gcds-map');\n  }\n  getLayerEl() {\n    return Util.getClosest(this.el, 'map-layer,layer-');\n  }\n\n  async connectedCallback() {\n    // Initialize default values and bind handlers\n    this._opacity = this.opacityValue;\n    this._changeHandler = this._handleChange.bind(this);\n    this.parentLayer = (this.el as any).parentLayer = this.getLayerEl();\n    if (\n      this.el.hasAttribute('data-moving') ||\n      this.parentLayer?.hasAttribute('data-moving')\n    )\n      return;\n    this.mapEl = this.getMapEl();\n    // Add MapML compatibility methods to the element\n    (this.el as any).getMapEl = this.getMapEl.bind(this);\n    (this.el as any).getLayerEl = this.getLayerEl.bind(this);\n    (this.el as any).getLayerControlHTML = this.getLayerControlHTML.bind(this);\n    (this.el as any).zoomTo = this.zoomTo.bind(this);\n    (this.el as any)._validateDisabled = this._validateDisabled.bind(this);\n    (this.el as any).getMeta = this.getMeta.bind(this);\n    (this.el as any).getOuterHTML = this.getOuterHTML.bind(this);\n    // this is necessary for true \"whenReady\" being true because bounds\n    // being established is pretty important.  This is different from MapML.js;\n    // TODO it may be to port this idea back to MapML.js tbd.\n    Object.defineProperty(this.el, '_boundsCalculated', {\n      get: () => this._boundsCalculated,\n      configurable: true,\n      enumerable: true\n    });    \n      // Add extent getter on element for MapML compatibility\n    Object.defineProperty(this.el, 'extent', {\n      get: () => {\n        return this.extent;\n      },\n      configurable: true\n    });\n    \n    // Add label getter/setter on element for MapML compatibility\n    Object.defineProperty(this.el, 'label', {\n      get: () => {\n        return this.el.hasAttribute('label')\n          ? this.el.getAttribute('label')\n          : this.mapEl?.locale?.dfExtent || 'Sub-layer';\n      },\n      set: (val: string) => {\n        if (val) {\n          this.el.setAttribute('label', val);\n          // Update internal prop to trigger watcher\n          this._label = val;\n        }\n      },\n      configurable: true\n    });\n    \n    // Initialize _label from attribute if present\n    if (this.el.hasAttribute('label')) {\n      this._label = this.el.getAttribute('label');\n    }\n    \n    if (!this.mapEl) return;\n\n    await this.mapEl.whenProjectionDefined(this.units).catch(() => {\n      throw new Error('Undefined projection:' + this.units);\n    });\n    \n    // when projection is changed, the parent map-layer._layer is created (so whenReady is fulfilled) but then removed,\n    // then the map-extent disconnectedCallback will be triggered by map-layer._onRemove() (clear the shadowRoot)\n    // even before connectedCallback is finished\n    // in this case, the microtasks triggered by the fulfillment of the removed MapLayer should be stopped as well\n    // !this.isConnected <=> the disconnectedCallback has run before\n    if (!this.el.isConnected) return;\n\n    await this.mapEl.whenReady();\n    this._map = this.mapEl._map;\n    this.parentLayer?.addEventListener('map-change', this._changeHandler);\n    this.mapEl.addEventListener('map-projectionchange', this._changeHandler);\n    \n    this._extentLayer = mapExtentLayer({\n      opacity: this.opacityValue,\n      crs: M[this.units],\n      zIndex: this.position,\n      extentEl: this.el\n    });\n    // Publish to element for MapML compatibility\n    (this.el as any)._extentLayer = this._extentLayer;\n    // this._layerControlHTML is the fieldset for the extent in the LayerControl\n    // Create layer control HTML and ensure it's captured on the component instance\n    const layerControlHTML = createLayerControlExtentHTML.call(this);\n    this._layerControlHTML = layerControlHTML;\n    \n    // Also ensure the DOM element reference is synced (MapML compatibility)\n    (this.el as any)._layerControlHTML = layerControlHTML;\n    (this.el as any)._layerControlLabel = this._layerControlLabel;\n    (this.el as any)._layerControlCheckbox = this._layerControlCheckbox;\n    (this.el as any)._opacityControl = this._opacityControl;\n    (this.el as any)._opacitySlider = this._opacitySlider;\n    (this.el as any)._selectdetails = this._selectdetails;\n   // Wait for map-link elements to be ready before calculating bounds\n    await this._waitForTrefLinks();\n    this._calculateBounds();\n\n    // Handle initial checked state - add extent layer to parent if checked\n    this._handleChange();\n\n    // instead of children using parents' whenReady which can be cyclic,\n    // when this element is ready, run stuff that is only available after\n    // initialization\n    this._runMutationObserver(this.el.children);\n    // make sure same thing happens when children are added\n    this._bindMutationObserver();\n  }\n  /*\n   * Set up a function to watch additions of child elements of map-extent\n   * and to invoke desired side  effects of those additions via\n   * _runMutationObserver\n   */\n  _bindMutationObserver() {\n    this._observer = new MutationObserver((mutationList) => {\n      for (let mutation of mutationList) {\n        // Handle attribute removals for 'label'\n        if (mutation.type === 'attributes' && mutation.attributeName === 'label') {\n          if (!this.el.hasAttribute('label')) {\n            this._label = this.mapEl?.locale?.dfExtent || 'Sub-layer';\n          }\n        }\n        // the attributes changes should be handled by attributeChangedCallback()\n        if (mutation.type === 'childList') {\n          this._runMutationObserver(mutation.addedNodes);\n        }\n      }\n    });\n    // Observe both childList and attribute changes for 'label'\n    this._observer.observe(this.el, {\n      childList: true,\n      attributes: true,\n      attributeFilter: ['label']\n    });\n  }\n  _runMutationObserver(elementsGroup) {\n    const _addMetaElement = (_mapMeta) => {\n      this.whenReady().then(() => {\n        this._calculateBounds();\n        this._validateDisabled();\n      });\n    };\n    const _addStylesheetLink = (mapLink) => {\n      this.whenReady().then(() => {\n        this._extentLayer.renderStyles(mapLink);\n      });\n    };\n    const _addStyleElement = (mapStyle) => {\n      this.whenReady().then(() => {\n        this._extentLayer.renderStyles(mapStyle);\n      });\n    };\n    for (let i = 0; i < elementsGroup.length; ++i) {\n      let element = elementsGroup[i];\n      switch (element.nodeName) {\n        case 'MAP-META':\n          const name =\n            element.hasAttribute('name') &&\n            (element.getAttribute('name').toLowerCase() === 'zoom' ||\n              element.getAttribute('name').toLowerCase() === 'extent');\n          if (name && element.hasAttribute('content')) {\n            _addMetaElement(element);\n          }\n          break;\n        case 'MAP-LINK':\n          if (element.link && !element.link.isConnected)\n            _addStylesheetLink(element);\n          break;\n        case 'MAP-STYLE':\n          if (element.styleElement && !element.styleElement.isConnected) {\n            _addStyleElement(element);\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n  getLayerControlHTML() {\n    return this._layerControlHTML;\n  }\n  _projectionMatch() {\n    return (\n      this.units.toUpperCase() === this._map.options.projection.toUpperCase()\n    );\n  }\n  _validateDisabled() {\n    if (!this._extentLayer) return;\n    let templates = this.el.querySelectorAll(\n      'map-link[rel=image],map-link[rel=tile],map-link[rel=features],map-link[rel=query]'\n    );\n    const noTemplateVisible = () => {\n      let totalTemplateCount = templates.length,\n        disabledTemplateCount = 0;\n      for (let j = 0; j < templates.length; j++) {\n        if (!(templates[j] as any).isVisible()) {\n          disabledTemplateCount++;\n        }\n      }\n      return disabledTemplateCount === totalTemplateCount;\n    };\n    if (!this._projectionMatch() || noTemplateVisible()) {\n      this.el.setAttribute('disabled', '');\n      this.disabled = true;\n    } else {\n      this.el.removeAttribute('disabled');\n      this.disabled = false;\n    }\n    this.toggleLayerControlDisabled();\n    this._handleChange();\n    return this.disabled;\n  }\n  getMeta(metaName) {\n    let name = metaName.toLowerCase();\n    if (name !== 'extent' && name !== 'zoom' && name !== 'cs') return;\n    return this.parentLayer.src\n      ? this.el.querySelector(`:scope > map-meta[name=${name}]`) ||\n          this.parentLayer.shadowRoot.querySelector(\n            `:host > map-meta[name=${name}]`\n          )\n      : this.el.querySelector(`:scope > map-meta[name=${name}]`) ||\n          this.parentLayer.querySelector(`:scope > map-meta[name=${name}]`);\n  }\n  // disable/italicize layer control elements based on the map-extent.disabled property\n  toggleLayerControlDisabled() {\n    let input = this._layerControlCheckbox,\n      label = this._layerControlLabel, // access to the label for the specific map-extent\n      opacityControl = this._opacityControl,\n      opacitySlider = this._opacitySlider,\n      selectDetails = this._selectdetails;\n    if (this.disabled) {\n      // update the status of layerControl\n      input.disabled = true;\n      opacitySlider.disabled = true;\n      label.style.fontStyle = 'italic';\n      opacityControl.style.fontStyle = 'italic';\n      if (selectDetails) {\n        selectDetails.forEach((i) => {\n          i.querySelectorAll('select').forEach((j) => {\n            j.disabled = true;\n            j.style.fontStyle = 'italic';\n          });\n          i.style.fontStyle = 'italic';\n        });\n      }\n    } else {\n      input.disabled = false;\n      opacitySlider.disabled = false;\n      label.style.fontStyle = 'normal';\n      opacityControl.style.fontStyle = 'normal';\n      if (selectDetails) {\n        selectDetails.forEach((i) => {\n          i.querySelectorAll('select').forEach((j) => {\n            j.disabled = false;\n            j.style.fontStyle = 'normal';\n          });\n          i.style.fontStyle = 'normal';\n        });\n      }\n    }\n  }\n\n  _handleChange() {\n    // add _extentLayer to map if map-extent is checked, otherwise remove it\n    if (this.checked && !this.disabled && this.parentLayer._layer) {\n      // can be added to MapLayer LayerGroup no matter map-layer is checked or not\n      this._extentLayer.addTo(this.parentLayer._layer);\n      this._extentLayer.setZIndex(this.position);\n    } else {\n      this.parentLayer._layer?.removeLayer(this._extentLayer);\n    }\n    // change the checkbox in the layer control to match map-extent.checked\n    // doesn't trigger the event handler because it's not user-caused AFAICT\n  }\n  _validateLayerControlContainerHidden() {\n    let extentsFieldset = this.parentLayer._propertiesGroupAnatomy;\n    if (!extentsFieldset) return;\n    \n    // Get all map-extent elements (not just non-hidden ones)\n    const allExtents = this.parentLayer.src\n      ? Array.from(this.parentLayer.shadowRoot.querySelectorAll(':host > map-extent'))\n      : Array.from(this.parentLayer.querySelectorAll(':scope > map-extent'));\n    \n    // Count visible extents using component property, not DOM attribute\n    const numberOfVisibleSublayers = allExtents.filter(extent => !(extent as any).hidden).length;\n    \n    if (numberOfVisibleSublayers === 0) {\n      extentsFieldset.setAttribute('hidden', '');\n    } else {\n      extentsFieldset.removeAttribute('hidden');\n    }\n  }\n  disconnectedCallback() {\n    // in case of projection change, the disconnectedcallback will be triggered by removing map-layer._layer even before\n    // map-extent.connectedcallback is finished (because it will wait for the map-layer to be ready)\n    // !this._extentLayer <=> this.connectedCallback has not yet been finished before disconnectedCallback is triggered\n    if (\n      this.el.hasAttribute('data-moving') ||\n      this.parentLayer?.hasAttribute('data-moving') ||\n      !this._extentLayer\n    )\n      return;\n    this._validateLayerControlContainerHidden();\n    // remove layer control for map-extent from layer control DOM\n    // TODO: for the case of projection change, the layer control for map-extent has been created while _extentLayer has not yet been ready\n    if (this._layerControlHTML) {\n      this._layerControlHTML.remove();\n    }\n    if (this.parentLayer?._layer) {\n      this.parentLayer._layer.removeLayer(this._extentLayer);\n    }\n    if (this.parentLayer) {\n      this.parentLayer.removeEventListener('map-change', this._changeHandler);\n    }\n    if (this.mapEl) {\n      this.mapEl.removeEventListener('map-projectionchange', this._changeHandler);\n    }\n    this._boundsCalculated = false;\n    delete this._extentLayer;\n    if (this.parentLayer?._layer) delete this.parentLayer._layer.bounds;\n  }\n  \n  async _waitForTrefLinks() {\n    // Wait only for links with explicit tref attributes to have _templateVars initialized\n    // This is needed because _calculateBounds() calls link.getZoomBounds() and link.getBounds()\n    // which depend on _templateVars being set\n    // Links without tref would create circular dependency if we waited for them\n    const templates = this.el.querySelectorAll(\n      'map-link[rel=image][tref],map-link[rel=tile][tref],map-link[rel=features][tref],map-link[rel=query][tref]'\n    );\n    const linksVarsReady = [];\n    for (let link of Array.from(templates)) {\n      // Wait for _templateVars to be set, not for _templatedLayer to be created\n      linksVarsReady.push(\n        new Promise<void>((resolve) => {\n          if ((link as any)._templateVars) {\n            resolve();\n          } else {\n            const checkInterval = setInterval(() => {\n              if ((link as any)._templateVars) {\n                clearInterval(checkInterval);\n                resolve();\n              }\n            }, 10);\n            // Timeout after 1 second\n            setTimeout(() => {\n              clearInterval(checkInterval);\n              resolve(); // Resolve anyway to not block forever\n            }, 1000);\n          }\n        })\n      );\n    }\n    return Promise.all(linksVarsReady);\n  }\n  \n  _calculateBounds() {\n    delete this._extentLayer.bounds;\n    delete this._extentLayer.zoomBounds;\n    if (this.parentLayer._layer) delete this.parentLayer._layer.bounds;\n    let templates = this.el.querySelectorAll(\n      'map-link[rel=image]:not([disabled]),map-link[rel=tile]:not([disabled]),map-link[rel=features]:not([disabled]),map-link[rel=query]:not([disabled])'\n    );\n\n    // initialize bounds from this.scope > map-meta\n    let bounds = this.el.querySelector(':scope > map-meta[name=extent][content]')\n      ? Util.getBoundsFromMeta(this.el) // TODO rewrite this pile of doo doo\n      : undefined;\n\n    // initialize zoom bounds from this.scope > map-meta\n    let zoomBounds = this.el.querySelector(':scope > map-meta[name=zoom][content]')\n      ? Util.getZoomBoundsFromMeta(this.el) // TODO rewrite this pile of doo doo\n      : undefined;\n\n    // bounds should be able to be calculated unconditionally, not depend on map-extent.checked\n    for (let j = 0; j < templates.length; j++) {\n      const templateZoomBounds = (templates[j] as any).getZoomBounds(),\n        templateBounds = (templates[j] as any).getBounds();\n      let zoomMax =\n          zoomBounds && zoomBounds.hasOwnProperty('maxZoom')\n            ? zoomBounds.maxZoom\n            : -Infinity,\n        zoomMin =\n          zoomBounds && zoomBounds.hasOwnProperty('minZoom')\n            ? zoomBounds.minZoom\n            : Infinity,\n        minNativeZoom =\n          zoomBounds && zoomBounds.hasOwnProperty('minNativeZoom')\n            ? zoomBounds.minNativeZoom\n            : Infinity,\n        maxNativeZoom =\n          zoomBounds && zoomBounds.hasOwnProperty('maxNativeZoom')\n            ? zoomBounds.maxNativeZoom\n            : -Infinity;\n      if (!zoomBounds) {\n        zoomBounds = Object.assign({}, templateZoomBounds);\n      } else {\n        zoomMax = Math.max(zoomMax, templateZoomBounds.maxZoom);\n        zoomMin = Math.min(zoomMin, templateZoomBounds.minZoom);\n        maxNativeZoom = Math.max(\n          maxNativeZoom,\n          templateZoomBounds.maxNativeZoom\n        );\n        minNativeZoom = Math.min(\n          minNativeZoom,\n          templateZoomBounds.minNativeZoom\n        );\n        zoomBounds.minZoom = zoomMin;\n        zoomBounds.maxZoom = zoomMax;\n        zoomBounds.minNativeZoom = minNativeZoom;\n        zoomBounds.maxNativeZoom = maxNativeZoom;\n      }\n      if (!bounds) {\n        bounds = Lbounds(templateBounds.min, templateBounds.max);\n      } else {\n        bounds.extend(templateBounds);\n      }\n    }\n    if (bounds) {\n      this._extentLayer.bounds = bounds;\n    } else {\n      this._extentLayer.bounds = Lbounds(\n        M[this.units].options.bounds.min,\n        M[this.units].options.bounds.max\n      );\n    }\n    if (!zoomBounds) zoomBounds = {};\n    if (!zoomBounds.hasOwnProperty('minZoom')) {\n      zoomBounds.minZoom = 0;\n    }\n    if (!zoomBounds.hasOwnProperty('maxZoom')) {\n      zoomBounds.maxZoom = M[this.units].options.resolutions.length - 1;\n    }\n    if (\n      !zoomBounds.hasOwnProperty('minNativeZoom') ||\n      zoomBounds.minNativeZoom === Infinity\n    ) {\n      zoomBounds.minNativeZoom = zoomBounds.minZoom;\n    }\n    if (\n      !zoomBounds.hasOwnProperty('maxNativeZoom') ||\n      zoomBounds.maxNativeZoom === -Infinity\n    ) {\n      zoomBounds.maxNativeZoom = zoomBounds.maxZoom;\n    }\n    this._extentLayer.zoomBounds = zoomBounds;\n    this._boundsCalculated = true;\n  }\n\n  @Method()\n  async whenReady() {\n    return new Promise<void>((resolve, reject) => {\n      let interval, failureTimer;\n      if (this._extentLayer && this._boundsCalculated) {\n        resolve();\n      } else {\n        let extentElement = this.el;\n        interval = setInterval(testForExtent, 300, extentElement);\n        failureTimer = setTimeout(extentNotDefined, 10000);\n      }\n      function testForExtent(extentElement) {\n        if (extentElement._extentLayer && extentElement._boundsCalculated) {\n          clearInterval(interval);\n          clearTimeout(failureTimer);\n          resolve();\n        } else if (!extentElement.isConnected) {\n          clearInterval(interval);\n          clearTimeout(failureTimer);\n          reject('map-extent was disconnected while waiting to be ready');\n        }\n      }\n      function extentNotDefined() {\n        clearInterval(interval);\n        clearTimeout(failureTimer);\n        reject('Timeout reached waiting for extent to be ready');\n      }\n    });\n  }\n\n  render() {\n    return null;\n  }\n\n  @Method()\n  async whenLinksReady() {\n    let templates = this.el.querySelectorAll(\n      'map-link[rel=image],map-link[rel=tile],map-link[rel=features],map-link[rel=query]'\n    );\n    let linksReady = [];\n    for (let link of Array.from(templates)) {\n      linksReady.push((link as any).whenReady());\n    }\n    return Promise.allSettled(linksReady);\n  }\n}\n"]}