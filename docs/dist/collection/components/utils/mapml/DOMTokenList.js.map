{"version":3,"file":"DOMTokenList.js","sourceRoot":"","sources":["../../../../src/components/utils/mapml/DOMTokenList.tsx"],"names":[],"mappings":"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","sourcesContent":["// Export the class directly as DOMTokenList for easy use\nexport class CustomDOMTokenList {\n  // Private properties using TypeScript private fields\n  private element: HTMLElement;\n  private valueSet: boolean;\n  private attribute: string;\n  private domain: string[];\n  private domtokenlist: globalThis.DOMTokenList;\n\n  constructor(initialValue: string | null, element: HTMLElement, attribute: string, domain: string[]) {\n    // create donor/host div to extract DomTokenList from\n    const hostingElement = document.createElement('div');\n    this.domtokenlist = hostingElement.classList;\n\n    // to check if value is being set, protects from infinite recursion\n    // from attributeChangedCallback of mapml-viewer and web-map\n    this.valueSet = false;\n    this.domtokenlist.value = initialValue ?? '';\n    this.element = element;\n    this.attribute = attribute;\n    this.domain = domain;\n  }\n\n  get isValueSet(): boolean {\n    return this.valueSet;\n  }\n\n  get length(): number {\n    return this.domtokenlist.length;\n  }\n\n  get value(): string {\n    return this.domtokenlist.value;\n  }\n\n  set value(val: string | null) {\n    if (val === null) {\n      // when attribute is being removed\n      this.domtokenlist.value = '';\n    } else {\n      this.domtokenlist.value = val.toLowerCase();\n      this.valueSet = true;\n      this.element.setAttribute(this.attribute, this.domtokenlist.value);\n      this.valueSet = false;\n    }\n  }\n\n  item(index: number): string | null {\n    return this.domtokenlist.item(index);\n  }\n\n  contains(token: string): boolean {\n    return this.domtokenlist.contains(token);\n  }\n\n  // Modified default behavior\n  add(token: string): void {\n    this.domtokenlist.add(token);\n    this.element.setAttribute(this.attribute, this.domtokenlist.value);\n  }\n\n  // Modified default behavior\n  remove(token: string): void {\n    this.domtokenlist.remove(token);\n    this.element.setAttribute(this.attribute, this.domtokenlist.value);\n  }\n\n  // Modified default behavior\n  replace(oldToken: string, newToken: string): boolean {\n    const result = this.domtokenlist.replace(oldToken, newToken);\n    this.element.setAttribute(this.attribute, this.domtokenlist.value);\n    return result;\n  }\n\n  // Modified default behavior\n  supports(token: string): boolean {\n    return this.domain.includes(token);\n  }\n\n  // Modified default behavior\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/toggle\n  toggle(token: string, force?: boolean): boolean {\n    const result = this.domtokenlist.toggle(token, force);\n    this.element.setAttribute(this.attribute, this.domtokenlist.value);\n    return result;\n  }\n\n  entries(): IterableIterator<[number, string]> {\n    const tokenList = this.domtokenlist as any;\n    return tokenList.entries ? tokenList.entries() : this._manualEntries();\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/forEach\n  forEach(callback: (value: string, key: number, parent: CustomDOMTokenList) => void, thisArg?: any): void {\n    if (this.domtokenlist.forEach) {\n      this.domtokenlist.forEach((value, key) => callback.call(thisArg, value, key, this));\n    } else {\n      for (let i = 0; i < this.domtokenlist.length; i++) {\n        callback.call(thisArg, this.domtokenlist[i], i, this);\n      }\n    }\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/keys\n  keys(): IterableIterator<number> {\n    const tokenList = this.domtokenlist as any;\n    return tokenList.keys ? tokenList.keys() : this._manualKeys();\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/values\n  values(): IterableIterator<string> {\n    const tokenList = this.domtokenlist as any;\n    return tokenList.values ? tokenList.values() : this._manualValues();\n  }\n\n  // Make it iterable\n  [Symbol.iterator](): IterableIterator<string> {\n    return this.values();\n  }\n\n  // Fallback implementations for older browsers\n  private *_manualEntries(): IterableIterator<[number, string]> {\n    for (let i = 0; i < this.domtokenlist.length; i++) {\n      yield [i, this.domtokenlist[i]];\n    }\n  }\n\n  private *_manualKeys(): IterableIterator<number> {\n    for (let i = 0; i < this.domtokenlist.length; i++) {\n      yield i;\n    }\n  }\n\n  private *_manualValues(): IterableIterator<string> {\n    for (let i = 0; i < this.domtokenlist.length; i++) {\n      yield this.domtokenlist[i];\n    }\n  }\n\n  // Support array-like indexing\n  [index: number]: string;\n}\n\n// Export for easier import\nexport { CustomDOMTokenList as DOMTokenList };\nexport default CustomDOMTokenList;"]}