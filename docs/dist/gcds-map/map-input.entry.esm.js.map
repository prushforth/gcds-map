{"version":3,"file":"map-input.entry.esm.js","sources":["src/components/utils/mapml/elementSupport/inputs/zoomInput.ts","src/components/utils/mapml/elementSupport/inputs/hiddenInput.ts","src/components/utils/mapml/elementSupport/inputs/widthInput.ts","src/components/utils/mapml/elementSupport/inputs/heightInput.ts","src/components/utils/mapml/elementSupport/inputs/locationInput.ts","src/components/map-input/map-input.tsx"],"sourcesContent":["export class ZoomInput {\n  name: string;\n  min: string;\n  max: string;\n  value: number;\n  step: string;\n  layer: any;\n\n  constructor(name: string, min: string, max: string, value: number, step: string, layer: any) {\n    this.name = name;\n    this.min = min;\n    this.max = max;\n    this.value = value;\n    this.step = step;\n    this.layer = layer;\n  }\n\n  validateInput(): boolean {\n    // name is required\n    if (!this.name) {\n      return false;\n    }\n    // min and max can not be present\n    // fallback would be layer's meta, -> projection min, max\n    // don't need value, map-meta max value, -> fallback is max zoom of projection\n    // don't need step, defaults to 1\n    return true;\n  }\n\n  getValue(): number {\n    return this.layer._map.options.mapEl.zoom;\n  }\n}\n","export class HiddenInput {\n  name: string;\n  value: string;\n\n  constructor(name: string, value: string) {\n    this.name = name;\n    this.value = value;\n  }\n\n  validateInput(): boolean {\n    // name is required\n    // value is required\n    if (!this.name || !this.value) {\n      return false;\n    }\n    return true;\n  }\n\n  getValue(): string {\n    return this.value;\n  }\n}\n","export class WidthInput {\n  name: string;\n  layer: any;\n\n  constructor(name: string, layer: any) {\n    this.name = name;\n    this.layer = layer;\n  }\n\n  validateInput(): boolean {\n    // name is required\n    if (!this.name) {\n      return false;\n    }\n    return true;\n  }\n\n  getValue(): number {\n    return this.layer._map.getSize().x;\n  }\n}\n","export class HeightInput {\n  name: string;\n  layer: any;\n\n  constructor(name: string, layer: any) {\n    this.name = name;\n    this.layer = layer;\n  }\n\n  validateInput(): boolean {\n    // name is required\n    if (!this.name) {\n      return false;\n    }\n    return true;\n  }\n\n  getValue(): number {\n    return this.layer._map.getSize().y;\n  }\n}\n","import { Point } from 'leaflet';\nimport { Util } from '../../Util';\n\nexport class LocationInput {\n  name: string;\n  position?: string;\n  axis: string;\n  units?: string;\n  min?: string;\n  max?: string;\n  rel?: string;\n  layer: any;\n\n  constructor(\n    name: string,\n    position: string,\n    axis: string,\n    units: string,\n    min: string,\n    max: string,\n    rel: string,\n    layer: any\n  ) {\n    this.name = name;\n    this.position = position;\n    this.axis = axis;\n    // if unit/cs not present, find it\n    if (!units && axis && !['i', 'j'].includes(axis)) {\n      this.units = Util.axisToCS(axis).toLowerCase();\n    } else {\n      this.units = units; // cs\n    }\n    this.min = min;\n    this.max = max;\n    this.rel = rel;\n    this.layer = layer;\n  }\n\n  validateInput(): boolean {\n    // name is required\n    // axis is required\n    if (!this.name || !this.axis) {\n      return false;\n    }\n    // cs/units is only required when the axis is i/j. To differentiate between the units/cs\n    if (\n      (this.axis === 'i' || this.axis === 'j') &&\n      !['map', 'tile'].includes(this.units)\n    ) {\n      return false;\n    }\n    // check if axis match the units/cs\n    if (this.units) {\n      let axisCS = Util.axisToCS(this.axis);\n      if (\n        typeof axisCS === 'string' &&\n        axisCS.toUpperCase() !== this.units.toUpperCase()\n      ) {\n        return false;\n      }\n    }\n    // position is not required, will default to top-left\n    // min max fallbacks, map-meta -> projection\n    // rel not required, default is image/extent\n    return true;\n  }\n\n  _TCRSToPCRS(coords: any, zoom: number): any {\n    // TCRS pixel point to Projected CRS point (in meters, presumably)\n    const map = this.layer._map;\n    const crs = map.options.crs;\n    const loc = crs.transformation.untransform(coords, crs.scale(zoom));\n    return loc;\n  }\n\n  getValue(zoom?: number, bounds?: any): any {\n    // units = cs\n    //<input name=\"...\" units=\"pcrs\" type=\"location\" position=\"top|bottom-left|right\" axis=\"northing|easting|latitude|longitude\">\n    if (zoom === undefined) zoom = this.layer._map.getZoom();\n    if (bounds === undefined) bounds = this.layer._map.getPixelBounds();\n\n    if (this.units === 'pcrs' || this.units === 'gcrs') {\n      switch (this.axis) {\n        case 'longitude':\n        case 'easting':\n          if (this.position) {\n            if (this.position.match(/.*?-left/i)) {\n              return this._TCRSToPCRS(bounds.min, zoom).x;\n            } else if (this.position.match(/.*?-right/i)) {\n              return this._TCRSToPCRS(bounds.max, zoom).x;\n            }\n          } else {\n            // position is not required, will default to top-left\n            return this._TCRSToPCRS(bounds.min, zoom).x;\n          }\n          break;\n        case 'latitude':\n        case 'northing':\n          if (this.position) {\n            if (this.position.match(/top-.*?/i)) {\n              return this._TCRSToPCRS(bounds.min, zoom).y;\n            } else if (this.position.match(/bottom-.*?/i)) {\n              return this._TCRSToPCRS(bounds.max, zoom).y;\n            }\n          } else {\n            // position is not required, will default to top-left\n            return this._TCRSToPCRS(bounds.min, zoom).y;\n          }\n          break;\n      }\n    } else if (this.units === 'tilematrix') {\n      // Value is retrieved from the createTile method of TemplatedTileLayer, on move end.\n      // Different values for each tile when filling in the map tiles on the map.\n      // Currently storing all x,y,z within one object,\n      // TODO: change return value as needed based on usage by map-input\n      // https://github.com/Leaflet/Leaflet/blob/6994baf25f267db1c8b720c28a61e0700d0aa0e8/src/layer/tile/GridLayer.js#L652\n      const center = this.layer._map.getCenter();\n      const templatedTileLayer = this.layer._extentLayer._templates[0].layer;\n      const pixelBounds = templatedTileLayer._getTiledPixelBounds(center);\n      const tileRange = templatedTileLayer._pxBoundsToTileRange(pixelBounds);\n      const obj: any[] = [];\n      for (let j = tileRange.min.y; j <= tileRange.max.y; j++) {\n        for (let i = tileRange.min.x; i <= tileRange.max.x; i++) {\n          const coords = new Point(i, j);\n          (coords as any).z = templatedTileLayer._tileZoom;\n          obj.push(coords);\n        }\n      }\n      return obj;\n    } else if (this.units === 'tile' || this.units === 'map') {\n      // used for query handler on map enter or click.\n      // mapi, tilei, mapj, tilej used for query handling, value is derived from the mouse click event\n      // or center of the map when used with keyboard.\n    }\n    return;\n  }\n}\n","import { Component, Element, Prop, Method } from '@stencil/core';\nimport { Util } from '../utils/mapml/Util';\nimport { ZoomInput } from '../utils/mapml/elementSupport/inputs/zoomInput';\nimport { HiddenInput } from '../utils/mapml/elementSupport/inputs/hiddenInput';\nimport { WidthInput } from '../utils/mapml/elementSupport/inputs/widthInput';\nimport { HeightInput } from '../utils/mapml/elementSupport/inputs/heightInput';\nimport { LocationInput } from '../utils/mapml/elementSupport/inputs/locationInput';\n\n@Component({\n  tag: 'map-input',\n  shadow: false\n})\nexport class MapInput {\n  @Element() el: HTMLElement;\n\n  // Core attributes that can be set on the element\n  @Prop({ reflect: true }) name!: string;\n  @Prop({ reflect: true }) type!: string;\n  @Prop({ reflect: true, mutable: true }) value?: string;\n  @Prop({ reflect: true }) axis?: string;\n  @Prop({ reflect: true }) units?: string;\n  @Prop({ reflect: true }) position?: string;\n  @Prop({ reflect: true }) rel?: string;\n  @Prop({ reflect: true }) min?: string;\n  @Prop({ reflect: true }) max?: string;\n  @Prop({ reflect: true }) step?: string;\n\n  // Internal state\n  input: any; // Stores the input class instance (ZoomInput, LocationInput, etc.)\n  _layer: any;\n  initialValue?: number;\n\n  getMapEl() {\n    return Util.getClosest(this.el, 'gcds-map');\n  }\n\n  getLayerEl() {\n    return Util.getClosest(this.el, 'map-layer,layer-');\n  }\n\n  async connectedCallback() {\n    try {\n      // Publish methods on element for MapML compatibility\n      (this.el as any).getMapEl = this.getMapEl.bind(this);\n      (this.el as any).getLayerEl = this.getLayerEl.bind(this);\n      \n      // await (this.el.parentElement as any).whenReady();\n      // // TODO this might not be necessary, as map-extent doesn't have a _layer property afaik\n      // if (this.el.parentElement.nodeName === 'MAP-EXTENT') {\n      //   this._layer = (this.el.parentElement as any)._layer;\n      // }\n\n      switch (this.type) {\n        case 'zoom':\n          // this could be a bug, but it's the same bug as the mapml-source zoom input\n          this.initialValue = +this.el.getAttribute('value');\n          // Publish for MapML compatibility\n          (this.el as any).initialValue = this.initialValue;\n          this.input = new ZoomInput(\n            this.name,\n            this.min,\n            this.max,\n            this.initialValue,\n            this.step,\n            this._layer\n          );\n          break;\n        case 'location':\n          this.input = new LocationInput(\n            this.name,\n            this.position,\n            this.axis,\n            this.units,\n            this.min,\n            this.max,\n            this.rel,\n            this._layer\n          );\n          break;\n        case 'width':\n          this.input = new WidthInput(this.name, this._layer);\n          break;\n        case 'height':\n          this.input = new HeightInput(this.name, this._layer);\n          break;\n        case 'hidden':\n          this.input = new HiddenInput(this.name, this.value);\n          break;\n      }\n    } catch (reason) {\n      console.log(reason, '\\nin mapInput.connectedCallback');\n    }\n  }\n\n  disconnectedCallback() {\n    // Cleanup if needed\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/checkValidity\n  checkValidity(): boolean {\n    if (this.input?.validateInput()) {\n      return true;\n    } else {\n      const evt = new Event('invalid', {\n        bubbles: true,\n        cancelable: true,\n        composed: true\n      });\n      this.el.dispatchEvent(evt);\n      return false;\n    }\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/reportValidity\n  reportValidity(): boolean {\n    if (this.input?.validateInput()) {\n      return true;\n    } else {\n      const evt = new Event('invalid', {\n        bubbles: true,\n        cancelable: true,\n        composed: true\n      });\n      this.el.dispatchEvent(evt);\n      // If the event isn't canceled, report the problem to the user.\n      // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-cva-reportvalidity-dev\n      console.log(\"Input type='\" + this.type + \"' is not valid!\");\n      return false;\n    }\n  }\n\n  @Method()\n  async whenReady(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      let interval: any, failureTimer: any;\n      \n      if (this.input) {\n        resolve();\n        return;\n      }\n\n      const inputElement = this;\n      interval = setInterval(testForInput, 300, inputElement);\n      failureTimer = setTimeout(inputNotDefined, 10000);\n\n      function testForInput(inputElement: MapInput) {\n        if (inputElement.input) {\n          clearInterval(interval);\n          clearTimeout(failureTimer);\n          resolve();\n        } else if (!inputElement.el.isConnected) {\n          clearInterval(interval);\n          clearTimeout(failureTimer);\n          reject('map-input was disconnected while waiting to be ready');\n        }\n      }\n\n      function inputNotDefined() {\n        clearInterval(interval);\n        clearTimeout(failureTimer);\n        reject('Timeout reached waiting for input to be ready');\n      }\n    });\n  }\n\n  render() {\n    return null;\n  }\n}\n"],"names":["Point"],"mappings":"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"}