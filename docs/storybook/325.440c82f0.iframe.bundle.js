"use strict";(self.webpackChunkgcds_map=self.webpackChunkgcds_map||[]).push([[325],{"./dist/esm/MapTileLayer-dNMHgVBV.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>MapTileLayer,m:()=>mapTileLayer});var _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/esm/index-PZrWUcjo.js"),MapTileLayer=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.GridLayer.extend({initialize:function(options){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.GridLayer.prototype.initialize.call(this,options),this._mapTiles=options.mapTiles||[],this._tileMap={},this._pendingTiles={},this._buildTileMap(),this._container=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","leaflet-layer"),options.zIndex&&(this._container.style.zIndex=options.zIndex),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.addClass(this._container,"mapml-static-tile-container")},getEvents:function(){const events=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.GridLayer.prototype.getEvents?_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.GridLayer.prototype.getEvents.call(this):{};return events.zoomend=this._handleZoomChange,events},onAdd:function(map){this.options.pane.appendChild(this._container),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.GridLayer.prototype.onAdd.call(this,map)},onRemove:function(map){this._pendingTiles={},_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.remove(this._container)},setZIndex:function(zIndex){return this.options.zIndex=zIndex,this._updateZIndex(),this},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_handleZoomChange:function(){const currentZoom=this._map.getZoom();for(const key in this._tiles){this._keyToTileCoords(key).z!==currentZoom&&this._removeTile(key)}},addMapTile:function(mapTile){this._mapTiles.includes(mapTile)||(this._mapTiles.push(mapTile),this._addToTileMap(mapTile),this._updateBounds(),this._map&&this.redraw())},removeMapTile:function(mapTile){const index=this._mapTiles.indexOf(mapTile);-1!==index&&(this._mapTiles.splice(index,1),this._removeFromTileMap(mapTile),this._updateBounds(),this._map&&this.redraw())},removeMapTileAt:function(mapTile,coords){const index=this._mapTiles.indexOf(mapTile);-1!==index&&(this._mapTiles.splice(index,1),this._removeFromTileMapAt(coords),mapTile._tileDiv&&(mapTile._tileDiv._mapTile=null,mapTile._tileDiv=null),this._updateBounds(),this._map&&this.redraw())},isVisible:function(){if(!this._map)return!1;this.layerBounds||this._updateBounds();let map=this._map,mapZoom=map.getZoom(),zoomBounds=this.zoomBounds,layerBounds=this.layerBounds;return mapZoom<=zoomBounds.maxZoom&&mapZoom>=zoomBounds.minZoom&&this._mapTiles&&layerBounds&&layerBounds.overlaps(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.pixelToPCRSBounds(map.getPixelBounds(),mapZoom,map.options.projection))},createTile:function(coords,done){const tileKey=this._tileCoordsToKey(coords),tileSize=this.getTileSize(),tileElement=document.createElement("div");tileElement.setAttribute("col",coords.x),tileElement.setAttribute("row",coords.y),tileElement.setAttribute("zoom",coords.z),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.addClass(tileElement,"leaflet-tile"),tileElement.style.width=tileSize.x+"px",tileElement.style.height=tileSize.y+"px";const matchingTile=this._tileMap[tileKey];if(matchingTile){const img=document.createElement("img");img.src=matchingTile.src,img.width=tileSize.x,img.height=tileSize.y,img.alt="",img.setAttribute("role","presentation"),tileElement._mapTile=matchingTile,matchingTile._tileDiv=tileElement,tileElement.appendChild(img),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.addClass(tileElement,"leaflet-tile-loaded"),done(null,tileElement)}else this._pendingTiles||(this._pendingTiles={}),this._pendingTiles[tileKey]={element:tileElement,done};return tileElement},_buildTileMap:function(){this._tileMap={};for(const mapTile of this._mapTiles)this._addToTileMap(mapTile)},_addToTileMap:function(mapTile){const tileKey=`${mapTile.col}:${mapTile.row}:${mapTile.zoom}`;if(this._tileMap[tileKey]=mapTile,this._pendingTiles&&this._pendingTiles[tileKey]){const pendingTile=this._pendingTiles[tileKey],tileElement=pendingTile.element,doneCallback=pendingTile.done,tileSize=this.getTileSize(),img=document.createElement("img");img.src=mapTile.src,img.width=tileSize.x,img.height=tileSize.y,img.alt="",img.setAttribute("role","presentation"),tileElement._mapTile=mapTile,mapTile._tileDiv=tileElement,tileElement.appendChild(img),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.addClass(tileElement,"leaflet-tile-loaded"),doneCallback&&doneCallback(null,tileElement),delete this._pendingTiles[tileKey]}},_removeFromTileMap:function(mapTile){const tileKey=`${mapTile.col}:${mapTile.row}:${mapTile.zoom}`;delete this._tileMap[tileKey],mapTile._tileDiv&&(mapTile._tileDiv._mapTile=null,mapTile._tileDiv=null),this._pendingTiles&&this._pendingTiles[tileKey]&&delete this._pendingTiles[tileKey]},_removeFromTileMapAt:function(coords){const tileKey=`${coords.col}:${coords.row}:${coords.zoom}`;delete this._tileMap[tileKey],this._pendingTiles&&this._pendingTiles[tileKey]&&delete this._pendingTiles[tileKey]},_updateBounds:function(){this.layerBounds=this._computeLayerBounds(),this.zoomBounds=this._computeZoomBounds()},_computeLayerBounds:function(){if(0===this._mapTiles.length)return _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds([0,0],[0,0]);const tilesByZoom={},projection=this.options.projection,tileSize=M[projection].options.crs.tile.bounds.max.x;for(const mapTile of this._mapTiles){const zoom=mapTile.zoom;tilesByZoom[zoom]||(tilesByZoom[zoom]=[]),tilesByZoom[zoom].push({x:mapTile.col,y:mapTile.row,z:zoom})}const layerBoundsByZoom={};for(const zoom in tilesByZoom){const tiles=tilesByZoom[zoom];let pixelBounds=null;for(const tile of tiles){const pixelX=tile.x*tileSize,pixelY=tile.y*tileSize;pixelBounds?(pixelBounds.extend(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(pixelX,pixelY)),pixelBounds.extend(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(pixelX+tileSize,pixelY+tileSize))):pixelBounds=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(pixelX,pixelY),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(pixelX+tileSize,pixelY+tileSize))}pixelBounds&&(layerBoundsByZoom[zoom]=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.pixelToPCRSBounds(pixelBounds,parseInt(zoom),projection))}let combinedBounds=null;for(const zoom in layerBoundsByZoom)combinedBounds?(combinedBounds.extend(layerBoundsByZoom[zoom].min),combinedBounds.extend(layerBoundsByZoom[zoom].max)):combinedBounds=layerBoundsByZoom[zoom].pad(0);return combinedBounds||_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds([0,0],[0,0])},_computeZoomBounds:function(){const result={minZoom:1/0,maxZoom:-1/0,minNativeZoom:1/0,maxNativeZoom:-1/0};if(0===this._mapTiles.length)return{minZoom:0,maxZoom:22,minNativeZoom:0,maxNativeZoom:22};for(const mapTile of this._mapTiles){const zoom=mapTile.zoom;result.minNativeZoom=Math.min(result.minNativeZoom,zoom),result.maxNativeZoom=Math.max(result.maxNativeZoom,zoom)}return result.minZoom=result.minNativeZoom,result.maxZoom=result.maxNativeZoom,result}}),mapTileLayer=function(options){return new MapTileLayer(options)}},"./dist/esm/_commonjsHelpers-B85MJLTf.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}__webpack_require__.d(__webpack_exports__,{g:()=>getDefaultExportFromCjs})},"./dist/esm/gcds-map_2.entry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{gcds_map:()=>GcdsMap,map_layer:()=>GcdsMapLayer});var _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/esm/index-PZrWUcjo.js"),_commonjsHelpers_B85MJLTf_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./dist/esm/_commonjsHelpers-B85MJLTf.js"),_MapTileLayer_dNMHgVBV_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./dist/esm/MapTileLayer-dNMHgVBV.js"),_renderStyles_EYVT9Efh_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./dist/esm/renderStyles-EYVT9Efh.js");class CustomDOMTokenList{element;valueSet;attribute;domain;domtokenlist;constructor(initialValue,element,attribute,domain){const hostingElement=document.createElement("div");this.domtokenlist=hostingElement.classList,this.valueSet=!1,this.domtokenlist.value=initialValue??"",this.element=element,this.attribute=attribute,this.domain=domain}get isValueSet(){return this.valueSet}get length(){return this.domtokenlist.length}get value(){return this.domtokenlist.value}set value(val){null===val?this.domtokenlist.value="":(this.domtokenlist.value=val.toLowerCase(),this.valueSet=!0,this.element.setAttribute(this.attribute,this.domtokenlist.value),this.valueSet=!1)}item(index){return this.domtokenlist.item(index)}contains(token){return this.domtokenlist.contains(token)}add(token){this.domtokenlist.add(token),this.element.setAttribute(this.attribute,this.domtokenlist.value)}remove(token){this.domtokenlist.remove(token),this.element.setAttribute(this.attribute,this.domtokenlist.value)}replace(oldToken,newToken){const result=this.domtokenlist.replace(oldToken,newToken);return this.element.setAttribute(this.attribute,this.domtokenlist.value),result}supports(token){return this.domain.includes(token)}toggle(token,force){const result=this.domtokenlist.toggle(token,force);return this.element.setAttribute(this.attribute,this.domtokenlist.value),result}entries(){const tokenList=this.domtokenlist;return tokenList.entries?tokenList.entries():this._manualEntries()}forEach(callback,thisArg){if(this.domtokenlist.forEach)this.domtokenlist.forEach((value,key)=>callback.call(thisArg,value,key,this));else for(let i=0;i<this.domtokenlist.length;i++)callback.call(thisArg,this.domtokenlist[i],i,this)}keys(){const tokenList=this.domtokenlist;return tokenList.keys?tokenList.keys():this._manualKeys()}values(){const tokenList=this.domtokenlist;return tokenList.values?tokenList.values():this._manualValues()}[Symbol.iterator](){return this.values()}*_manualEntries(){for(let i=0;i<this.domtokenlist.length;i++)yield[i,this.domtokenlist[i]]}*_manualKeys(){for(let i=0;i<this.domtokenlist.length;i++)yield i}*_manualValues(){for(let i=0;i<this.domtokenlist.length;i++)yield this.domtokenlist[i]}}const t$3="<".codePointAt(0),n$2=">".codePointAt(0),e$3="=".codePointAt(0),i$2="/".codePointAt(0),a$2=(n,i=0)=>{const a=n.at(i);if("delim"===(null==a?void 0:a._t)&&a.value===t$3){const t=n.at(i+1),a="delim"===(null==t?void 0:t._t)&&t.value===e$3&&!t.isAfterSpace;return{t:{t:"lt",isIncl:a},i:i+(a?2:1)}}},o$2=(t,i=0)=>{const a=t.at(i);if("delim"===(null==a?void 0:a._t)&&a.value===n$2){const n=t.at(i+1),a="delim"===(null==n?void 0:n._t)&&n.value===e$3&&!n.isAfterSpace;return{t:{t:"gt",isIncl:a},i:i+(a?2:1)}}},c=(t,n=0)=>{const e=((t,n=0)=>{const e=((t,n=0)=>{const e=t.at(n);if("number"===(null==e?void 0:e._t)&&e.value>=0){const a=t.at(n+1);if("delim"===(null==a?void 0:a._t)&&a.value===i$2){const i=t.at(n+2);if("number"===(null==i?void 0:i._t)&&i.value>=0)return{t:{_t:"ratio",left:e.value,right:i.value,start:e.start,end:i.end},i:n+3}}}})(t,n);if(e)return e;const a=t.at(n);return!a||"number"!==a._t&&"dimension"!==a._t?void 0:{t:"number"===a._t?{_t:"number",value:a.value,flag:a.flag,start:a.start,end:a.end}:{_t:"dimension",value:a.value,unit:a.unit,start:a.start,end:a.end},i:n+1}})(t,n);if(e)return e;const i=t.at(n);return"ident"===(null==i?void 0:i._t)?{t:{_t:"ident",value:i.value,start:i.start,end:i.end},i:n+1}:void 0},matchFeature=(t,n=0)=>{var e,i;const s=t.at(n);if("("===(null==s?void 0:s._t)){const s=null!==(i=null!==(e=((t,n=0)=>{const e=t.at(n);if("ident"===(null==e?void 0:e._t)){const i=t.at(n+1);if("colon"===(null==i?void 0:i._t)){const i=c(t,n+2);if(i)return{t:{_t:"feature",context:"value",feature:e.value,value:i.t,start:e.start,end:i.t.end},i:i.i}}}})(t,n+1))&&void 0!==e?e:((t,n=0)=>{var e;const i=c(t,n);if(i){const n=((t,n=0)=>{var i,r;return null!==(r=null!==(i=a$2(t,n))&&void 0!==i?i:o$2(t,n))&&void 0!==r?r:((t,n=0)=>{const i=t.at(n);if("delim"===(null==i?void 0:i._t)&&i.value===e$3)return{t:{t:"eq"},i:n+1}})(t,n)})(t,i.i);if(n){const r=c(t,n.i);if(r){const s=null!==(e=a$2(t,r.i))&&void 0!==e?e:o$2(t,r.i);if(s){const e=c(t,s.i);if(e&&"ident"===r.t._t&&"ident"!==i.t._t&&"ident"!==e.t._t){if("lt"===n.t.t&&"lt"===s.t.t)return{t:{_t:"feature",context:"range",ops:2,feature:r.t.value,minValue:i.t,minOp:n.t.isIncl?"<=":"<",maxOp:s.t.isIncl?"<=":"<",maxValue:e.t,start:i.t.start,end:e.t.end},i:e.i};if("gt"===n.t.t&&"gt"===s.t.t)return{t:{_t:"feature",context:"range",ops:2,feature:r.t.value,minValue:e.t,minOp:s.t.isIncl?"<=":"<",maxOp:n.t.isIncl?"<=":"<",maxValue:i.t,start:i.t.start,end:e.t.end},i:e.i}}}let u="=";if("lt"===n.t.t?u=n.t.isIncl?"<=":"<":"gt"===n.t.t&&(u=n.t.isIncl?">=":">"),"ident"===i.t._t&&"ident"!==r.t._t)return{t:{_t:"feature",context:"range",feature:i.t.value,ops:1,op:u,value:r.t,start:i.t.start,end:r.t.end},i:r.i};if("ident"===r.t._t&&"ident"!==i.t._t){let t="=";return"<"===u?t=">":"<="===u?t=">=":">"===u?t="<":">="===u&&(t="<="),{t:{_t:"feature",context:"range",feature:r.t.value,ops:1,op:t,value:i.t,start:i.t.start,end:r.t.end},i:r.i}}}}}})(t,n+1))&&void 0!==i?i:((t,n=0)=>{const e=t.at(n);if("ident"===(null==e?void 0:e._t))return{t:{_t:"feature",context:"boolean",feature:e.value,start:e.start,end:e.end},i:n+1}})(t,n+1);if(s){const n=t.at(s.i);if(")"===(null==n?void 0:n._t))return{t:s.t,i:s.i+1}}}},matchInParens=(t,n=0)=>{const e=matchFeature(t,n);if(e)return{t:{_t:"in-parens",node:e.t},i:e.i};const i=t.at(n);if("("===(null==i?void 0:i._t)){const e=matchCondition(t,n+1);if(e){const n=t.at(e.i);if(")"===(null==n?void 0:n._t))return{t:{_t:"in-parens",node:e.t},i:e.i+1}}}const a=((t,n=0)=>{var e;const i=t.at(n);if(i&&("function"===i._t||"("===i._t)){const a=["("];let o=n+1,r=t.at(o);t:for(;r;){switch(r._t){case"function":case"(":a.push("(");break;case"{":case"[":a.push(r._t);break;case")":if("("===a.at(-1)&&a.pop(),0===a.length)break t;break;case"]":"["===a.at(-1)&&a.pop();break;case"}":"{"===a.at(-1)&&a.pop()}r=t.at(++o)}if(0===a.length)return{t:{_t:"general-enclosed",tokens:t.slice(n,o),start:i.start,end:(null!==(e=t.at(o))&&void 0!==e?e:t[o-1]).end},i:o}}})(t,n);return a?{t:{_t:"in-parens",node:a.t},i:a.i}:void 0},matchOr=(t,n=0)=>{const e=t.at(n);if("ident"===(null==e?void 0:e._t)&&"or"===e.value){const e=matchInParens(t,n+1);if(e)return{t:e.t,i:e.i}}},matchAnd=(t,n=0)=>{const e=t.at(n);if("ident"===(null==e?void 0:e._t)&&"and"===e.value){const e=matchInParens(t,n+1);if(e)return{t:e.t,i:e.i}}},matchNot=(t,n=0)=>{const e=t.at(n);if("ident"===(null==e?void 0:e._t)&&"not"===e.value){const e=matchInParens(t,n+1);if(e)return{t:e.t,i:e.i}}},matchCondition=(t,n=0)=>{const e=matchNot(t,n);if(e)return{t:{_t:"condition",op:"not",nodes:[e.t],start:t[n].start,end:t[e.i-1].end},i:e.i};{const e=matchInParens(t,n);if(e){const i=matchAnd(t,e.i);if(i){const a=[i.t];let o=i.i,r=matchAnd(t,i.i);for(;r;)a.push(r.t),o=r.i,r=matchAnd(t,r.i);return{t:{_t:"condition",op:"and",nodes:[e.t,...a],start:t[n].start,end:t[o-1].end},i:o}}const a=matchOr(t,e.i);if(a){const i=[a.t];let o=a.i,r=matchOr(t,a.i);for(;r;)i.push(r.t),o=r.i,r=matchOr(t,r.i);return{t:{_t:"condition",op:"or",nodes:[e.t,...i],start:t[n].start,end:t[o-1].end},i:o}}return{t:{_t:"condition",op:"and",nodes:[e.t],start:t[n].start,end:t[e.i-1].end},i:e.i}}}},matchConditionWithoutOr=(t,n=0)=>{const e=matchNot(t,n);if(e)return{t:{_t:"condition",op:"not",nodes:[e.t],start:t[n].start,end:t[e.i-1].end},i:e.i};{const e=matchInParens(t,n);if(e){const i=matchAnd(t,e.i);if(i){const a=[i.t];let o=i.i,r=matchAnd(t,i.i);for(;r;)a.push(r.t),o=r.i,r=matchAnd(t,r.i);return{t:{_t:"condition",op:"and",nodes:[e.t,...a],start:t[n].start,end:t[o-1].end},i:o}}return{t:{_t:"condition",op:"and",nodes:[e.t],start:t[n].start,end:t[e.i-1].end},i:e.i}}}},matchQuery=t=>{const n=matchCondition(t,0);if(n)return{t:{_t:"query",condition:n.t,start:0,end:t[n.i-1].end},i:n.i};{const n=t.at(0);if("ident"===(null==n?void 0:n._t)){if("not"===n.value||"only"===n.value){const e=t.at(1);if("ident"===(null==e?void 0:e._t)){const i=t.at(2);if("ident"===(null==i?void 0:i._t)&&"and"===i.value){const i=matchConditionWithoutOr(t,3);if(i)return{t:{_t:"query",condition:i.t,type:e.value,prefix:n.value,start:0,end:t[i.i-1].end},i:i.i}}return{t:{_t:"query",type:e.value,prefix:n.value,start:0,end:e.end},i:2}}}const e=t.at(1);if("ident"===(null==e?void 0:e._t)&&"and"===e.value){const e=matchConditionWithoutOr(t,2);if(e)return{t:{_t:"query",condition:e.t,type:n.value,start:0,end:t[e.i-1].end},i:e.i}}return{t:{_t:"query",type:n.value,start:0,end:n.end},i:1}}}},splitMediaQueryList=t=>{const n=[[]],e=[];for(const i of t)if("comma"===i._t&&0===e.length)n.push([]);else{switch(i._t){case"function":case"(":e.push(")");break;case"[":e.push("]");break;case"{":e.push("}");break;case")":case"]":case"}":e.at(-1)===i._t&&e.pop()}n[n.length-1].push(i)}return n},isParserError=r=>"object"==typeof r&&null!==r&&"_errid"in r;let e$2;const consumeString=(e,n)=>{if(e.length<=n+1)return null;const s=e.at(n),u=[];for(let r=n+1;r<e.length;r+=1){const n=e.at(r);if(n===s)return[r,String.fromCodePoint(...u)];if(92===n){const t=consumeEscape(e,r);if(null===t)return null;const[n,s]=t;u.push(s),r=n}else{if(10===n)return null;u.push(n)}}return null},wouldStartIdentifier=(e,s)=>{const u=e.at(s);if(void 0===u)return!1;if(45===u){const u=e.at(s+1);return void 0!==u&&(45===u||95===u||u>=65&&u<=90||u>=97&&u<=122||u>=128||92===u&&(!(e.length<=s+2)&&10!==e.at(s+2)))}return 95===u||u>=65&&u<=90||u>=97&&u<=122||u>=128||92===u&&(!(e.length<=s+1)&&10!==e.at(s+1))},consumeEscape=(n,i)=>{if(n.length<=i+1)return null;if(92!==n.at(i))return null;const a=n.at(i+1);if(10===a)return null;if(a>=48&&a<=57||a>=65&&a<=70||a>=97&&a<=102){const o=[a],f=Math.min(i+7,n.length);let c=i+2;for(;c<f;c+=1){const t=n.at(c);if(!(t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102))break;o.push(t)}if(c<n.length){const s=n.at(c);9!==s&&32!==s&&10!==s||(c+=1)}return[c-1,Number.parseInt(String.fromCodePoint(...o),16)]}return[i+1,a]},consumeNumeric=(t,e)=>{const n=consumeNumber(t,e);if(null===n)return null;const[s,u,r]=n,o=consumeIdent(t,s+1);if(null!==o){const[t,e]=o;return[t,["dimension",u,e]]}return s+1<t.length&&37===t.at(s+1)?[s+1,["percentage",u]]:[s,["number",u,r]]},consumeNumber=(t,e)=>{const r=t.at(e);if(void 0===r)return null;let o="integer";const l=[];for(43!==r&&45!==r||(e+=1,45===r&&l.push(45));e<t.length;){const n=t.at(e);if(!(n>=48&&n<=57))break;l.push(n),e+=1}if(e+1<t.length){const n=t.at(e),r=t.at(e+1);if(46===n&&r>=48&&r<=57)for(l.push(n,r),o="number",e+=2;e<t.length;){const n=t.at(e);if(!(n>=48&&n<=57))break;l.push(n),e+=1}}if(e+1<t.length){const r=t.at(e),i=t.at(e+1),a=t.at(e+2);if(69===r||101===r){let r=!1;if(i>=48&&i<=57?(l.push(69,i),e+=2,r=!0):(45===i||43===i)&&void 0!==a&&a>=48&&a<=57&&(l.push(69),45===i&&l.push(45),l.push(a),e+=3,r=!0),r)for(o="number";e<t.length;){const n=t.at(e);if(!(n>=48&&n<=57))break;l.push(n),e+=1}}}const i=String.fromCodePoint(...l);let a="number"===o?Number.parseFloat(i):Number.parseInt(i);return 0===a&&(a=0),Number.isNaN(a)?null:[e-1,a,o]},consumeIdentUnsafe=(t,e)=>{if(t.length<=e)return null;const o=[];for(let f=t.at(e);e<t.length;f=t.at(++e)){if(!(45===f||95===f||f>=65&&f<=90||f>=97&&f<=122||f>=128||f>=48&&f<=57)){{const n=consumeEscape(t,e);if(null!==n){const[t,s]=n;o.push(s),e=t;continue}}break}o.push(f)}return 0===e?null:[e-1,String.fromCodePoint(...o)]},consumeIdent=(t,e)=>wouldStartIdentifier(t,e)?consumeIdentUnsafe(t,e):null,consumeUrl=(n,s)=>{let u=n.at(s);for(;9===u||32===u||10===u;)u=n.at(++s);const r=[];let l=!1;for(;s<n.length;){if(41===u)return[s,String.fromCodePoint(...r)];if(34===u||39===u||40===u)return null;if(9===u||32===u||10===u)!l&&r.length>0&&(l=!0);else if(92===u){const t=consumeEscape(n,s);if(null===t||l)return null;const[e,u]=t;r.push(u),s=e}else{if(l)return null;r.push(u)}u=n.at(++s)}return null},consumeIdentLike=(n,s)=>{const u=consumeIdent(n,s);if(null===u)return null;const[r,o]=u;if("url"===o.toLowerCase()){if(n.length>r+1&&40===n.at(r+1)){for(let s=2;r+s<n.length;s+=1){const u=n.at(r+s);if(34===u||39===u)return[r+1,o.toLowerCase(),"function"];if(9!==u&&32!==u&&10!==u){const t=consumeUrl(n,r+s);if(null===t)return null;const[e,u]=t;return[e,u,"url"]}}return[r+1,o.toLowerCase(),"function"]}}else if(n.length>r+1&&40===n.at(r+1))return[r+1,o.toLowerCase(),"function"];return[r,o.toLowerCase(),"ident"]},lexer=m=>{const e=((f,c=0)=>{const d=[];for(;c<f.length;c+=1){const h=f.at(c),p=c;if(47===h&&42===f.at(c+1)){c+=2;for(let t=f.at(c);void 0!==t;t=f.at(++c))if(42===t&&47===f.at(c+1)){c+=1;break}}else if(9===h||32===h||10===h){let n=f.at(++c);for(;9===n||32===n||10===n;)n=f.at(++c);c-=1;const s=d.at(-1);"whitespace"===(null==s?void 0:s._t)?(d.pop(),d.push({_t:"whitespace",start:s.start,end:c})):d.push({_t:"whitespace",start:p,end:c})}else if(34===h){const t=consumeString(f,c);if(null===t)return{_errid:"INVALID_STRING",start:c,end:c};const[e,n]=t;c=e,d.push({_t:"string",value:n,start:p,end:c})}else if(35===h){if(c+1<f.length){const e=f.at(c+1);if(95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128||e>=48&&e<=57||92===e&&c+2<f.length&&10!==f.at(c+2)){const t=wouldStartIdentifier(f,c+1)?"id":"unrestricted",e=consumeIdentUnsafe(f,c+1);if(null!==e){const[n,s]=e;c=n,d.push({_t:"hash",value:s.toLowerCase(),flag:t,start:p,end:c});continue}}}d.push({_t:"delim",value:h,start:p,end:c})}else if(39===h){const t=consumeString(f,c);if(null===t)return{_errid:"INVALID_STRING",start:c,end:c};const[e,n]=t;c=e,d.push({_t:"string",value:n,start:p,end:c})}else if(40===h)d.push({_t:"(",start:p,end:c});else if(41===h)d.push({_t:")",start:p,end:c});else if(43===h){const t=consumeNumeric(f,c);if(null===t)d.push({_t:"delim",value:h,start:p,end:c});else{const[e,n]=t;c=e,"dimension"===n[0]?d.push({_t:"dimension",value:n[1],unit:n[2].toLowerCase(),flag:"number",start:p,end:c}):"number"===n[0]?d.push({_t:n[0],value:n[1],flag:n[2],start:p,end:c}):d.push({_t:n[0],value:n[1],flag:"number",start:p,end:c})}}else if(44===h)d.push({_t:"comma",start:p,end:c});else if(45===h){const t=consumeNumeric(f,c);if(null!==t){const[e,n]=t;c=e,"dimension"===n[0]?d.push({_t:"dimension",value:n[1],unit:n[2].toLowerCase(),flag:"number",start:p,end:c}):"number"===n[0]?d.push({_t:n[0],value:n[1],flag:n[2],start:p,end:c}):d.push({_t:n[0],value:n[1],flag:"number",start:p,end:c});continue}if(c+2<f.length){const t=f.at(c+1),e=f.at(c+2);if(45===t&&62===e){c+=2,d.push({_t:"CDC",start:p,end:c});continue}}const e=consumeIdentLike(f,c);if(null!==e){const[t,n,s]=e;c=t,d.push({_t:s,value:n,start:p,end:c});continue}d.push({_t:"delim",value:h,start:p,end:c})}else if(46===h){const t=consumeNumeric(f,c);if(null!==t){const[e,n]=t;c=e,"dimension"===n[0]?d.push({_t:"dimension",value:n[1],unit:n[2].toLowerCase(),flag:"number",start:p,end:c}):"number"===n[0]?d.push({_t:n[0],value:n[1],flag:n[2],start:p,end:c}):d.push({_t:n[0],value:n[1],flag:"number",start:p,end:c});continue}d.push({_t:"delim",value:h,start:p,end:c})}else if(58===h)d.push({_t:"colon",start:p,end:c});else if(59===h)d.push({_t:"semicolon",start:p,end:c});else if(60===h){if(c+3<f.length){const t=f.at(c+1),e=f.at(c+2),s=f.at(c+3);if(33===t&&45===e&&45===s){c+=3,d.push({_t:"CDO",start:p,end:c});continue}}d.push({_t:"delim",value:h,start:p,end:c})}else if(64===h){const t=consumeIdent(f,c+1);if(null!==t){const[e,n]=t;c=e,d.push({_t:"at-keyword",value:n.toLowerCase(),start:p,end:c});continue}d.push({_t:"delim",value:h,start:p,end:c})}else if(91===h)d.push({_t:"[",start:p,end:c});else if(93===h)d.push({_t:"]",start:p,end:c});else if(123===h)d.push({_t:"{",start:p,end:c});else if(125===h)d.push({_t:"}",start:p,end:c});else if(h>=48&&h<=57){const t=consumeNumeric(f,c),[e,n]=t;c=e,"dimension"===n[0]?d.push({_t:"dimension",value:n[1],unit:n[2].toLowerCase(),flag:"number",start:p,end:c}):"number"===n[0]?d.push({_t:n[0],value:n[1],flag:n[2],start:p,end:c}):d.push({_t:n[0],value:n[1],flag:"number",start:p,end:c})}else if(95===h||h>=65&&h<=90||h>=97&&h<=122||h>=128||92===h){const t=consumeIdentLike(f,c);if(null===t)d.push({_t:"delim",value:h,start:p,end:c});else{const[e,n,s]=t;c=e,d.push({_t:s,value:n,start:p,end:c})}}else d.push({_t:"delim",value:h,start:p,end:c})}return d.push({_t:"EOF",start:c,end:c}),d})((s=>{const t=(()=>{let s;return e$2?s=e$2:(s=new TextEncoder,e$2=s),s})().encode(s),r=[],a=t.length;for(let e=0;e<a;e+=1){const s=t.at(e);if(s<128)switch(s){case 0:r.push(65533);break;case 12:r.push(10);break;case 13:r.push(10),10===t.at(e+1)&&(e+=1);break;default:r.push(s)}else s<224?r.push(s<<59>>>53|t[++e]<<58>>>58):s<240?r.push(s<<60>>>48|t[++e]<<58>>>52|t[++e]<<58>>>58):r.push(s<<61>>>43|t[++e]<<58>>>46|t[++e]<<58>>>52|t[++e]<<58>>>58)}return r})(m));return isParserError(e)?e:(e=>{const r=[];let t=!1;for(const s of e)switch(s._t){case"{":return{_errid:"NO_LCURLY",start:s.start,end:s.end};case"semicolon":return{_errid:"NO_SEMICOLON",start:s.start,end:s.end};case"whitespace":t=!0;break;case"EOF":break;default:r.push({...s,isAfterSpace:t}),t=!1}return r})(e)},parseMediaQueryList=t=>{const r=lexer(t);return isParserError(r)?r:(t=>{const n=splitMediaQueryList(t);if(1===n.length&&0===n[0].length)return{_t:"query-list",nodes:[{_t:"query",type:"all",start:0,end:0}]};{const t=[];for(const e of n){const n=matchQuery(e);n&&n.i===e.length?t.push(n.t):t.push(void 0)}return{_t:"query-list",nodes:t}}})(r)},isValueInteger=t=>"number"===t._t&&"integer"===t.flag,isValueLength=t=>"dimension"===t._t&&r(t.unit)||"number"===t._t&&"integer"===t.flag&&0===t.value,isValueResolution=t=>"dimension"===t._t&&o(t.unit),isValueRatio=t=>"ratio"===t._t||isValueInteger(t)&&t.value>=0,t$1=new Set(["cm","mm","q","in","pc","pt","px"]),e=e=>t$1.has(e.unit),n=new Set([...t$1,"em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","svw","svh","svi","svb","svmin","svmax","lvw","lvh","lvi","lvb","lvmin","lvmax","dvw","dvh","dvi","dvb","dvmin","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"]),r=t=>n.has(t),compareLength=(t,n)=>{const r="number"===t._t?{_t:"dimension",value:0,unit:"px"}:t,i="number"===n._t?{_t:"dimension",value:0,unit:"px"}:n;if(e(r)){const t=u(r);if(e(i)){const e=u(i);return t===e?"eq":t>e?"gt":"lt"}return 0===t&&0===i.value?"eq":"unknown"}if(e(i)){const t=compareLength(i,r);return"lt"===t?"gt":"gt"===t?"lt":t}return 0===r.value&&0===i.value?"eq":"unknown"},i=new Map([["cm",96/2.54],["mm",96/25.4],["q",96/101.6],["in",96],["pc",16],["pt",96/72]]),u=t=>{var e;return t.value*(null!==(e=i.get(t.unit))&&void 0!==e?e:1)},a=new Set(["dpi","dpcm","dppx","x"]),o=t=>a.has(t),s=new Map([["dpi",96],["dpcm",96/2.54],["dppx",1]]),l=t=>{var e;return t.value*(null!==(e=s.get(t.unit))&&void 0!==e?e:1)},solveMediaFeature_=(e,a)=>{const t=e.feature.startsWith("min-"),c=e.feature.startsWith("max-");if((t||c)&&"value"===e.context&&"ident"!==e.value._t)return solveMediaFeature_({_t:"feature",context:"range",ops:1,feature:e.feature.slice(4),op:t?">=":"<=",value:e.value,start:e.start,end:e.end},a);{const t=a.features.get(e.feature);if(t){if("boolean"===e.context)return"discrete"===t.type&&(t.values.has("none")||t.values.has(0))||"range"===t.type&&("ratio"===t.valueType?t.canNumeratorBeZero:t.canBeZero)?a.solveUnknownFeature(e):"true";if("value"===e.context){if("discrete"===t.type){let n;if("ident"===e.value._t)n=e.value.value;else{if("number"!==e.value._t||"integer"!==e.value.flag)return"false";n=e.value.value}return t.values.has(n)?a.solveUnknownFeature(e):"false"}if("integer"===t.valueType)return isValueInteger(e.value)?e.value.value<0&&!t.canBeNegative||0===e.value.value&&!t.canBeZero?"false":a.solveUnknownFeature(e):"false";if("length"===t.valueType){if(isValueLength(e.value)){const r=compareLength(e.value,{_t:"number",value:0});return"lt"===r&&!t.canBeNegative||"eq"===r&&!t.canBeZero?"false":a.solveUnknownFeature(e)}return"false"}if("ratio"===t.valueType)return isValueRatio(e.value)&&("eq"!==((t,e)=>{const n="number"===t._t?t.value:t.left,r="number"===t._t?1:t.right,i="number"===e._t?e.value:e.left,u="number"===e._t?1:e.right;if(0===n&&0===r)return 0===i&&0===u?"eq":"incomparable";if(0===i&&0===u)return"incomparable";if(0===n&&0===i)return"eq";if(0===r&&0===u)return"eq";if(0!==n&&0!==i&&0!==r&&0!==u&&n*u==i*r)return"eq";const a=n/r,o=i/u;return a>o?"gt":a<o?"lt":"eq"})(e.value,{_t:"number",value:0})||t.canNumeratorBeZero)?a.solveUnknownFeature(e):"false";if(isValueResolution(e.value)){const n=((t,e)=>{const n=l(t),r=l(e);return n===r?"eq":n>r?"gt":"lt"})(e.value,{value:0,unit:"x"});return"lt"===n&&!t.canBeNegative||"eq"===n&&!t.canBeZero?"false":a.solveUnknownFeature(e)}return"false"}if("discrete"===t.type)return"false";if(2===e.ops)return solveMediaCondition_({op:"and",nodes:[{_t:"in-parens",node:{_t:"feature",context:"range",ops:1,feature:e.feature,op:"<"===e.minOp?">":">=",value:e.minValue,start:e.minValue.start,end:e.minValue.end}},{_t:"in-parens",node:{_t:"feature",context:"range",ops:1,feature:e.feature,op:e.maxOp,value:e.maxValue,start:e.maxValue.start,end:e.maxValue.end}}]},a);if("ratio"===t.valueType){if(isValueRatio(e.value)){const n="number"===e.value._t?e.value.value:e.value.left,r="number"===e.value._t?1:e.value.right;return 0===n&&0!==r&&("="===e.op&&!t.canNumeratorBeZero||"<="===e.op&&!t.canNumeratorBeZero||"<"===e.op)||!(0!==n||0!==r||t.canNumeratorBeZero&&t.canDenominatorBeZero||"<"!==e.op&&">"!==e.op)?"false":">="===e.op&&0===n&&0!==r&&!t.canDenominatorBeZero||">"===e.op&&0===n&&0!==r&&!t.canNumeratorBeZero&&t.canDenominatorBeZero||"<="===e.op&&0!==n&&0===r&&(!t.canNumeratorBeZero||!t.canDenominatorBeZero)||"<"===e.op&&0!==n&&0===r&&!t.canDenominatorBeZero?"true":a.solveUnknownFeature(e)}return"false"}return"integer"===t.valueType?isValueInteger(e.value)?"="===e.op&&!t.canBeNegative&&e.value.value<0||"="===e.op&&!t.canBeZero&&0===e.value.value||"<="===e.op&&!t.canBeNegative&&e.value.value<0||"<="===e.op&&!t.canBeNegative&&!t.canBeZero&&0===e.value.value||"<"===e.op&&!t.canBeNegative&&e.value.value<=0||"<"===e.op&&!t.canBeNegative&&!t.canBeZero&&1===e.value.value?"false":">="===e.op&&!t.canBeNegative&&e.value.value<=0||">="===e.op&&!t.canBeNegative&&!t.canBeZero&&1===e.value.value||">"===e.op&&!t.canBeNegative&&e.value.value<0||">"===e.op&&!t.canBeNegative&&!t.canBeZero&&0===e.value.value?"true":a.solveUnknownFeature(e):"false":"length"===t.valueType?isValueLength(e.value)?"="===e.op&&!t.canBeNegative&&e.value.value<0||"="===e.op&&!t.canBeZero&&0===e.value.value||"<="===e.op&&!t.canBeNegative&&e.value.value<0||"<="===e.op&&!t.canBeNegative&&!t.canBeZero&&0===e.value.value||"<"===e.op&&!t.canBeNegative&&e.value.value<=0?"false":">="===e.op&&!t.canBeNegative&&e.value.value<=0||">"===e.op&&!t.canBeNegative&&e.value.value<0||">"===e.op&&!t.canBeNegative&&!t.canBeZero&&0===e.value.value?"true":a.solveUnknownFeature(e):"false":isValueResolution(e.value)?"="===e.op&&!t.canBeNegative&&e.value.value<0||"="===e.op&&!t.canBeZero&&0===e.value.value||"<="===e.op&&!t.canBeNegative&&e.value.value<0||"<="===e.op&&!t.canBeNegative&&!t.canBeZero&&0===e.value.value||"<"===e.op&&!t.canBeNegative&&e.value.value<=0?"false":">="===e.op&&!t.canBeNegative&&e.value.value<=0||">"===e.op&&!t.canBeNegative&&e.value.value<0||">"===e.op&&!t.canBeNegative&&!t.canBeZero&&0===e.value.value?"true":a.solveUnknownFeature(e):"false"}return"false"}},solveMediaInParens_=(e,o)=>"condition"===e.node._t?solveMediaCondition_(e.node,o):"feature"===e.node._t?solveMediaFeature_(e.node,o):o.solveGeneralEnclosed(e.node),solveMediaCondition_=(o,e)=>"and"===o.op?and(...o.nodes.map(o=>solveMediaInParens_(o,e))):"or"===o.op?or(...o.nodes.map(o=>solveMediaInParens_(o,e))):not(solveMediaInParens_(o.nodes[0],e)),not=e=>"true"===e?"false":"false"===e?"true":"unknown",and=(...e)=>e.reduce((e,n)=>"false"===e||"false"===n?"false":"unknown"===e||"unknown"===n?"unknown":"true","true"),or=(...e)=>e.reduce((e,n)=>"true"===e||"true"===n?"true":"unknown"===e||"unknown"===n?"unknown":"false","false"),DEFAULT_KNOWN_FEATURES={"color-gamut":{type:"discrete",values:["srgb","p3","rec2020"]},"display-mode":{type:"discrete",values:["fullscreen","standalone","minimal-ui","browser"]},"dynamic-range":{type:"discrete",values:["standard","high"]},"environment-blending":{type:"discrete",values:["opaque","additive","subtractive"]},orientation:{type:"discrete",values:["portrait","landscape"]},"prefers-color-scheme":{type:"discrete",values:["light","dark"]},"prefers-contrast":{type:"discrete",values:["no-preference","less","more","custom"]},"prefers-reduced-data":{type:"discrete",values:["no-preference","reduce"]},"prefers-reduced-motion":{type:"discrete",values:["no-preference","reduce"]},"prefers-reduced-transparency":{type:"discrete",values:["no-preference","reduce"]},scan:{type:"discrete",values:["interlace","progressive"]},"video-color-gamut":{type:"discrete",values:["srgb","p3","rec2020"]},"video-dynamic-range":{type:"discrete",values:["standard","high"]},"any-hover":{type:"discrete",values:["none","hover"]},"any-pointer":{type:"discrete",values:["none","coarse","fine"]},"forced-colors":{type:"discrete",values:["none","active"]},hover:{type:"discrete",values:["none","hover"]},"inverted-colors":{type:"discrete",values:["none","inverted"]},"nav-controls":{type:"discrete",values:["none","back"]},"overflow-block":{type:"discrete",values:["none","scroll","paged"]},"overflow-inline":{type:"discrete",values:["none","scroll"]},pointer:{type:"discrete",values:["none","coarse","fine"]},update:{type:"discrete",values:["none","slow","fast"]},scripting:{type:"discrete",values:["none","initial-only","enabled"]},grid:{type:"discrete",values:[0,1]},resolution:{type:"range",valueType:"resolution",canBeZero:!0,canBeNegative:!1,extraValues:{infinite:Number.POSITIVE_INFINITY}},"device-height":{type:"range",valueType:"length",canBeZero:!0,canBeNegative:!1},"device-width":{type:"range",valueType:"length",canBeZero:!0,canBeNegative:!1},height:{type:"range",valueType:"length",canBeZero:!0,canBeNegative:!1},width:{type:"range",valueType:"length",canBeZero:!0,canBeNegative:!1},"device-aspect-ratio":{type:"range",valueType:"ratio",canNumeratorBeZero:!0,canDenominatorBeZero:!0},"aspect-ratio":{type:"range",valueType:"ratio",canNumeratorBeZero:!0,canDenominatorBeZero:!0},color:{type:"range",valueType:"integer",canBeZero:!0,canBeNegative:!1},"horizontal-viewport-segments":{type:"range",valueType:"integer",canBeZero:!0,canBeNegative:!1},"color-index":{type:"range",valueType:"integer",canBeZero:!0,canBeNegative:!1},monochrome:{type:"range",valueType:"integer",canBeZero:!0,canBeNegative:!1},"vertical-viewport-segments":{type:"range",valueType:"integer",canBeZero:!0,canBeNegative:!1}},t=e=>Object.entries(e),createSolverConfig=e=>{var n,r,a,o,s,i;const l=new Map;for(const[a,o]of t({...DEFAULT_KNOWN_FEATURES,...null==e?void 0:e.features}))"discrete"===o.type?l.set(a,{...o,values:new Set(null!==(n=o.values)&&void 0!==n?n:[])}):l.set(a,{...o,extraValues:new Map(t(null!==(r=null==o?void 0:o.extraValues)&&void 0!==r?r:{}))});return{solveUnknownFeature:null!==(a=null==e?void 0:e.solveUnknownFeature)&&void 0!==a?a:()=>"unknown",solveGeneralEnclosed:null!==(o=null==e?void 0:e.solveGeneralEnclosed)&&void 0!==o?o:()=>"unknown",isMediaTypeScreen:null!==(s=null==e?void 0:e.isMediaTypeScreen)&&void 0!==s?s:"unknown",isLegacyBrowser:null!==(i=null==e?void 0:e.isLegacyBrowser)&&void 0!==i?i:"unknown",features:l}},solveMediaQueryList=(r,t)=>{const a="string"==typeof r?parseMediaQueryList(r):r;return isParserError(a)?"false":solveMediaQueryList_(a,createSolverConfig(t))},solveMediaQueryList_=(e,n)=>{const t=e.nodes.map(e=>void 0===e?"false":((e,r)=>{if("true"===r.isLegacyBrowser&&"only"===e.prefix)return"false";let i;i=void 0===e.type||"all"===e.type?"true":"screen"===e.type?r.isMediaTypeScreen:"print"===e.type?not(r.isMediaTypeScreen):"false";const n=void 0===e.condition?"true":solveMediaCondition_(e.condition,r),p=and(i,n);return"not"===e.prefix?not(p):p})(e,n));if(0===t.length)return"true";{let e="false";for(const n of t){if("true"===n)return"true";"unknown"===n&&(e="unknown")}return e}},matchMedia=function(query){const parsedQuery=parseMediaQueryList(query),map=this,features={"prefers-lang":{type:"discrete",get values(){return[navigator.language.substring(0,2)]}},"map-projection":{type:"discrete",get values(){return[map.projection.toLowerCase()]}},"map-zoom":{type:"range",valueType:"integer",canBeNegative:!1,canBeZero:!0,get extraValues(){return{min:0,max:map.zoom}}},"map-top-left-easting":{type:"range",valueType:"integer",canBeNegative:!0,canBeZero:!0,get values(){return[Math.trunc(map.extent.topLeft.pcrs.horizontal)]}},"map-top-left-northing":{type:"range",valueType:"integer",canBeNegative:!0,canBeZero:!0,get values(){return[Math.trunc(map.extent.topLeft.pcrs.vertical)]}},"map-bottom-right-easting":{type:"range",valueType:"integer",canBeNegative:!0,canBeZero:!0,get values(){return[Math.trunc(map.extent.bottomRight.pcrs.horizontal)]}},"map-bottom-right-northing":{type:"range",valueType:"integer",canBeNegative:!0,canBeZero:!0,get values(){return[Math.trunc(map.extent.bottomRight.pcrs.vertical)]}},"prefers-color-scheme":{type:"discrete",get values(){return[window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"]}},"prefers-map-content":{type:"discrete",get values(){return M.options.contentPreference}}},solveUnknownFeature=featureNode=>{let feature=featureNode.feature,queryValue=featureNode.value.value;return"prefers-lang"===feature?features["prefers-lang"].values.includes(queryValue).toString():"map-zoom"===feature||"map-top-left-easting"===feature||"map-top-left-northing"===feature||"map-bottom-right-easting"===feature||"map-bottom-right-northing"===feature?function solveRangeFeature(featureNode){const{context,feature,value,op}=featureNode;if(!feature.startsWith("map-"))return"unknown";const currentValue=function getMapFeatureValue(feature){switch(feature){case"map-zoom":return map.zoom;case"map-top-left-easting":return Math.trunc(map.extent.topLeft.pcrs.horizontal);case"map-top-left-northing":return Math.trunc(map.extent.topLeft.pcrs.vertical);case"map-bottom-right-easting":return Math.trunc(map.extent.bottomRight.pcrs.horizontal);case"map-bottom-right-northing":return Math.trunc(map.extent.bottomRight.pcrs.vertical);default:return}}(feature);if(void 0===currentValue)return"unknown";if("value"===context)return currentValue===value.value?"true":"false";if("range"===context)switch(op){case"<":return currentValue<value.value?"true":"false";case"<=":return currentValue<=value.value?"true":"false";case">":return currentValue>value.value?"true":"false";case">=":return currentValue>=value.value?"true":"false";case"=":return currentValue===value.value?"true":"false";default:return"unknown"}return"unknown"}(featureNode):"map-projection"===feature?features["map-projection"].values.some(p=>p===queryValue).toString():"prefers-color-scheme"===feature?features["prefers-color-scheme"].values.some(s=>s===queryValue).toString():"prefers-map-content"===feature?features[feature].values.some(pref=>pref===queryValue).toString():"false"};let matches="true"===solveMediaQueryList(parsedQuery,{features,solveUnknownFeature});const mediaQueryList=Object.assign(new EventTarget,{matches,media:query,listeners:[],addEventListener(event,listener){"change"===event&&(this.listeners.push(listener),0!==this.listeners.length&&observeProperties(),EventTarget.prototype.addEventListener.call(this,event,listener))},removeEventListener(event,listener){"change"===event&&(this.listeners=this.listeners.filter(l=>l!==listener),0===this.listeners.length&&stopObserving(),EventTarget.prototype.removeEventListener.call(this,event,listener))}}),observeProperties=()=>{const notifyIfChanged=()=>{const newMatches="true"===solveMediaQueryList(parsedQuery,{features,solveUnknownFeature});newMatches!==mediaQueryList.matches&&(mediaQueryList.matches=newMatches,mediaQueryList.dispatchEvent(new Event("change")))};notifyIfChanged.bind(this),this.addEventListener("map-projectionchange",notifyIfChanged),this.addEventListener("map-moveend",notifyIfChanged);const colorSchemeQuery=window.matchMedia("(prefers-color-scheme: dark)");colorSchemeQuery.addEventListener("change",notifyIfChanged),stopObserving=()=>{this.removeEventListener("map-projectionchange",notifyIfChanged),this.removeEventListener("map-moveend",notifyIfChanged),colorSchemeQuery.removeEventListener("change",notifyIfChanged)}};let stopObserving;return mediaQueryList};var hasRequiredL_Control_Locate,LayerControl=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Control.Layers.extend({options:{autoZIndex:!1,sortLayers:!0,sortFunction:function(layerA,layerB){return layerA.options.zIndex<layerB.options.zIndex?-1:layerA.options.zIndex>layerB.options.zIndex?1:0}},initialize:function(overlays,options){for(var i in _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.setOptions(this,options),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,overlays)this._addLayer(overlays[i],i,!0)},onAdd:function(){return this._initLayout(),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(this._container.getElementsByTagName("a")[0],"keydown",this._focusFirstLayer,this._container),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(this._container,"contextmenu",this._preventDefaultContextMenu,this),this._update(),this._layers.length<1&&!this._map._showControls?this._container.setAttribute("hidden",""):this._map._showControls=!0,this._container},onRemove:function(map){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.off(this._container.getElementsByTagName("a")[0],"keydown",this._focusFirstLayer,this._container)},addOrUpdateOverlay:function(layer,name){for(var alreadyThere=!1,i=0;i<this._layers.length;i++)if(this._layers[i].layer===layer){alreadyThere=!0,this._layers[i].name=name;break}return alreadyThere||this.addOverlay(layer,name),this._layers.length>0&&(this._container.removeAttribute("hidden"),this._map._showControls=!0),this._map?this._update():this},removeLayer:function(layer){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Control.Layers.prototype.removeLayer.call(this,layer),0===this._layers.length&&this._container.setAttribute("hidden","")},_checkDisabledLayers:function(){},_focusFirstLayer:function(e){if("Enter"===e.key&&"leaflet-control-layers leaflet-control leaflet-control-layers-expanded"===this.className){var elem=this.children[1].children[2].children[0].children[0].children[0].children[0];elem&&setTimeout(()=>elem.focus(),0)}},_update:function(){if(!this._container)return this;_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.empty(this._baseLayersList),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.empty(this._overlaysList),this._layerControlInputs=[];var baseLayersPresent,overlaysPresent,i,obj,baseLayersCount=0;for(this.options.sortLayers&&this._layers.sort((a,b)=>this.options.sortFunction(a.layer,b.layer,a.name,b.name)),i=0;i<this._layers.length;i++)obj=this._layers[i],this._addItem(obj),overlaysPresent=overlaysPresent||obj.overlay,baseLayersPresent=baseLayersPresent||!obj.overlay,baseLayersCount+=obj.overlay?0:1;return this.options.hideSingleBase&&(baseLayersPresent=baseLayersPresent&&baseLayersCount>1,this._baseLayersList.style.display=baseLayersPresent?"":"none"),this._separator.style.display=overlaysPresent&&baseLayersPresent?"":"none",this},_addItem:function(obj){var layercontrols=obj.layer._layerEl._layerControlHTML;return obj.input=layercontrols.querySelector("input.leaflet-control-layers-selector"),this._layerControlInputs.push(obj.input),obj.input.layerId=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.stamp(obj.layer),this._overlaysList.appendChild(layercontrols),layercontrols},collapse:function(e){if(this._container.className.includes("expanded")&&this._map.contextMenu._extentLayerMenu.hidden&&this._map.contextMenu._layerMenu.hidden)return"SELECT"===e.target.tagName||e.relatedTarget&&e.relatedTarget.parentElement&&("mapml-contextmenu mapml-layer-menu"===e.relatedTarget.className||"mapml-contextmenu mapml-layer-menu"===e.relatedTarget.parentElement.className)||this._map&&"block"===this._map.contextMenu._layerMenu.style.display||(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),"touch"===e.originalEvent?.pointerType&&(this._container._isExpanded=!1)),this},_preventDefaultContextMenu:function(e){let latlng=this._map.mouseEventToLatLng(e),containerPoint=this._map.mouseEventToContainerPoint(e);e.preventDefault(),this._container._isExpanded||"touch"!==e.pointerType?this._map.fire("contextmenu",{originalEvent:e,containerPoint,latlng}):this._container._isExpanded=!0}}),ReloadButton=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Control.extend({options:{position:"topleft"},_getLocale:function(map){return map.options.mapEl&&map.options.mapEl.locale?map.options.mapEl.locale:M.options.locale},onAdd:function(map){let locale=this._getLocale(map),container=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","mapml-reload-button leaflet-bar"),link=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("button","mapml-reload-button",container);return link.innerHTML="<span aria-hidden='true'>&#x021BA</span>",link.title=locale.cmReload,link.setAttribute("type","button"),link.classList.add("mapml-button"),link.setAttribute("aria-label","Reload"),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.disableClickPropagation(link),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(link,"click",_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.stop),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(link,"click",this._goReload,this),this._reloadButton=link,this._updateDisabled(),map.on("moveend",this._updateDisabled,this),container},onRemove:function(map){map.off("moveend",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_goReload:function(e){!this._disabled&&this._map.options.mapEl._history.length>1&&this._map.options.mapEl.reload()},_updateDisabled:function(){setTimeout(()=>{_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.removeClass(this._reloadButton,"leaflet-disabled"),this._reloadButton.setAttribute("aria-disabled","false"),this._map&&(this._disabled||this._map.options.mapEl._history.length<=1)&&(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.addClass(this._reloadButton,"leaflet-disabled"),this._reloadButton.setAttribute("aria-disabled","true"))},0)}}),ScaleBar=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Control.Scale.extend({options:{maxWidth:100,updateWhenIdle:!0,position:"bottomleft"},onAdd:function(map){map._container.insertAdjacentHTML("beforeend","<output role='status' aria-live='polite' aria-atomic='true' class='mapml-screen-reader-output-scale'></output>"),this._container=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","mapml-control-scale");let scaleControl=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Control.Scale.prototype.onAdd.call(this,map);return this._container.appendChild(scaleControl),this._container.setAttribute("tabindex",0),this._scaleControl=this,setTimeout(()=>{this._updateOutput(),this._focusOutput()},0),map.on("zoomend moveend",this._updateOutput,this),this._map._container.addEventListener("focus",()=>this._focusOutput()),this._container},onRemove:function(map){map.off("zoomend moveend",this._updateOutput,this)},getContainer:function(){return this._container},_pixelsToDistance:function(px,units){let dpi=96*window.devicePixelRatio;return"metric"===units?px/dpi*2.54:px/dpi},_scaleLength:function(scale){let scaleLength=scale.getAttribute("style");return parseInt(scaleLength.match(/width:\s*(\d+)px/)[1])},_focusOutput:function(){setTimeout(()=>{let outputFocus=this._map._container.querySelector(".mapml-screen-reader-output-scale");outputFocus.textContent="",setTimeout(()=>{outputFocus.textContent=this._container.getAttribute("aria-label")},100)},0)},_updateOutput:function(){let output="",scaleLine=this._scaleControl.getContainer().getElementsByClassName("leaflet-control-scale-line")[0];if(this.options.metric){output=`${parseFloat(this._pixelsToDistance(this._scaleLength(scaleLine),"metric").toFixed(1))} centimeters to ${scaleLine.textContent.trim()}`,output=output.replace(/(\d+)\s*m\b/g,"$1 meters"),output=output.replace(/ km/g," kilometers")}else{output=`${parseFloat(this._pixelsToDistance(this._scaleLength(scaleLine),"imperial").toFixed(1))} inches to ${scaleLine.textContent.trim()}`,output=output.replace(/ft/g,"feet"),output=output.replace(/mi/g,"miles")}this._container.setAttribute("aria-label",output),this._map._container.querySelector(".mapml-screen-reader-output-scale").textContent=output}}),L_Control_Locate={exports:{}};var L_Control_LocateExports=function requireL_Control_Locate(){return hasRequiredL_Control_Locate||(hasRequiredL_Control_Locate=1,module=L_Control_Locate,function(factory,window){void 0!==window&&window.L?module.exports=factory(L):module.exports=factory((0,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.d)()),void 0!==window&&window.L&&(window.L.Control.Locate=factory(L))}(function(L){const LDomUtilApplyClassesMethod=(method,element,classNames)=>{(classNames=classNames.split(" ")).forEach(function(className){L.DomUtil[method].call(this,element,className)})},addClasses=(el,names)=>LDomUtilApplyClassesMethod("addClass",el,names),removeClasses=(el,names)=>LDomUtilApplyClassesMethod("removeClass",el,names),LocationMarker=L.Marker.extend({initialize(latlng,options){L.Util.setOptions(this,options),this._latlng=latlng,this.createIcon()},createIcon(){const opt=this.options;let style="";void 0!==opt.color&&(style+=`stroke:${opt.color};`),void 0!==opt.weight&&(style+=`stroke-width:${opt.weight};`),void 0!==opt.fillColor&&(style+=`fill:${opt.fillColor};`),void 0!==opt.fillOpacity&&(style+=`fill-opacity:${opt.fillOpacity};`),void 0!==opt.opacity&&(style+=`opacity:${opt.opacity};`);const icon=this._getIconSVG(opt,style);this._locationIcon=L.divIcon({className:icon.className,html:icon.svg,iconSize:[icon.w,icon.h]}),this.setIcon(this._locationIcon)},_getIconSVG(options,style){const r=options.radius,s=r+options.weight,s2=2*s;return{className:"leaflet-control-locate-location",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${s2}" height="${s2}" version="1.1" viewBox="-${s} -${s} ${s2} ${s2}"><circle r="`+r+'" style="'+style+'" /></svg>',w:s2,h:s2}},setStyle(style){L.Util.setOptions(this,style),this.createIcon()}}),CompassMarker=LocationMarker.extend({initialize(latlng,heading,options){L.Util.setOptions(this,options),this._latlng=latlng,this._heading=heading,this.createIcon()},setHeading(heading){this._heading=heading},_getIconSVG(options,style){const r=options.radius,w=options.width+options.weight,h=2*(r+options.depth+options.weight),path=`M0,0 l${options.width/2},${options.depth} l-${w},0 z`;return{className:"leaflet-control-locate-heading",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="${w}" height="${h}" version="1.1" viewBox="-${w/2} 0 ${w} ${h}" style="transform: rotate(${this._heading}deg)"><path d="`+path+'" style="'+style+'" /></svg>',w,h}}}),LocateControl=L.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds:locationEvent=>locationEvent.bounds,flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:LocationMarker,compassClass:CompassMarker,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"leaflet-control-locate-location-arrow",iconLoading:"leaflet-control-locate-spinner",iconElementTag:"span",textElementTag:"small",circlePadding:[0,0],metric:!0,createButtonCallback(container,options){const link=L.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",container);link.title=options.strings.title,link.href="#",link.setAttribute("role","button");const icon=L.DomUtil.create(options.iconElementTag,options.icon,link);return void 0!==options.strings.text&&(L.DomUtil.create(options.textElementTag,"leaflet-locate-text",link).textContent=options.strings.text,link.classList.add("leaflet-locate-text-active"),link.parentNode.style.display="flex",options.icon.length>0&&icon.classList.add("leaflet-locate-icon")),{link,icon}},onLocationError(err,control){alert(err.message)},onLocationOutsideMapBounds(control){control.stop(),alert(control.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize(options){for(const i in options)"object"==typeof this.options[i]?L.extend(this.options[i],options[i]):this.options[i]=options[i];this.options.followMarkerStyle=L.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=L.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=L.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd(map){const container=L.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=container,this._map=map,this._layer=this.options.layer||new L.LayerGroup,this._layer.addTo(map),this._event=void 0,this._compassHeading=null,this._prevBounds=null;const linkAndIcon=this.options.createButtonCallback(container,this.options);return this._link=linkAndIcon.link,this._icon=linkAndIcon.icon,L.DomEvent.on(this._link,"click",function(ev){L.DomEvent.stopPropagation(ev),L.DomEvent.preventDefault(ev),this._onClick()},this).on(this._link,"dblclick",L.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),container},_onClick(){this._justClicked=!0;const wasFollowing=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){const behaviors=this.options.clickBehavior;let behavior=behaviors.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(behavior=wasFollowing?behaviors.inView:behaviors.inViewNotFollowing),behaviors[behavior]&&(behavior=behaviors[behavior]),behavior){case"setView":this.setView();break;case"stop":this.stop(),this.options.returnToPrevBounds&&(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds)}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate(){if(!this._active&&this._map&&(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),this.options.showCompass)){const oriAbs="ondeviceorientationabsolute"in window;if(oriAbs||"ondeviceorientation"in window){const _this=this,deviceorientation=function(){L.DomEvent.on(window,oriAbs?"deviceorientationabsolute":"deviceorientation",_this._onDeviceOrientation,_this)};DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(permissionState){"granted"===permissionState&&deviceorientation()}):deviceorientation()}}},_deactivate(){this._active&&this._map&&(this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?L.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&L.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this)))},setView(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this._justClicked&&!1!==this.options.initialZoomLevel)(f=this.options.flyTo?this._map.flyTo:this._map.setView).bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel);else if(this.options.keepCurrentZoomLevel)(f=this.options.flyTo?this._map.flyTo:this._map.panTo).bind(this._map)([this._event.latitude,this._event.longitude]);else{var f=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;this._ignoreEvent=!0,f.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.initialZoomLevel||this.options.locateOptions.maxZoom}),L.Util.requestAnimFrame(function(){this._ignoreEvent=!1},this)}},_drawCompass(){if(!this._event)return;const latlng=this._event.latlng;if(this.options.showCompass&&latlng&&null!==this._compassHeading){const cStyle=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle;this._compass?(this._compass.setLatLng(latlng),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(cStyle)):this._compass=new this.options.compassClass(latlng,this._compassHeading,cStyle).addTo(this._layer)}!this._compass||this.options.showCompass&&null!==this._compassHeading||(this._compass.removeFrom(this._layer),this._compass=null)},_drawMarker(){void 0===this._event.accuracy&&(this._event.accuracy=0);const radius=this._event.accuracy,latlng=this._event.latlng;if(this.options.drawCircle){const style=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(latlng).setRadius(radius).setStyle(style):this._circle=L.circle(latlng,radius,style).addTo(this._layer)}let distance,unit;if(this.options.metric?(distance=radius.toFixed(0),unit=this.options.strings.metersUnit):(distance=(3.2808399*radius).toFixed(0),unit=this.options.strings.feetUnit),this.options.drawMarker){const mStyle=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(latlng),this._marker.setStyle&&this._marker.setStyle(mStyle)):this._marker=new this.options.markerClass(latlng,mStyle).addTo(this._layer)}this._drawCompass();const t=this.options.strings.popup;function getPopupText(){return"string"==typeof t?L.Util.template(t,{distance,unit}):"function"==typeof t?t({distance,unit}):t}this.options.showPopup&&t&&this._marker&&this._marker.bindPopup(getPopupText())._popup.setLatLng(latlng),this.options.showPopup&&t&&this._compass&&this._compass.bindPopup(getPopupText())._popup.setLatLng(latlng)},_removeMarker(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload(){this.stop(),this._map&&this._map.off("unload",this._unload,this)},_setCompassHeading(angle){!isNaN(parseFloat(angle))&&isFinite(angle)?(angle=Math.round(angle),this._compassHeading=angle,L.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration(){this._setCompassHeading()},_onDeviceOrientation(e){this._active&&(e.webkitCompassHeading?this._setCompassHeading(e.webkitCompassHeading):e.absolute&&e.alpha&&this._setCompassHeading(360-e.alpha))},_onLocationError(err){3==err.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(err,this))},_onLocationFound(e){if((!this._event||this._event.latlng.lat!==e.latlng.lat||this._event.latlng.lng!==e.latlng.lng||this._event.accuracy!==e.accuracy)&&this._active){switch(this._event=e,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":this._userPanned||this._userZoomed||this.setView();break;case"always":this.setView()}this._justClicked=!1}},_onDrag(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:"untilPanOrZoom"===this.options.setView?!this._userPanned&&!this._userZoomed:void 0))},_isOutsideMapBounds(){return void 0!==this._event&&this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng)},_updateContainerStyle(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses(state){"requesting"==state?(removeClasses(this._container,"active following"),addClasses(this._container,"requesting"),removeClasses(this._icon,this.options.icon),addClasses(this._icon,this.options.iconLoading)):"active"==state?(removeClasses(this._container,"requesting following"),addClasses(this._container,"active"),removeClasses(this._icon,this.options.iconLoading),addClasses(this._icon,this.options.icon)):"following"==state&&(removeClasses(this._container,"requesting"),addClasses(this._container,"active following"),removeClasses(this._icon,this.options.iconLoading),addClasses(this._icon,this.options.icon))},_cleanClasses(){L.DomUtil.removeClass(this._container,"requesting"),L.DomUtil.removeClass(this._container,"active"),L.DomUtil.removeClass(this._container,"following"),removeClasses(this._icon,this.options.iconLoading),addClasses(this._icon,this.options.icon)},_resetVariables(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return L.control.locate=options=>new L.Control.Locate(options),LocateControl},window)),L_Control_Locate.exports;var module}(),LocateControl=(0,_commonjsHelpers_B85MJLTf_js__WEBPACK_IMPORTED_MODULE_1__.g)(L_Control_LocateExports),GeolocationButton=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Control.extend({options:{position:"bottomright"},_getLocale:function(map){return map.options.mapEl&&map.options.mapEl.locale?map.options.mapEl.locale:M.options.locale},onAdd:function(map){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Control.CustomLocate=LocateControl.extend({start:function(){LocateControl.prototype.start.call(this),map.getContainer().focus()},stop:function(){LocateControl.prototype.stop.call(this),map.getContainer().focus()}});let locale=this._getLocale(map);this.locateControl=new _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Control.CustomLocate({showPopup:!1,strings:{title:locale.btnLocTrackOff},position:this.options.position,locateOptions:{maxZoom:16}}).addTo(map);var container=this.locateControl._container,button=this.locateControl;return new MutationObserver(function(mutations){container.classList.contains("active")&&container.classList.contains("following")?(container.firstChild.title=locale.btnLocTrackOn,button._marker.bindTooltip(locale.btnMyLocTrackOn,{permanent:!0})):container.classList.contains("active")?(container.firstChild.title=locale.btnLocTrackLastKnown,button._marker.bindTooltip(locale.btnMyLastKnownLocTrackOn)):container.firstChild.title=locale.btnLocTrackOff}).observe(container,{attributes:!0,attributeFilter:["class"]}),container},stop:function(){return this.locateControl.stop()}}),FullscreenButton=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Control.extend({options:{position:"topleft",title:{false:M.options.locale.btnFullScreen,true:M.options.locale.btnExitFullScreen}},_getLocale:function(map){return map.options.mapEl&&map.options.mapEl.locale?map.options.mapEl.locale:M.options.locale},onAdd:function(map){let locale=this._getLocale(map);this.options.title={false:locale.btnFullScreen,true:locale.btnExitFullScreen};var container=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",container),this.link.href="#",this.link.setAttribute("role","button"),this._map=map,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(this.link,"click",this._click,this),container},onRemove:function(map){map.off("fullscreenchange",this._toggleTitle,this)},_click:function(e){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.stopPropagation(e),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.preventDefault(e),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(options){var mapEl=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getClosest(this.getContainer(),"gcds-map");this.isFullscreen()?options&&options.pseudoFullscreen?this._disablePseudoFullscreen(mapEl):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(mapEl):options&&options.pseudoFullscreen?this._enablePseudoFullscreen(mapEl):mapEl.requestFullscreen?mapEl.requestFullscreen():mapEl.mozRequestFullScreen?mapEl.mozRequestFullScreen():mapEl.webkitRequestFullscreen?mapEl.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):mapEl.msRequestFullscreen?mapEl.msRequestFullscreen():this._enablePseudoFullscreen(mapEl),this.getContainer().focus()},_enablePseudoFullscreen:function(container){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.addClass(container,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(container){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.removeClass(container,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(fullscreen){this._isFullscreen=fullscreen;var container=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getClosest(this.getContainer(),"gcds-map");fullscreen?_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.addClass(container,"mapml-fullscreen-on"):_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.removeClass(container,"mapml-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(e){var fullscreenElement=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getClosest(this.getContainer(),":fullscreen"),mapEl=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getClosest(this.getContainer(),"gcds-map");fullscreenElement!==mapEl||this._isFullscreen?fullscreenElement!==mapEl&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Map.mergeOptions({fullscreenControl:!1}),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Map.addInitHook(function(){var fullscreenchange;if(this.options.fullscreenControl&&(this.fullscreenControl=new FullscreenButton(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(fullscreenchange="MSFullscreenChange"),fullscreenchange){var onFullscreenChange=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Util.bind(this._onFullscreenChange,this);this.whenReady(function(){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(document,fullscreenchange,onFullscreenChange)}),this.on("unload",function(){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.off(document,fullscreenchange,onFullscreenChange)})}});var DebugOverlay=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Layer.extend({onAdd:function(map){let mapSize=map.getSize();(mapSize.x>400||mapSize.y>300)&&(this._container=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("table","mapml-debug",map._container),this._panel=debugPanel({className:"mapml-debug-panel",pane:this._container}),map.addLayer(this._panel)),this._grid=debugGrid({className:"mapml-debug-grid",pane:map._panes.mapPane,zIndex:400,tileSize:map.options.crs.options.crs.tile.bounds.max.x}),map.addLayer(this._grid),this._vectors=debugVectors({className:"mapml-debug-vectors",pane:map._panes.mapPane,toolPane:this._container}),map.addLayer(this._vectors)},onRemove:function(map){map.removeLayer(this._grid),map.removeLayer(this._vectors),this._panel&&(map.removeLayer(this._panel),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.remove(this._container))}}),DebugPanel=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Layer.extend({initialize:function(options){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.setOptions(this,options)},onAdd:function(map){this._title=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("caption","mapml-debug-banner",this.options.pane),this._title.innerHTML="Debug mode",map.debug={},map.debug._infoContainer=this._debugContainer=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("tbody","mapml-debug-panel",this.options.pane);let infoContainer=map.debug._infoContainer;map.debug._tileCoord=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("tr","mapml-debug-coordinates",infoContainer),map.debug._tileMatrixCoord=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("tr","mapml-debug-coordinates",infoContainer),map.debug._mapCoord=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("tr","mapml-debug-coordinates",infoContainer),map.debug._tcrsCoord=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("tr","mapml-debug-coordinates",infoContainer),map.debug._pcrsCoord=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("tr","mapml-debug-coordinates",infoContainer),map.debug._gcrsCoord=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("tr","mapml-debug-coordinates",infoContainer),this._map.on("mousemove",this._updateCoords)},onRemove:function(){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.remove(this._title),this._debugContainer&&(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.remove(this._debugContainer),this._map.off("mousemove",this._updateCoords))},_updateCoords:function(e){if(this.contextMenu._visible)return;let mapEl=this.options.mapEl,pointCoords=mapEl._map.project(e.latlng),scale=mapEl._map.options.crs.scale(+mapEl.zoom),pcrs=mapEl._map.options.crs.transformation.untransform(pointCoords,scale),tileSize=mapEl._map.options.crs.options.crs.tile.bounds.max.x,pointI=pointCoords.x%tileSize,pointJ=pointCoords.y%tileSize;pointI<0&&(pointI+=tileSize),pointJ<0&&(pointJ+=tileSize),this.debug._tileCoord.innerHTML=`\n      <th scope="row">tile: </th>\n      <td>i: ${Math.trunc(pointI)}, </td>\n      <td>j: ${Math.trunc(pointJ)}</td>\n      `,this.debug._mapCoord.innerHTML=`\n      <th scope="row">map: </th>\n      <td>i: ${Math.trunc(e.containerPoint.x)}, </td>\n      <td>j: ${Math.trunc(e.containerPoint.y)}</td>\n      `,this.debug._gcrsCoord.innerHTML=`\n      <th scope="row">gcrs: </th>\n      <td>lon: ${e.latlng.lng.toFixed(6)}, </td>\n      <td>lat: ${e.latlng.lat.toFixed(6)}</td>\n      `,this.debug._tcrsCoord.innerHTML=`\n      <th scope="row">tcrs: </th>\n      <td>x: ${Math.trunc(pointCoords.x)}, </td>\n      <td>y: ${Math.trunc(pointCoords.y)}</td>\n      `,this.debug._tileMatrixCoord.innerHTML=`\n      <th scope="row">tilematrix: </th>\n      <td>column: ${Math.trunc(pointCoords.x/tileSize)}, </td>\n      <td>row: ${Math.trunc(pointCoords.y/tileSize)}</td>\n      `,this.debug._pcrsCoord.innerHTML=`\n      <th scope="row">pcrs: </th>\n      <td>easting: ${pcrs.x.toFixed(2)}, </td>\n      <td>northing: ${pcrs.y.toFixed(2)}</td>\n      `}}),debugPanel=function(options){return new DebugPanel(options)},DebugGrid=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.GridLayer.extend({initialize:function(options){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.setOptions(this,options),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.GridLayer.prototype.initialize.call(this,this._map)},createTile:function(coords){let tile=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","mapml-debug-tile");return tile.setAttribute("col",coords.x),tile.setAttribute("row",coords.y),tile.setAttribute("zoom",coords.z),tile.innerHTML=[`col: ${coords.x}`,`row: ${coords.y}`,`zoom: ${coords.z}`].join(", "),tile.style.outline="1px dashed red",tile}}),debugGrid=function(options){return new DebugGrid(options)},DebugVectors=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.LayerGroup.extend({initialize:function(options){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.setOptions(this,options),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.LayerGroup.prototype.initialize.call(this,this._map,options)},onAdd:function(map){map.on("overlayremove",this._mapLayerUpdate,this),map.on("overlayadd",this._mapLayerUpdate,this);let center=map.options.crs.transformation.transform(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(0,0),map.options.crs.scale(0));this._centerVector=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.circle(map.options.crs.pointToLatLng(center,0),{radius:250,className:"mapml-debug-vectors projection-centre"}),this._centerVector.bindTooltip("Projection Center"),this._addBounds(map)},onRemove:function(map){this.clearLayers()},_addBounds:function(map){setTimeout(()=>{let id=Object.keys(map._layers),layers=map._layers,colors=["#FF5733","#8DFF33","#3397FF","#E433FF","#F3FF33"],j=0;this.addLayer(this._centerVector);for(let i of id)if(layers[i].layerBounds||layers[i].extentBounds){let boundsArray;boundsArray=layers[i].layerBounds?[layers[i].layerBounds.min,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(layers[i].layerBounds.max.x,layers[i].layerBounds.min.y),layers[i].layerBounds.max,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(layers[i].layerBounds.min.x,layers[i].layerBounds.max.y)]:[layers[i].extentBounds.min,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(layers[i].extentBounds.max.x,layers[i].extentBounds.min.y),layers[i].extentBounds.max,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(layers[i].extentBounds.min.x,layers[i].extentBounds.max.y)];let boundsTestTag=layers[i].extentBounds&&layers[i].options.linkEl.getLayerEl().hasAttribute("data-testid")?layers[i].options.linkEl.getLayerEl().getAttribute("data-testid"):layers[i].layerBounds&&layers[i].options?._leafletLayer?._layerEl?.hasAttribute("data-testid")?layers[i].options._leafletLayer._layerEl.getAttribute("data-testid"):"",boundsRect=projectedExtent(boundsArray,{className:this.options.className.concat(" ",boundsTestTag),color:colors[j%colors.length],weight:2,opacity:1,fillOpacity:.01,fill:!0});layers[i].options._leafletLayer&&boundsRect.bindTooltip(layers[i].options._leafletLayer._title,{sticky:!0}),this.addLayer(boundsRect),j++}if(map.totalLayerBounds){let totalBoundsArray=[map.totalLayerBounds.min,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(map.totalLayerBounds.max.x,map.totalLayerBounds.min.y),map.totalLayerBounds.max,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(map.totalLayerBounds.min.x,map.totalLayerBounds.max.y)],totalBounds=projectedExtent(totalBoundsArray,{className:"mapml-debug-vectors mapml-total-bounds",color:"#808080",weight:5,opacity:.5,fill:!1});this.addLayer(totalBounds)}},0)},_mapLayerUpdate:function(e){this.clearLayers(),this._addBounds(e.target)}}),debugVectors=function(options){return new DebugVectors(options)},ProjectedExtent=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Path.extend({getCenter:function(round){return this._map.options.crs.unproject(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds(this._locations).getCenter())},options:{className:"mapml-debug-extent"},initialize:function(locations,options){this._locations=locations,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.setOptions(this,options)},_project:function(){this._rings=[];let scale=this._map.options.crs.scale(this._map.getZoom()),map=this._map;for(let i=0;i<this._locations.length;i++){let pt0=map.options.crs.transformation.transform(this._locations[i],scale);this._rings.push(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(pt0.x,pt0.y)._subtract(map.getPixelOrigin()))}this._parts=[this._rings]},_update:function(){this._map&&this._renderer._updatePoly(this,!0)}}),projectedExtent=function(locations,options){return new ProjectedExtent(locations,options)},Crosshair=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Layer.extend({onAdd:function(map){this._container=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","mapml-crosshair",map._container),this._container.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 100 100"><g stroke="#fff" stroke-linecap="round" stroke-linejoin="round"><circle cx="50.028" cy="50.219" r="3.923" stroke-width="2" color="currentColor" overflow="visible"/><path stroke-width="3" d="M4.973 54.424h31.768a4.204 4.204 0 1 0 0-8.409H4.973A4.203 4.203 0 0 0 .77 50.22a4.203 4.203 0 0 0 4.204 4.205z" color="currentColor" overflow="visible"/><path stroke-width="3" d="M54.232 5.165a4.204 4.204 0 1 0-8.408 0v31.767a4.204 4.204 0 1 0 8.408 0V5.165z"/><path stroke-width="3" d="M99.288 50.22a4.204 4.204 0 0 0-4.204-4.205H63.317a4.204 4.204 0 1 0 0 8.409h31.767a4.205 4.205 0 0 0 4.204-4.205zM45.823 95.274a4.204 4.204 0 1 0 8.409 0V63.506a4.204 4.204 0 1 0-8.409 0v31.768z" color="currentColor" overflow="visible"/></g></svg>',map.isFocused=!1,this._isQueryable=!1,map.on("layerchange layeradd layerremove overlayremove",this._toggleEvents,this),map.on("popupopen",this._isMapFocused,this),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(map._container,"keydown keyup mousedown",this._isMapFocused,this),this._addOrRemoveCrosshair()},onRemove:function(map){map.off("layerchange layeradd layerremove overlayremove",this._toggleEvents),map.off("popupopen",this._isMapFocused),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.off(map._container,"keydown keyup mousedown",this._isMapFocused)},_toggleEvents:function(){this._hasQueryableLayer()?this._map.on("viewreset move moveend",this._addOrRemoveCrosshair,this):this._map.off("viewreset move moveend",this._addOrRemoveCrosshair,this),this._addOrRemoveCrosshair()},_addOrRemoveCrosshair:function(e){this._hasQueryableLayer()?this._container.removeAttribute("hidden"):this._container.setAttribute("hidden","")},_addOrRemoveMapOutline:function(e){let mapContainer=this._map._container;this._map.isFocused&&!this._outline?this._outline=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","mapml-outline",mapContainer):!this._map.isFocused&&this._outline&&(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.remove(this._outline),delete this._outline)},_hasQueryableLayer:function(){let layers=this._map.options.mapEl.layers;if(this._map.isFocused)for(let layer of layers)if(layer.queryable&&layer.queryable())return!0;return!1},_isMapFocused:function(e){if(!this._map._container.parentNode.activeElement)return void(this._map.isFocused=!1);let isLeafletContainer=this._map._container.parentNode.activeElement.classList.contains("leaflet-container");isLeafletContainer&&["keydown"].includes(e.type)&&e.shiftKey&&9===e.keyCode?this._map.isFocused=!1:this._map.isFocused=isLeafletContainer&&["keyup","keydown"].includes(e.type),this._map.isFocused&&this._map.fire("mapkeyboardfocused"),this._addOrRemoveMapOutline(),this._addOrRemoveCrosshair()}}),FeatureIndexOverlay=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.Layer.extend({onAdd:function(map){this._container=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","mapml-feature-index-box",map._container),this._container.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 100 100"><path fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M0 0h100v100H0z" color="#000" overflow="visible"/></svg>',this._output=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("output","mapml-feature-index",map._container),this._output.setAttribute("role","status"),this._output.setAttribute("aria-live","polite"),this._output.setAttribute("aria-atomic","true"),this._body=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("span","mapml-feature-index-content",this._output),this._body.index=0,this._output.initialFocus=!1,map.on("focus blur popupclose",this._addOrRemoveFeatureIndex,this),map.on("moveend focus templatedfeatureslayeradd",this._checkOverlap,this),map.on("keydown",this._onKeyDown,this),this._addOrRemoveFeatureIndex()},_calculateReticleBounds:function(){let bnds=this._map.getPixelBounds(),center=bnds.getCenter(),wRatio=Math.abs(bnds.min.x-bnds.max.x)/this._map.options.mapEl.width,hRatio=Math.abs(bnds.min.y-bnds.max.y)/this._map.options.mapEl.height,reticleDimension=getComputedStyle(this._container).width.replace(/[^\d.]/g,"");"%"===getComputedStyle(this._container).width.slice(-1)&&(reticleDimension=reticleDimension*this._map.options.mapEl.width/100);let w=wRatio*reticleDimension/2,h=hRatio*reticleDimension/2,minPoint=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(center.x-w,center.y+h),maxPoint=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(center.x+w,center.y-h),b=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds(minPoint,maxPoint);return _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.pixelToPCRSBounds(b,this._map.getZoom(),this._map.options.projection)},_checkOverlap:function(e){if("focus"===e.type&&(this._output.initialFocus=!0),!this._output.initialFocus)return;if(this._output.popupClosed)return void(this._output.popupClosed=!1);this._map.fire("mapkeyboardfocused");let featureIndexBounds=this._calculateReticleBounds(),features=this._map.featureIndex.inBoundFeatures,index=1,keys=Object.keys(features),body=this._body,noFeaturesMessage=document.createElement("span");noFeaturesMessage.innerHTML=this._map.options.mapEl.locale.fIndexNoFeatures,body.innerHTML="",body.index=0,body.allFeatures=[],keys.forEach(i=>{let layer=features[i].layer,layers=features[i].layer._layers,b=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds();if(layers){Object.keys(layers).forEach(j=>{b||(b=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds(layer._layers[j]._bounds.min,layer._layers[j]._bounds.max)),b.extend(layer._layers[j]._bounds.min),b.extend(layer._layers[j]._bounds.max)})}else layer._bounds&&(b=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds(layer._bounds.min,layer._bounds.max));if(featureIndexBounds.overlaps(b)){let label=features[i].path.getAttribute("aria-label");index<8&&body.appendChild(this._updateOutput(label,index,index)),index%7!=0&&1!==index||body.allFeatures.push([]),body.allFeatures[Math.floor((index-1)/7)].push({label,index,layer}),body.allFeatures[1]&&1===body.allFeatures[1].length&&body.appendChild(this._updateOutput("More results",0,9)),index+=1}}),this._addToggleKeys(),1===index&&body.appendChild(noFeaturesMessage)},_updateOutput:function(label,index,key){let span=document.createElement("span");return span.setAttribute("data-index",index),span.innerHTML=`<kbd>${key}</kbd> `+label+"<span>, </span>",span},_addToggleKeys:function(){let allFeatures=this._body.allFeatures;for(let i=0;i<allFeatures.length;i++){if(0===allFeatures[i].length)return;if(allFeatures[i-1]){let label="Previous results";allFeatures[i].push({label})}if(allFeatures[i+1]&&allFeatures[i+1].length>0){let label="More results";allFeatures[i].push({label})}}},_onKeyDown:function(e){let body=this._body,key=e.originalEvent.keyCode;if(key>=49&&key<=55){if(!body.allFeatures[body.index])return;let feature=body.allFeatures[body.index][key-49];if(!feature)return;let layer=feature.layer;layer&&(this._map.featureIndex.currentIndex=feature.index-1,layer._popup?(this._map.closePopup(),layer.openPopup()):layer.options.group.focus())}else 56===key?this._newContent(body,-1):57===key&&this._newContent(body,1)},_newContent:function(body,direction){let index=body.firstChild.getAttribute("data-index"),newContent=body.allFeatures[Math.floor((index-1)/7+direction)];if(newContent&&newContent.length>0){body.innerHTML="",body.index+=direction;for(let i=0;i<newContent.length;i++){let feature=newContent[i],index=feature.index?feature.index:0,key=i+1;"More results"===feature.label&&(key=9),"Previous results"===feature.label&&(key=8),body.appendChild(this._updateOutput(feature.label,index,key))}}},_addOrRemoveFeatureIndex:function(e){if(this._output.initialFocus){if(this._output.hasAttribute("aria-hidden")){let obj=this;setTimeout(function(){obj._output.removeAttribute("aria-hidden")},100)}}else this._output.setAttribute("aria-hidden","true");e&&"popupclose"===e.type?(this._output.setAttribute("aria-hidden","true"),this._output.popupClosed=!0):e&&"focus"===e.type?(this._container.removeAttribute("hidden"),this._output.classList.remove("mapml-screen-reader-output")):e&&e.target._popup?this._container.setAttribute("hidden",""):e&&"blur"===e.type?(this._container.setAttribute("hidden",""),this._output.classList.add("mapml-screen-reader-output"),this._output.initialFocus=!1,this._addOrRemoveFeatureIndex()):(this._container.setAttribute("hidden",""),this._output.classList.add("mapml-screen-reader-output"))}});const GcdsMap=class{constructor(hostRef){(0,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.r)(this,hostRef)}get el(){return(0,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.a)(this)}lat=0;lon=0;zoom=0;projection="OSMTILE";controls=!1;static=!1;_controlslist;locale;_controlsList;_source;_history=[];_historyIndex=-1;_traversalCall=!1;_map;_container;mapCaptionObserver;_featureIndexOverlay;_zoomControl;_layerControl;_reloadButton;_fullScreenControl;_geolocationButton;_scaleBar;_isInitialized=!1;_debug;_crosshair;_boundDropHandler;_boundDragoverHandler;controlsChanged(newValue){this._map&&(newValue?this._showControls():this._hideControls())}controlsListChanged(newValue){this._controlsList&&(this._controlsList.value=newValue,this._map&&this._toggleControls())}get controlsList(){return this._controlsList}set controlsList(value){!this._controlsList||"string"!=typeof value&&null!==value||(value?this.el.setAttribute("controlslist",value):this.el.removeAttribute("controlslist"),this._map&&this._toggleControls())}async projectionChanged(newValue,oldValue){if(newValue&&this._map&&this._map.options.projection!==newValue){const connect=(()=>{let lat=this.lat,lon=this.lon,zoom=this.zoom;this._map.options.crs=window.M[newValue],this._map.options.projection=newValue;let layersReady=[];this._map.announceMovement?.disable();const layers=this.el.querySelectorAll("map-layer,layer-");for(let layer of Array.from(layers)){layer.removeAttribute("disabled");let reAttach=this.el.removeChild(layer);this.el.appendChild(reAttach),reAttach.whenReady&&layersReady.push(reAttach.whenReady())}return Promise.allSettled(layersReady).then(()=>{const layers=this.el.layers;if(1===layers.length){const layer=layers[0];layer.extent&&(this._map.setMinZoom(layer.extent.zoom.minZoom),this._map.setMaxZoom(layer.extent.zoom.maxZoom))}this.zoomTo(lat,lon,zoom),window.M.options.announceMovement&&this._map.announceMovement?.enable(),setTimeout(()=>{this.el.dispatchEvent(new CustomEvent("map-projectionchange"))},0)})}).bind(this);try{if(await this.whenProjectionDefined(newValue),await connect(),this._map&&this._map.options.projection!==oldValue&&this._resetHistory(),this._debug)for(let i=0;i<2;i++)this.toggleDebug()}catch{throw new Error("Undefined projection: "+newValue)}}}get extent(){let map=this._map,pcrsBounds=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.pixelToPCRSBounds(map.getPixelBounds(),map.getZoom(),map.options.projection),formattedExtent=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U._convertAndFormatPCRS(pcrsBounds,map.options.crs,this.projection),minZoom=1/0,maxZoom=-1/0;const layers=this.el.layers;for(let i=0;i<layers.length;i++)layers[i].extent&&(layers[i].extent.zoom.minZoom<minZoom&&(minZoom=layers[i].extent.zoom.minZoom),layers[i].extent.zoom.maxZoom>maxZoom&&(maxZoom=layers[i].extent.zoom.maxZoom));return formattedExtent.zoom={minZoom:minZoom!==1/0?minZoom:map.getMinZoom(),maxZoom:maxZoom!==-1/0?maxZoom:map.getMaxZoom()},formattedExtent}getWidth(){return+window.getComputedStyle(this.el).width.replace("px","")}getHeight(){return+window.getComputedStyle(this.el).height.replace("px","")}staticChanged(){this._map&&this._toggleStatic()}componentWillLoad(){this._source=this.el.outerHTML,this._history=[],this._historyIndex=-1,this._traversalCall=!1}async connectedCallback(){try{this.el._history=this._history,this.el._historyIndex=this._historyIndex,Object.defineProperty(this.el,"width",{get:()=>+window.getComputedStyle(this.el).width.replace("px",""),set:val=>{this.el.setAttribute("width",val)},enumerable:!0,configurable:!0}),Object.defineProperty(this.el,"height",{get:()=>+window.getComputedStyle(this.el).height.replace("px",""),set:val=>{this.el.setAttribute("height",val)},enumerable:!0,configurable:!0}),await this._ensureControlsLoaded(),await this.whenProjectionDefined(this.projection),this._setLocale(),this._initShadowRoot(),this._controlsList=new CustomDOMTokenList(this.el.getAttribute("controlslist"),this.el,"controlslist",["noreload","nofullscreen","nozoom","nolayer","noscale","geolocation"]);var s=window.getComputedStyle(this.el),wpx=s.width,hpx=s.height,w=this.el.hasAttribute("width")?this.el.getAttribute("width"):parseInt(wpx.replace("px","")),h=this.el.hasAttribute("height")?this.el.getAttribute("height"):parseInt(hpx.replace("px",""));this._changeWidth(w),this._changeHeight(h),this._createMap(),this._isInitialized=!0;const attributeObserver=new MutationObserver(mutations=>{mutations.forEach(mutation=>{if("attributes"===mutation.type&&mutation.attributeName){const newValue=this.el.getAttribute(mutation.attributeName);"width"===mutation.attributeName&&newValue?this._changeWidth(newValue):"height"===mutation.attributeName&&newValue&&this._changeHeight(newValue)}})});attributeObserver.observe(this.el,{attributes:!0,attributeFilter:["width","height"]}),this.el._attributeObserver=attributeObserver,this.el.setAttribute("role","application"),this._toggleStatic();let mapcaption=this.el.querySelector("map-caption");null!==mapcaption&&setTimeout(()=>{this.el.getAttribute("aria-label")===mapcaption.innerHTML&&(this.mapCaptionObserver=new MutationObserver(_m=>{this.el.querySelector("map-caption")!==mapcaption&&this.el.removeAttribute("aria-label")}),this.mapCaptionObserver.observe(this.el,{childList:!0}))},0)}catch(e){throw console.log(e),new Error("Error: "+e)}}_setLocale(){if(this.el.closest(":lang(fr)")===this.el)this.locale=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.e;else if(this.el.closest(":lang(en)")===this.el)this.locale=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.i;else{const mapOptions=document.head.querySelector("map-options");if(mapOptions&&mapOptions.textContent)try{const options=JSON.parse(mapOptions.textContent);if(options.locale)return void(this.locale=options.locale)}catch(e){console.warn("Failed to parse map-options:",e)}this.locale=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.i}}_initShadowRoot(){let shadowRoot=this.el.shadowRoot;if(shadowRoot.querySelector('[aria-label="Interactive map"]'))return;const ensureHostStyle=()=>{if(0===shadowRoot.styleSheets.length)return void requestAnimationFrame(ensureHostStyle);let mapDefaultCSS=document.createElement("style");mapDefaultCSS.innerHTML=":host {all: initial;display: inline-block;background-color: white;height: 150px;width: 300px;contain: layout size;border-width: 2px;border-style: inset;}",shadowRoot.appendChild(mapDefaultCSS)};ensureHostStyle(),this._container=document.createElement("div");this._container.insertAdjacentHTML("beforeend","<output role='status' aria-live='polite' aria-atomic='true' class='mapml-screen-reader-output'></output>"),this._container.setAttribute("role","region"),this._container.setAttribute("aria-label","Interactive map"),shadowRoot.appendChild(this._container),this.el._container=this._container;let hideElementsCSS=document.createElement("style");hideElementsCSS.innerHTML="gcds-map > * { display: none!important; }",this.el.appendChild(hideElementsCSS)}_createMap(){var options;this._map||(this._map=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.map(this._container,{center:new _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.LatLng(this.lat,this.lon),minZoom:0,maxZoom:window.M[this.projection].options.resolutions.length-1,projection:this.projection,query:!0,contextMenu:!0,announceMovement:!0,featureIndex:!0,mapEl:this.el,crs:window.M[this.projection],zoom:this.zoom,zoomControl:!1}),this.el._map=this._map,window._debugMap=this._map,this.el._history=this._history,this.el._historyIndex=this._historyIndex,Object.defineProperty(this.el,"controlsList",{get:()=>this._controlsList,set:value=>{!this._controlsList||"string"!=typeof value&&null!==value||(this._controlsList.value=value||"",this._map&&this._toggleControls())},configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"layers",{get:()=>this.el.getElementsByTagName("map-layer"),configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"locale",{get:()=>this.locale,configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"extent",{get:()=>this.extent,configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"width",{get:()=>this.getWidth(),set:val=>{this.el.setAttribute("width",val),this._isInitialized&&this._changeWidth(val)},configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"height",{get:()=>this.getHeight(),set:val=>{this.el.setAttribute("height",val),this._isInitialized&&this._changeHeight(val)},configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"zoomTo",{value:(lat,lon,zoom)=>this.zoomTo(lat,lon,zoom),writable:!0,configurable:!0}),Object.defineProperty(this.el,"back",{value:()=>this.back(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"forward",{value:()=>this.forward(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"reload",{value:()=>this.reload(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"toggleDebug",{value:()=>this.toggleDebug(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"viewSource",{value:()=>this.viewSource(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"matchMedia",{value:(...args)=>matchMedia.apply(this.el,args),writable:!0,configurable:!0}),Object.defineProperty(this.el,"geojson2mapml",{value:(json,options)=>this.geojson2mapml(json,options),writable:!0,configurable:!0}),Object.defineProperty(this.el,"defineCustomProjection",{value:jsonTemplate=>this.defineCustomProjection(jsonTemplate),writable:!0,configurable:!0}),this.el._toggleFullScreen=()=>this._toggleFullScreen(),this.el._toggleControls=()=>this._toggleControls(),this._addToHistory(),this._createControls(),this._toggleControls(),this._crosshair=new Crosshair(options).addTo(this._map),window.M.options.featureIndexOverlayOption&&(this._featureIndexOverlay=function(options){return new FeatureIndexOverlay(options)}().addTo(this._map)),this._setUpEvents())}disconnectedCallback(){this._removeEvents(),this.el._attributeObserver&&(this.el._attributeObserver.disconnect(),delete this.el._attributeObserver),delete this._map,this._deleteControls()}async _ensureControlsLoaded(){try{await __webpack_require__.e(517).then(__webpack_require__.bind(__webpack_require__,"./dist/esm/AttributionButton-D9016F2_.js")),await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./dist/esm/index-PZrWUcjo.js")).then(function(n){return n.C}),await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./dist/esm/index-PZrWUcjo.js")).then(function(n){return n.A}),await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./dist/esm/index-PZrWUcjo.js")).then(function(n){return n.k}),await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./dist/esm/index-PZrWUcjo.js")).then(function(n){return n.j})}catch(error){console.error("Failed to load MapML controls:",error)}}_createControls(){let mapSize=this._map.getSize().y,totalSize=0;var layers,options;this._layerControl=(layers=null,options={collapsed:!0,mapEl:this.el},new LayerControl(layers,options)).addTo(this._map),this._map.on("movestart",this._layerControl.collapse,this._layerControl),this.el._layerControl=this._layerControl;let scaleValue=window.M.options.announceScale;"metric"===scaleValue&&(scaleValue={metric:!0,imperial:!1}),"imperial"===scaleValue&&(scaleValue={metric:!1,imperial:!0}),this._scaleBar||(this._scaleBar=function(options){return new ScaleBar(options)}(scaleValue).addTo(this._map),this.el._scaleBar=this._scaleBar),!this._zoomControl&&totalSize+93<=mapSize&&(totalSize+=93,this._zoomControl=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.control.zoom({zoomInTitle:this.locale.btnZoomIn,zoomOutTitle:this.locale.btnZoomOut}).addTo(this._map),this.el._zoomControl=this._zoomControl),!this._reloadButton&&totalSize+49<=mapSize&&(totalSize+=49,this._reloadButton=function(options){return new ReloadButton(options)}().addTo(this._map),this.el._reloadButton=this._reloadButton),!this._fullScreenControl&&totalSize+49<=mapSize&&(totalSize+=49,this._fullScreenControl=function(options){return new FullscreenButton(options)}().addTo(this._map),this.el._fullScreenControl=this._fullScreenControl),this._geolocationButton||(this._geolocationButton=function(options){return new GeolocationButton(options)}().addTo(this._map),this.el._geolocationButton=this._geolocationButton),this.el.locate=this.locate.bind(this)}_toggleControls(){!1===this.controls?(this._hideControls(),this._map.contextMenu.toggleContextMenuItem("Controls","disabled")):(this._showControls(),this._map.contextMenu.toggleContextMenuItem("Controls","enabled"))}_hideControls(){this._setControlsVisibility("fullscreen",!0),this._setControlsVisibility("layercontrol",!0),this._setControlsVisibility("reload",!0),this._setControlsVisibility("zoom",!0),this._setControlsVisibility("geolocation",!0),this._setControlsVisibility("scale",!0)}_showControls(){this._setControlsVisibility("fullscreen",!1),this._setControlsVisibility("layercontrol",!1),this._setControlsVisibility("reload",!1),this._setControlsVisibility("zoom",!1),this._setControlsVisibility("geolocation",!0),this._setControlsVisibility("scale",!1),this._controlsList&&this._controlsList.forEach(value=>{switch(value.toLowerCase()){case"nofullscreen":this._setControlsVisibility("fullscreen",!0);break;case"nolayer":this._setControlsVisibility("layercontrol",!0);break;case"noreload":this._setControlsVisibility("reload",!0);break;case"nozoom":this._setControlsVisibility("zoom",!0);break;case"geolocation":this._setControlsVisibility("geolocation",!1);break;case"noscale":this._setControlsVisibility("scale",!0)}}),this._layerControl&&0===this._layerControl._layers.length&&this._layerControl._container.setAttribute("hidden","")}_deleteControls(){delete this._layerControl,delete this._zoomControl,delete this._reloadButton,delete this._fullScreenControl,delete this._geolocationButton,delete this._scaleBar}_setControlsVisibility(control,hide){let container;switch(control){case"zoom":this._zoomControl&&(container=this._zoomControl._container);break;case"reload":this._reloadButton&&(container=this._reloadButton._container);break;case"fullscreen":this._fullScreenControl&&(container=this._fullScreenControl._container);break;case"layercontrol":this._layerControl&&(container=this._layerControl._container);break;case"geolocation":this._geolocationButton&&(container=this._geolocationButton._container);break;case"scale":this._scaleBar&&(container=this._scaleBar._container)}container&&(hide?([...container.children].forEach(childEl=>{childEl.setAttribute("hidden","")}),container.setAttribute("hidden","")):([...container.children].forEach(childEl=>{childEl.removeAttribute("hidden")}),container.removeAttribute("hidden")))}_toggleStatic(){this._map&&(this.static?(this._map.dragging.disable(),this._map.touchZoom.disable(),this._map.doubleClickZoom.disable(),this._map.scrollWheelZoom.disable(),this._map.boxZoom.disable(),this._map.keyboard.disable(),this._zoomControl.disable()):(this._map.dragging.enable(),this._map.touchZoom.enable(),this._map.doubleClickZoom.enable(),this._map.scrollWheelZoom.enable(),this._map.boxZoom.enable(),this._map.keyboard.enable(),this._zoomControl.enable()))}_removeEvents(){this._map&&this._map.off(),this._boundDropHandler&&this.el.removeEventListener("drop",this._boundDropHandler,!1),this._boundDragoverHandler&&this.el.removeEventListener("dragover",this._boundDragoverHandler,!1)}_setUpEvents(){this._boundDropHandler=this._dropHandler.bind(this),this._boundDragoverHandler=this._dragoverHandler.bind(this),this.el.addEventListener("drop",this._boundDropHandler,!1),this.el.addEventListener("dragover",this._boundDragoverHandler,!1),this._map.on("moveend",function(){this._updateMapCenter(),this._addToHistory(),this.el.dispatchEvent(new CustomEvent("map-moveend",{detail:{target:this}}))},this),this._map.on("zoom",function(){this.el.dispatchEvent(new CustomEvent("map-zoom",{detail:{target:this}}))},this),this._map.on("zoomend",function(){this._updateMapCenter(),this.el.dispatchEvent(new CustomEvent("zoomend",{detail:{target:this}}))},this),this._map.on("locationfound",function(e){this.el.dispatchEvent(new CustomEvent("maplocationfound",{detail:{latlng:e.latlng,accuracy:e.accuracy}}))},this),this._map.on("locationerror",function(e){this.el.dispatchEvent(new CustomEvent("maplocationerror",{detail:{message:e.message,code:e.code}}))},this);const setMapMinAndMaxZoom=(e=>{this.whenLayersReady().then(()=>{e&&e.layer._layerEl&&(this._map.setMaxZoom(this.extent.zoom.maxZoom),this._map.setMinZoom(this.extent.zoom.minZoom))})}).bind(this);this.whenLayersReady().then(()=>{this._map.setMaxZoom(this.extent.zoom.maxZoom),this._map.setMinZoom(this.extent.zoom.minZoom),this._map.on("layeradd layerremove",setMapMinAndMaxZoom,this)}),this.el.addEventListener("keydown",e=>{86===e.keyCode&&e.ctrlKey?navigator.clipboard.readText().then(layer=>{_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U._pasteLayer(this.el,layer)}):32===e.keyCode&&"INPUT"!==this.el.shadowRoot.activeElement?.nodeName&&(e.preventDefault(),this._map.fire("keypress",{originalEvent:e}))})}_dropHandler(event){event.preventDefault();let text=event.dataTransfer.getData("text");_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U._pasteLayer(this.el,text)}_dragoverHandler(event){event.preventDefault(),event.dataTransfer.dropEffect="copy"}toggleDebug(){this._debug?(this._debug.remove(),this._debug=void 0):this._debug=(new DebugOverlay).addTo(this._map)}locate(options){this._geolocationButton&&this._geolocationButton.stop(),options?(options.zoomTo&&(options.setView=options.zoomTo,delete options.zoomTo),this._map.locate(options)):this._map.locate({setView:!0,maxZoom:16})}_changeWidth(width){if(this._container){this._container.style.width=width+"px";const sheets=this.el.shadowRoot.styleSheets;sheets.length>0&&(sheets[sheets.length-1].cssRules[0].style.width=width+"px")}this._map&&this._map.invalidateSize(!1)}_changeHeight(height){if(this._container){this._container.style.height=height+"px";const sheets=this.el.shadowRoot.styleSheets;sheets.length>0&&(sheets[sheets.length-1].cssRules[0].style.height=height+"px")}this._map&&this._map.invalidateSize(!1)}_updateMapCenter(){if(this._map){const center=this._map.getCenter();this.lat=center.lat,this.lon=center.lng,this.zoom=this._map.getZoom(),this.el.setAttribute("lat",this.lat.toString()),this.el.setAttribute("lon",this.lon.toString()),this.el.setAttribute("zoom",this.zoom.toString())}}_resetHistory(){this._history=[],this._historyIndex=-1,this._traversalCall=!1,this._addToHistory()}_addToHistory(){if(this._traversalCall&&this._traversalCall>0)return void this._traversalCall--;let mapLocation=this._map.getPixelBounds().getCenter(),location={zoom:this._map.getZoom(),x:mapLocation.x,y:mapLocation.y};this._historyIndex++,this._history.splice(this._historyIndex,0,location),this._historyIndex+1!==this._history.length&&(this._history.length=this._historyIndex+1),this._updateNavigationControls(),this.el._history=this._history,this.el._historyIndex=this._historyIndex}_updateNavigationControls(){const canGoBack=this._historyIndex>0,canGoForward=this._historyIndex<this._history.length-1,canReload=this._historyIndex>0;this._map.contextMenu.toggleContextMenuItem("Back",canGoBack?"enabled":"disabled"),this._map.contextMenu.toggleContextMenuItem("Forward",canGoForward?"enabled":"disabled"),this._map.contextMenu.toggleContextMenuItem("Reload",canReload?"enabled":"disabled"),canReload?this._reloadButton?.enable():this._reloadButton?.disable()}back(){if(this._historyIndex<=0)return;let curr=this._history[this._historyIndex];this._historyIndex--;let prev=this._history[this._historyIndex];if(prev.zoom!==curr.zoom){this._traversalCall=2;let scale=this._map.options.crs.scale(curr.zoom)/this._map.options.crs.scale(prev.zoom);this._map.panBy([prev.x*scale-curr.x,prev.y*scale-curr.y],{animate:!1}),this._map.setZoom(prev.zoom)}else this._traversalCall=1,this._map.panBy([prev.x-curr.x,prev.y-curr.y]);this._updateNavigationControls(),this.el._historyIndex=this._historyIndex}forward(){let history=this._history,curr=history[this._historyIndex];if(this._historyIndex<history.length-1){this._map.contextMenu.toggleContextMenuItem("Back","enabled"),this._historyIndex++;let next=history[this._historyIndex];if(this._historyIndex===history.length-1&&this._map.contextMenu.toggleContextMenuItem("Forward","disabled"),next.zoom!==curr.zoom){this._traversalCall=2;let scale=this._map.options.crs.scale(curr.zoom)/this._map.options.crs.scale(next.zoom);this._map.panBy([next.x*scale-curr.x,next.y*scale-curr.y],{animate:!1}),this._map.setZoom(next.zoom)}else this._traversalCall=1,this._map.panBy([next.x-curr.x,next.y-curr.y]);this._updateNavigationControls(),this.el._historyIndex=this._historyIndex}}reload(){if(0===this._history.length)return;let initialLocation=this._history[0],curr={zoom:this._map.getZoom(),x:this._map.getPixelBounds().getCenter().x,y:this._map.getPixelBounds().getCenter().y};if(this._history=[initialLocation],this._historyIndex=0,initialLocation.zoom!==curr.zoom){this._traversalCall=2;let scale=this._map.options.crs.scale(curr.zoom)/this._map.options.crs.scale(initialLocation.zoom);this._map.panBy([initialLocation.x*scale-curr.x,initialLocation.y*scale-curr.y],{animate:!1}),this._map.setZoom(initialLocation.zoom)}else this._traversalCall=1,this._map.panBy([initialLocation.x-curr.x,initialLocation.y-curr.y]);this._updateNavigationControls(),this.el._history=this._history,this.el._historyIndex=this._historyIndex,this._map.getContainer().focus()}_toggleFullScreen(){this._map.toggleFullscreen()}viewSource(){let blob=new Blob([this._source],{type:"text/plain"}),url=URL.createObjectURL(blob);window.open(url),URL.revokeObjectURL(url)}zoomTo(lat,lon,zoom){if(!this._map)return void console.warn("Map is not initialized. Cannot zoom to location.");const targetZoom=void 0!==zoom&&Number.isInteger(+zoom)?+zoom:this.zoom,location=new _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.LatLng(+lat,+lon);this._map.setView(location,targetZoom)}async whenProjectionDefined(projection){return new Promise((resolve,reject)=>{window.M[projection]?resolve(window.M[projection]):reject(new Error("Projection "+projection+" is not defined"))})}defineCustomProjection(jsonTemplate){if(window.M&&window.M.defineCustomProjection){window.M.defineCustomProjection(jsonTemplate);return JSON.parse(jsonTemplate).projection}throw new Error("MapML API not loaded")}async whenReady(){return new Promise((resolve,reject)=>{let interval,failureTimer;if(this.el._map)resolve();else{let viewer=this.el;interval=setInterval(function testForMap(viewer){viewer._map&&(clearInterval(interval),clearTimeout(failureTimer),resolve())},200,viewer),failureTimer=setTimeout(function mapNotDefined(){clearInterval(interval),clearTimeout(failureTimer),reject("Timeout reached waiting for map to be ready")},5e3)}})}async whenLayersReady(){let layersReady=[];const layers=this.el.querySelectorAll("map-layer");for(let i=0;i<layers.length;i++){const layer=layers[i];layer.whenReady&&layersReady.push(layer.whenReady())}return Promise.allSettled(layersReady)}geojson2mapml(json,options={}){void 0===options.projection&&(options.projection=this.projection);let geojsonLayer=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.geojson2mapml(json,options);return this.el.appendChild(geojsonLayer),geojsonLayer}render(){return null}static get watchers(){return{controls:["controlsChanged"],_controlslist:["controlsListChanged"],projection:["projectionChanged"],static:["staticChanged"]}}};GcdsMap.style="/*\n * GCDS Map Component CSS\n * \n * This file composes the complete map styling by importing:\n * 1. Leaflet core CSS (essential for map layout)\n * 2. Leaflet.locatecontrol CSS (geolocation control)\n * 3. Original MapML CSS (MapML-specific features)\n * 4. GCDS-specific overrides (design system integration)\n * \n * This mirrors the original mapml.js Gruntfile.js CSS composition.\n */\n\n/* Import Leaflet core CSS - ESSENTIAL for proper map display */\n/* required styles */\r\n\r\n.leaflet-pane,\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow,\r\n.leaflet-tile-container,\r\n.leaflet-pane > svg,\r\n.leaflet-pane > canvas,\r\n.leaflet-zoom-box,\r\n.leaflet-image-layer,\r\n.leaflet-layer {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\t}\r\n.leaflet-container {\r\n\toverflow: hidden;\r\n\t}\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\t-webkit-user-select: none;\r\n\t   -moz-user-select: none;\r\n\t        user-select: none;\r\n\t  -webkit-user-drag: none;\r\n\t}\r\n/* Prevents IE11 from highlighting tiles in blue */\r\n.leaflet-tile::selection {\r\n\tbackground: transparent;\r\n}\r\n/* Safari renders non-retina tile on retina better with this, but Chrome is worse */\r\n.leaflet-safari .leaflet-tile {\r\n\timage-rendering: -webkit-optimize-contrast;\r\n\t}\r\n/* hack that prevents hw layers \"stretching\" when loading new tiles */\r\n.leaflet-safari .leaflet-tile-container {\r\n\twidth: 1600px;\r\n\theight: 1600px;\r\n\t-webkit-transform-origin: 0 0;\r\n\t}\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\tdisplay: block;\r\n\t}\r\n/* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */\r\n/* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */\r\n.leaflet-container .leaflet-overlay-pane svg {\r\n\tmax-width: none !important;\r\n\tmax-height: none !important;\r\n\t}\r\n.leaflet-container .leaflet-marker-pane img,\r\n.leaflet-container .leaflet-shadow-pane img,\r\n.leaflet-container .leaflet-tile-pane img,\r\n.leaflet-container img.leaflet-image-layer,\r\n.leaflet-container .leaflet-tile {\r\n\tmax-width: none !important;\r\n\tmax-height: none !important;\r\n\twidth: auto;\r\n\tpadding: 0;\r\n\t}\r\n\r\n.leaflet-container img.leaflet-tile {\r\n\t/* See: https://bugs.chromium.org/p/chromium/issues/detail?id=600120 */\r\n\tmix-blend-mode: plus-lighter;\r\n}\r\n\r\n.leaflet-container.leaflet-touch-zoom {\r\n\t-ms-touch-action: pan-x pan-y;\r\n\ttouch-action: pan-x pan-y;\r\n\t}\r\n.leaflet-container.leaflet-touch-drag {\r\n\t-ms-touch-action: pinch-zoom;\r\n\t/* Fallback for FF which doesn't support pinch-zoom */\r\n\ttouch-action: none;\r\n\ttouch-action: pinch-zoom;\r\n}\r\n.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {\r\n\t-ms-touch-action: none;\r\n\ttouch-action: none;\r\n}\r\n.leaflet-container {\r\n\t-webkit-tap-highlight-color: transparent;\r\n}\r\n.leaflet-container a {\r\n\t-webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);\r\n}\r\n.leaflet-tile {\r\n\tfilter: inherit;\r\n\tvisibility: hidden;\r\n\t}\r\n.leaflet-tile-loaded {\r\n\tvisibility: inherit;\r\n\t}\r\n.leaflet-zoom-box {\r\n\twidth: 0;\r\n\theight: 0;\r\n\t-moz-box-sizing: border-box;\r\n\t     box-sizing: border-box;\r\n\tz-index: 800;\r\n\t}\r\n/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */\r\n.leaflet-overlay-pane svg {\r\n\t-moz-user-select: none;\r\n\t}\r\n\r\n.leaflet-pane         { z-index: 400; }\r\n\r\n.leaflet-tile-pane    { z-index: 200; }\r\n.leaflet-overlay-pane { z-index: 400; }\r\n.leaflet-shadow-pane  { z-index: 500; }\r\n.leaflet-marker-pane  { z-index: 600; }\r\n.leaflet-tooltip-pane   { z-index: 650; }\r\n.leaflet-popup-pane   { z-index: 700; }\r\n\r\n.leaflet-map-pane canvas { z-index: 100; }\r\n.leaflet-map-pane svg    { z-index: 200; }\r\n\r\n.leaflet-vml-shape {\r\n\twidth: 1px;\r\n\theight: 1px;\r\n\t}\r\n.lvml {\r\n\tbehavior: url(#default#VML);\r\n\tdisplay: inline-block;\r\n\tposition: absolute;\r\n\t}\r\n\r\n\r\n/* control positioning */\r\n\r\n.leaflet-control {\r\n\tposition: relative;\r\n\tz-index: 800;\r\n\tpointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r\n\tpointer-events: auto;\r\n\t}\r\n.leaflet-top,\r\n.leaflet-bottom {\r\n\tposition: absolute;\r\n\tz-index: 1000;\r\n\tpointer-events: none;\r\n\t}\r\n.leaflet-top {\r\n\ttop: 0;\r\n\t}\r\n.leaflet-right {\r\n\tright: 0;\r\n\t}\r\n.leaflet-bottom {\r\n\tbottom: 0;\r\n\t}\r\n.leaflet-left {\r\n\tleft: 0;\r\n\t}\r\n.leaflet-control {\r\n\tfloat: left;\r\n\tclear: both;\r\n\t}\r\n.leaflet-right .leaflet-control {\r\n\tfloat: right;\r\n\t}\r\n.leaflet-top .leaflet-control {\r\n\tmargin-top: 10px;\r\n\t}\r\n.leaflet-bottom .leaflet-control {\r\n\tmargin-bottom: 10px;\r\n\t}\r\n.leaflet-left .leaflet-control {\r\n\tmargin-left: 10px;\r\n\t}\r\n.leaflet-right .leaflet-control {\r\n\tmargin-right: 10px;\r\n\t}\r\n\r\n\r\n/* zoom and fade animations */\r\n\r\n.leaflet-fade-anim .leaflet-popup {\r\n\topacity: 0;\r\n\t-webkit-transition: opacity 0.2s linear;\r\n\t   -moz-transition: opacity 0.2s linear;\r\n\t        transition: opacity 0.2s linear;\r\n\t}\r\n.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\r\n\topacity: 1;\r\n\t}\r\n.leaflet-zoom-animated {\r\n\t-webkit-transform-origin: 0 0;\r\n\t    -ms-transform-origin: 0 0;\r\n\t        transform-origin: 0 0;\r\n\t}\r\nsvg.leaflet-zoom-animated {\r\n\twill-change: transform;\r\n}\r\n\r\n.leaflet-zoom-anim .leaflet-zoom-animated {\r\n\t-webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t   -moz-transition:    -moz-transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t        transition:         transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t}\r\n.leaflet-zoom-anim .leaflet-tile,\r\n.leaflet-pan-anim .leaflet-tile {\r\n\t-webkit-transition: none;\r\n\t   -moz-transition: none;\r\n\t        transition: none;\r\n\t}\r\n\r\n.leaflet-zoom-anim .leaflet-zoom-hide {\r\n\tvisibility: hidden;\r\n\t}\r\n\r\n\r\n/* cursors */\r\n\r\n.leaflet-interactive {\r\n\tcursor: pointer;\r\n\t}\r\n.leaflet-grab {\r\n\tcursor: -webkit-grab;\r\n\tcursor:    -moz-grab;\r\n\tcursor:         grab;\r\n\t}\r\n.leaflet-crosshair,\r\n.leaflet-crosshair .leaflet-interactive {\r\n\tcursor: crosshair;\r\n\t}\r\n.leaflet-popup-pane,\r\n.leaflet-control {\r\n\tcursor: auto;\r\n\t}\r\n.leaflet-dragging .leaflet-grab,\r\n.leaflet-dragging .leaflet-grab .leaflet-interactive,\r\n.leaflet-dragging .leaflet-marker-draggable {\r\n\tcursor: move;\r\n\tcursor: -webkit-grabbing;\r\n\tcursor:    -moz-grabbing;\r\n\tcursor:         grabbing;\r\n\t}\r\n\r\n/* marker & overlays interactivity */\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow,\r\n.leaflet-image-layer,\r\n.leaflet-pane > svg path,\r\n.leaflet-tile-container {\r\n\tpointer-events: none;\r\n\t}\r\n\r\n.leaflet-marker-icon.leaflet-interactive,\r\n.leaflet-image-layer.leaflet-interactive,\r\n.leaflet-pane > svg path.leaflet-interactive,\r\nsvg.leaflet-image-layer.leaflet-interactive path {\r\n\tpointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r\n\tpointer-events: auto;\r\n\t}\r\n\r\n/* visual tweaks */\r\n\r\n.leaflet-container {\r\n\tbackground: #ddd;\r\n\toutline-offset: 1px;\r\n\t}\r\n.leaflet-container a {\r\n\tcolor: #0078A8;\r\n\t}\r\n.leaflet-zoom-box {\r\n\tborder: 2px dotted #38f;\r\n\tbackground: rgba(255,255,255,0.5);\r\n\t}\r\n\r\n\r\n/* general typography */\r\n.leaflet-container {\r\n\tfont-family: \"Helvetica Neue\", Arial, Helvetica, sans-serif;\r\n\tfont-size: 12px;\r\n\tfont-size: 0.75rem;\r\n\tline-height: 1.5;\r\n\t}\r\n\r\n\r\n/* general toolbar styles */\r\n\r\n.leaflet-bar {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.65);\r\n\tborder-radius: 4px;\r\n\t}\r\n.leaflet-bar a {\r\n\tbackground-color: #fff;\r\n\tborder-bottom: 1px solid #ccc;\r\n\twidth: 26px;\r\n\theight: 26px;\r\n\tline-height: 26px;\r\n\tdisplay: block;\r\n\ttext-align: center;\r\n\ttext-decoration: none;\r\n\tcolor: black;\r\n\t}\r\n.leaflet-bar a,\r\n.leaflet-control-layers-toggle {\r\n\tbackground-position: 50% 50%;\r\n\tbackground-repeat: no-repeat;\r\n\tdisplay: block;\r\n\t}\r\n.leaflet-bar a:hover,\r\n.leaflet-bar a:focus {\r\n\tbackground-color: #f4f4f4;\r\n\t}\r\n.leaflet-bar a:first-child {\r\n\tborder-top-left-radius: 4px;\r\n\tborder-top-right-radius: 4px;\r\n\t}\r\n.leaflet-bar a:last-child {\r\n\tborder-bottom-left-radius: 4px;\r\n\tborder-bottom-right-radius: 4px;\r\n\tborder-bottom: none;\r\n\t}\r\n.leaflet-bar a.leaflet-disabled {\r\n\tcursor: default;\r\n\tbackground-color: #f4f4f4;\r\n\tcolor: #bbb;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-bar a {\r\n\twidth: 30px;\r\n\theight: 30px;\r\n\tline-height: 30px;\r\n\t}\r\n.leaflet-touch .leaflet-bar a:first-child {\r\n\tborder-top-left-radius: 2px;\r\n\tborder-top-right-radius: 2px;\r\n\t}\r\n.leaflet-touch .leaflet-bar a:last-child {\r\n\tborder-bottom-left-radius: 2px;\r\n\tborder-bottom-right-radius: 2px;\r\n\t}\r\n\r\n/* zoom control */\r\n\r\n.leaflet-control-zoom-in,\r\n.leaflet-control-zoom-out {\r\n\tfont: bold 18px 'Lucida Console', Monaco, monospace;\r\n\ttext-indent: 1px;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {\r\n\tfont-size: 22px;\r\n\t}\r\n\r\n\r\n/* layers control */\r\n\r\n.leaflet-control-layers {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.4);\r\n\tbackground: #fff;\r\n\tborder-radius: 5px;\r\n\t}\r\n.leaflet-control-layers-toggle {\r\n\tbackground-image: url(images/layers.png);\r\n\twidth: 36px;\r\n\theight: 36px;\r\n\t}\r\n.leaflet-retina .leaflet-control-layers-toggle {\r\n\tbackground-image: url(images/layers-2x.png);\r\n\tbackground-size: 26px 26px;\r\n\t}\r\n.leaflet-touch .leaflet-control-layers-toggle {\r\n\twidth: 44px;\r\n\theight: 44px;\r\n\t}\r\n.leaflet-control-layers .leaflet-control-layers-list,\r\n.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\r\n\tdisplay: none;\r\n\t}\r\n.leaflet-control-layers-expanded .leaflet-control-layers-list {\r\n\tdisplay: block;\r\n\tposition: relative;\r\n\t}\r\n.leaflet-control-layers-expanded {\r\n\tpadding: 6px 10px 6px 6px;\r\n\tcolor: #333;\r\n\tbackground: #fff;\r\n\t}\r\n.leaflet-control-layers-scrollbar {\r\n\toverflow-y: scroll;\r\n\toverflow-x: hidden;\r\n\tpadding-right: 5px;\r\n\t}\r\n.leaflet-control-layers-selector {\r\n\tmargin-top: 2px;\r\n\tposition: relative;\r\n\ttop: 1px;\r\n\t}\r\n.leaflet-control-layers label {\r\n\tdisplay: block;\r\n\tfont-size: 13px;\r\n\tfont-size: 1.08333em;\r\n\t}\r\n.leaflet-control-layers-separator {\r\n\theight: 0;\r\n\tborder-top: 1px solid #ddd;\r\n\tmargin: 5px -10px 5px -6px;\r\n\t}\r\n\r\n/* Default icon URLs */\r\n.leaflet-default-icon-path { /* used only in path-guessing heuristic, see L.Icon.Default */\r\n\tbackground-image: url(images/marker-icon.png);\r\n\t}\r\n\r\n\r\n/* attribution and scale controls */\r\n\r\n.leaflet-container .leaflet-control-attribution {\r\n\tbackground: #fff;\r\n\tbackground: rgba(255, 255, 255, 0.8);\r\n\tmargin: 0;\r\n\t}\r\n.leaflet-control-attribution,\r\n.leaflet-control-scale-line {\r\n\tpadding: 0 5px;\r\n\tcolor: #333;\r\n\tline-height: 1.4;\r\n\t}\r\n.leaflet-control-attribution a {\r\n\ttext-decoration: none;\r\n\t}\r\n.leaflet-control-attribution a:hover,\r\n.leaflet-control-attribution a:focus {\r\n\ttext-decoration: underline;\r\n\t}\r\n.leaflet-attribution-flag {\r\n\tdisplay: inline !important;\r\n\tvertical-align: baseline !important;\r\n\twidth: 1em;\r\n\theight: 0.6669em;\r\n\t}\r\n.leaflet-left .leaflet-control-scale {\r\n\tmargin-left: 5px;\r\n\t}\r\n.leaflet-bottom .leaflet-control-scale {\r\n\tmargin-bottom: 5px;\r\n\t}\r\n.leaflet-control-scale-line {\r\n\tborder: 2px solid #777;\r\n\tborder-top: none;\r\n\tline-height: 1.1;\r\n\tpadding: 2px 5px 1px;\r\n\twhite-space: nowrap;\r\n\t-moz-box-sizing: border-box;\r\n\t     box-sizing: border-box;\r\n\tbackground: rgba(255, 255, 255, 0.8);\r\n\ttext-shadow: 1px 1px #fff;\r\n\t}\r\n.leaflet-control-scale-line:not(:first-child) {\r\n\tborder-top: 2px solid #777;\r\n\tborder-bottom: none;\r\n\tmargin-top: -2px;\r\n\t}\r\n.leaflet-control-scale-line:not(:first-child):not(:last-child) {\r\n\tborder-bottom: 2px solid #777;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-attribution,\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tbox-shadow: none;\r\n\t}\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tborder: 2px solid rgba(0,0,0,0.2);\r\n\tbackground-clip: padding-box;\r\n\t}\r\n\r\n\r\n/* popup */\r\n\r\n.leaflet-popup {\r\n\tposition: absolute;\r\n\ttext-align: center;\r\n\tmargin-bottom: 20px;\r\n\t}\r\n.leaflet-popup-content-wrapper {\r\n\tpadding: 1px;\r\n\ttext-align: left;\r\n\tborder-radius: 12px;\r\n\t}\r\n.leaflet-popup-content {\r\n\tmargin: 13px 24px 13px 20px;\r\n\tline-height: 1.3;\r\n\tfont-size: 13px;\r\n\tfont-size: 1.08333em;\r\n\tmin-height: 1px;\r\n\t}\r\n.leaflet-popup-content p {\r\n\tmargin: 17px 0;\r\n\tmargin: 1.3em 0;\r\n\t}\r\n.leaflet-popup-tip-container {\r\n\twidth: 40px;\r\n\theight: 20px;\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\tmargin-top: -1px;\r\n\tmargin-left: -20px;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\t}\r\n.leaflet-popup-tip {\r\n\twidth: 17px;\r\n\theight: 17px;\r\n\tpadding: 1px;\r\n\r\n\tmargin: -10px auto 0;\r\n\tpointer-events: auto;\r\n\r\n\t-webkit-transform: rotate(45deg);\r\n\t   -moz-transform: rotate(45deg);\r\n\t    -ms-transform: rotate(45deg);\r\n\t        transform: rotate(45deg);\r\n\t}\r\n.leaflet-popup-content-wrapper,\r\n.leaflet-popup-tip {\r\n\tbackground: white;\r\n\tcolor: #333;\r\n\tbox-shadow: 0 3px 14px rgba(0,0,0,0.4);\r\n\t}\r\n.leaflet-container a.leaflet-popup-close-button {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tborder: none;\r\n\ttext-align: center;\r\n\twidth: 24px;\r\n\theight: 24px;\r\n\tfont: 16px/24px Tahoma, Verdana, sans-serif;\r\n\tcolor: #757575;\r\n\ttext-decoration: none;\r\n\tbackground: transparent;\r\n\t}\r\n.leaflet-container a.leaflet-popup-close-button:hover,\r\n.leaflet-container a.leaflet-popup-close-button:focus {\r\n\tcolor: #585858;\r\n\t}\r\n.leaflet-popup-scrolled {\r\n\toverflow: auto;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-popup-content-wrapper {\r\n\t-ms-zoom: 1;\r\n\t}\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\twidth: 24px;\r\n\tmargin: 0 auto;\r\n\r\n\t-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)\";\r\n\tfilter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-control-zoom,\r\n.leaflet-oldie .leaflet-control-layers,\r\n.leaflet-oldie .leaflet-popup-content-wrapper,\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\tborder: 1px solid #999;\r\n\t}\r\n\r\n\r\n/* div icon */\r\n\r\n.leaflet-div-icon {\r\n\tbackground: #fff;\r\n\tborder: 1px solid #666;\r\n\t}\r\n\r\n\r\n/* Tooltip */\r\n/* Base styles for the element that has a tooltip */\r\n.leaflet-tooltip {\r\n\tposition: absolute;\r\n\tpadding: 6px;\r\n\tbackground-color: #fff;\r\n\tborder: 1px solid #fff;\r\n\tborder-radius: 3px;\r\n\tcolor: #222;\r\n\twhite-space: nowrap;\r\n\t-webkit-user-select: none;\r\n\t-moz-user-select: none;\r\n\t-ms-user-select: none;\r\n\tuser-select: none;\r\n\tpointer-events: none;\r\n\tbox-shadow: 0 1px 3px rgba(0,0,0,0.4);\r\n\t}\r\n.leaflet-tooltip.leaflet-interactive {\r\n\tcursor: pointer;\r\n\tpointer-events: auto;\r\n\t}\r\n.leaflet-tooltip-top:before,\r\n.leaflet-tooltip-bottom:before,\r\n.leaflet-tooltip-left:before,\r\n.leaflet-tooltip-right:before {\r\n\tposition: absolute;\r\n\tpointer-events: none;\r\n\tborder: 6px solid transparent;\r\n\tbackground: transparent;\r\n\tcontent: \"\";\r\n\t}\r\n\r\n/* Directions */\r\n\r\n.leaflet-tooltip-bottom {\r\n\tmargin-top: 6px;\r\n}\r\n.leaflet-tooltip-top {\r\n\tmargin-top: -6px;\r\n}\r\n.leaflet-tooltip-bottom:before,\r\n.leaflet-tooltip-top:before {\r\n\tleft: 50%;\r\n\tmargin-left: -6px;\r\n\t}\r\n.leaflet-tooltip-top:before {\r\n\tbottom: 0;\r\n\tmargin-bottom: -12px;\r\n\tborder-top-color: #fff;\r\n\t}\r\n.leaflet-tooltip-bottom:before {\r\n\ttop: 0;\r\n\tmargin-top: -12px;\r\n\tmargin-left: -6px;\r\n\tborder-bottom-color: #fff;\r\n\t}\r\n.leaflet-tooltip-left {\r\n\tmargin-left: -6px;\r\n}\r\n.leaflet-tooltip-right {\r\n\tmargin-left: 6px;\r\n}\r\n.leaflet-tooltip-left:before,\r\n.leaflet-tooltip-right:before {\r\n\ttop: 50%;\r\n\tmargin-top: -6px;\r\n\t}\r\n.leaflet-tooltip-left:before {\r\n\tright: 0;\r\n\tmargin-right: -12px;\r\n\tborder-left-color: #fff;\r\n\t}\r\n.leaflet-tooltip-right:before {\r\n\tleft: 0;\r\n\tmargin-left: -12px;\r\n\tborder-right-color: #fff;\r\n\t}\r\n\r\n/* Printing */\r\n\r\n@media print {\r\n\t/* Prevent printers from removing background-images of controls. */\r\n\t.leaflet-control {\r\n\t\t-webkit-print-color-adjust: exact;\r\n\t\tprint-color-adjust: exact;\r\n\t\t}\r\n\t}\r\n\n\n/* Import Leaflet locate control CSS */\n.leaflet-control-locate a {\n  cursor: pointer;\n}\n.leaflet-control-locate a .leaflet-control-locate-location-arrow {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  margin: 7px;\n  background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"black\" d=\"M445 4 29 195c-48 23-32 93 19 93h176v176c0 51 70 67 93 19L508 67c16-38-25-79-63-63z\"/></svg>');\n}\n.leaflet-control-locate a .leaflet-control-locate-spinner {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  margin: 7px;\n  background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"black\" d=\"M304 48a48 48 0 1 1-96 0 48 48 0 0 1 96 0zm-48 368a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm208-208a48 48 0 1 0 0 96 48 48 0 0 0 0-96zM96 256a48 48 0 1 0-96 0 48 48 0 0 0 96 0zm13 99a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm294 0a48 48 0 1 0 0 96 48 48 0 0 0 0-96zM109 61a48 48 0 1 0 0 96 48 48 0 0 0 0-96z\"/></svg>');\n  animation: leaflet-control-locate-spin 2s linear infinite;\n}\n.leaflet-control-locate.active a .leaflet-control-locate-location-arrow {\n  background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"rgb(32, 116, 182)\" d=\"M445 4 29 195c-48 23-32 93 19 93h176v176c0 51 70 67 93 19L508 67c16-38-25-79-63-63z\"/></svg>');\n}\n.leaflet-control-locate.following a .leaflet-control-locate-location-arrow {\n  background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"rgb(252, 132, 40)\" d=\"M445 4 29 195c-48 23-32 93 19 93h176v176c0 51 70 67 93 19L508 67c16-38-25-79-63-63z\"/></svg>');\n}\n\n.leaflet-touch .leaflet-bar .leaflet-locate-text-active {\n  width: 100%;\n  max-width: 200px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  padding: 0 10px;\n}\n.leaflet-touch .leaflet-bar .leaflet-locate-text-active .leaflet-locate-icon {\n  padding: 0 5px 0 0;\n}\n\n.leaflet-control-locate-location circle {\n  animation: leaflet-control-locate-throb 4s ease infinite;\n}\n\n@keyframes leaflet-control-locate-throb {\n  0% {\n    stroke-width: 1;\n  }\n  50% {\n    stroke-width: 3;\n    transform: scale(0.8, 0.8);\n  }\n  100% {\n    stroke-width: 1;\n  }\n}\n@keyframes leaflet-control-locate-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n/*# sourceMappingURL=L.Control.Locate.css.map */\n\n\n/* copy of original mapml.css from MapML.js submodule */\n\n.leaflet-container {\n  /* Override the `background-color` set by leaflet.css, enables inheritance from\n     the map or <body> element (same as iframes) to give the author more control. */\n  background-color: transparent;\n  max-height: 100%;\n  max-width: 100%;\n  min-height: 100%;\n  min-width: 100%;\n  width: 100% !important;\n  height: 100% !important;\n}\n\n/* this is required by tiles which are actually divs with multiple images in them */\n.leaflet-tile img {\n        position: absolute;\n        left: 0;\n        top: 0;\n\t}\n/* MapML treats images like map layers, so far as fade animation is concerned */\n.leaflet-fade-anim .leaflet-image-layer {\n        will-change: opacity;\n\t}\n        \n.leaflet-image-layer {\n        visibility: hidden;\n}\n.leaflet-image-loaded {\n        visibility: inherit;\n}\n\n/* Use legible font-sizes (Leaflet upstream PR: https://github.com/Leaflet/Leaflet/pull/7346). */\n.leaflet-control-scale-line,\n.leaflet-container .leaflet-control-scale,\n.leaflet-container .leaflet-control-attribution {\n  font-size: 12px;\n}\n\n/*\n * Controls.\n */\n.leaflet-container {\n    container: leafletmap / size;\n} \n/* Scale bar */\n .mapml-control-scale {\n  bottom: 8px; /* Make room for map-a links */\n  left: 0px; \n}\n@container leafletmap (max-height: 250px) {\n    .mapml-control-scale {\n        left: 45px; \n    }\n}\n\n/* for extents that don't overlap the viewport, the  extent and it's layer\ncontrol fieldset become disabled.  The descendant fieldsets also become \ndisabled (but they / their descendant content are not explicitly italicized by \nthe browser)' */\n.leaflet-control-layers-overlays fieldset:disabled span.mapml-layer-item-name {\n    font-style: italic;\n}\n\n /* Generic class for seamless buttons */\n .mapml-button {\n  background-color: transparent;\n  border: none;\n  border-radius: 0;\n  color: inherit;\n  font: inherit;\n  line-height: inherit;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  text-align: inherit;\n  text-transform: none;\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n}\n\n/* Remove opinionated link colors set by Leaflet. */\n.leaflet-container a {\n  color: revert;\n}\n/* Don't use UA styles for links that are controls\n  (and don't inherit color from map into the reload button for consistency). */\n.mapml-reload-button,\n.leaflet-control-container a,\n.leaflet-container a.leaflet-popup-close-button,\n.leaflet-container a.leaflet-popup-close-button:hover {\n  color: #000;\n}\n/* Revert above `color: #000` for legendlinks. */\n.mapml-layer-item-name a {\n  color: revert;\n}\n\n .leaflet-top .leaflet-control {\n   margin-top: 5px;\n }\n \n .leaflet-left .leaflet-control {\n   margin-left: 5px;\n }\n\n.leaflet-bar a,\n.mapml-reload-button {\n  background-color: #fff;\n  box-sizing: border-box;\n  width: 44px !important;\n  height: 44px !important;\n  line-height: 44px !important;\n  font-size: 34px !important;\n  font-weight: normal;\n  text-align: center;\n}\n\n.mapml-reload-button:hover,\n.mapml-reload-button[aria-disabled=\"true\"] {\n  background-color: #f4f4f4;\n}\n\n.mapml-reload-button[aria-disabled=\"true\"] {\n  cursor: default;\n}\n\nbutton.mapml-button:disabled,\n.mapml-button[aria-disabled=\"true\"] {\n  color: #bbb;\n}\n\nbutton.mapml-contextmenu-item:disabled {\n  opacity: .3;\n}\n\n.leaflet-control-layers-toggle {\n  width: 44px !important;\n  height: 44px !important;\n}\n\n.leaflet-bar a,\n.leaflet-control-layers,\n.mapml-reload-button {\n  border-color: #e3e3e3 !important;\n}\n\n.leaflet-control-layers,\n.mapml-reload-button {\n  border-radius: 4px !important;\n}\n.leaflet-touch .leaflet-bar a:last-child {\n  border-bottom-left-radius: 4px !important;\n  border-bottom-right-radius: 4px !important;\n}\n.leaflet-touch .leaflet-bar a:first-child {\n  border-top-left-radius: 4px !important;\n  border-top-right-radius: 4px !important;\n}\n.leaflet-touch .leaflet-control-layers,\n.leaflet-touch .leaflet-bar {\n  border-style: inherit;\n}\n\n/* Less opinionated box-shadows. */\n.mapml-contextmenu,\n.mapml-debug,\n.leaflet-bar,\n.leaflet-control-layers,\n.leaflet-popup-content-wrapper,\n.leaflet-tooltip-pane .leaflet-tooltip,\n.leaflet-touch .leaflet-control-layers,\n.leaflet-touch .leaflet-bar,\n.leaflet-popup-tip,\n.leaflet-container .leaflet-control-attribution {\n  box-shadow: rgb(0 0 0 / 30%) 0px 1px 4px -1px;\n}\n\n/* Remove opinionated styles of attribution links. */\n.leaflet-control-attribution a {\n  color: revert;\n  text-decoration: revert;\n}\n\n\n/*\n * Attribution.\n */\n\n.leaflet-container .leaflet-control-attribution {\n  background-color: #fff;\n  border-radius: 1.5em;\n  color: currentColor;\n  margin: 5px;\n  min-height: 30px;\n  min-width: 30px;\n  padding: 0;\n}\n\n.leaflet-control-attribution summary {\n  display: block;\n  list-style: none;\n  border-radius: 100%;\n  position: absolute;\n  bottom: 0;\n  left: calc(100% - 30px);\n  line-height: 0;\n  width: 30px;\n  height: 30px;\n}\n\n.leaflet-control-attribution summary svg {\n  border-radius: 100%;\n  width: inherit;\n  height: inherit;\n}\n\n.mapml-attribution-container {\n  padding: 5px 35px 5px 10px;\n}\n\n/*\n * Zoom controls.\n */\n\n.leaflet-control-zoom-in,\n.leaflet-control-zoom-out {\n  text-indent: unset;\n}\n\n/*\n * Fullscreen control. Image contains the on and off images, toggled via\n * the background-position property\n */\n\n.leaflet-control-fullscreen a {  \n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='26' height='52' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg transform='translate(0 -1000.4)'%3E%3Cuse transform='translate(0 26)' width='100%25' height='100%25' xlink:href='%23a'/%3E%3Cuse transform='translate(0 26)' width='100%25' height='100%25' xlink:href='%23b'/%3E%3Cuse transform='translate(0 26)' width='100%25' height='100%25' xlink:href='%23c'/%3E%3Cuse transform='translate(0 26)' width='100%25' height='100%25' xlink:href='%23d'/%3E%3Cpath id='a' transform='translate(0 1000.4)' d='M5 15v6h6v-2H7v-4z' color='%23000' fill='%23404040'/%3E%3Cpath id='b' transform='translate(0 1000.4)' d='M21 15v6h-6v-2h4v-4z' color='%23000' fill='%23404040'/%3E%3Cpath d='M10 1037.4v4l1 1h4l1-1v-4l-1-1h-4z' color='%23000' fill='%23404040'/%3E%3Cpath id='d' d='M5 1011.4v-6h6v2H7v4z' color='%23000' fill='%23404040'/%3E%3Cpath id='c' d='M21 1011.4v-6h-6v2h4v4z' color='%23000' fill='%23404040'/%3E%3C/g%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-size: 38px 76px;\n  background-position: 3px 3px;\n}\n\n/*\n* See: https://developer.mozilla.org/en-US/docs/Web/CSS/:host_function\nand: https://developer.mozilla.org/en-US/docs/Web/CSS/:fullscreen */\n:host(:fullscreen) .leaflet-control-fullscreen a {\n  background-position: 3px -35px;\n}\n\n:host(:-webkit-full-screen) {\n  width: 100%!important;\n  height: 100%!important;\n}\n\n:host(.leaflet-pseudo-fullscreen) {\n  position: fixed!important;\n  width: 100%!important;\n  height: 100%!important;\n  top: 0!important;\n  left: 0!important;\n  z-index: 99999;\n}\n\n/*\n * Layer controls.\n */\n\n.leaflet-control-layers.leaflet-control {\n  margin-right: 5px;\n  margin-left: 5px;\n  padding: 0;\n}\n\n.leaflet-control-layers-list {\n  padding: 0;\n}\n\n.leaflet-control-layers fieldset {\n  margin: 0;\n  padding: 0;\n  min-height: 44px;\n}\n\n.leaflet-control-layers label {\n  display: inline;\n}\n\n.mapml-control-layers > :not(summary) {\n  display: block;\n  margin-block-start: 5px;\n  margin-inline-start: 15px;\n  width: calc(100% - 15px);\n}\n\n.mapml-layer-item-style > div {\n  display: flex;\n}\n\n.mapml-layer-item-style input {\n  margin-inline-start: 0;\n}\n\n.leaflet-control .leaflet-control-layers-toggle {\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M0 0h24v24H0V0z' fill='none'/%3E%3Cpath d='m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16zm0-11.47L17.74 9 12 13.47 6.26 9 12 4.53z'/%3E%3C/svg%3E\");\n  background-size: 34px;\n}\n\n/* Revert Leaflet styles that are causing misalignment. */\n.leaflet-control-layers-selector {\n  margin-top: revert;\n  position: revert;\n}\n\n/*\n * Context menu.\n */\n\n.mapml-contextmenu {\n  border-radius: 4px;\n  padding: 4px 0;\n  background-color: #fff;\n  cursor: default;\n  position: absolute;\n  width: fit-content;\n  display: inline-block;\n  z-index: 10001;\n}\n\n.mapml-contextmenu button.mapml-contextmenu-item {\n  color: #222;\n  font-size: 12px;\n  line-height: 20px;\n  text-decoration: none;\n  padding: 0 12px;\n  border-top: 1px solid transparent;\n  border-bottom: 1px solid transparent;\n  cursor: default;\n  width: 100%;\n  display: block;\n}\n\n.mapml-contextmenu button.mapml-contextmenu-item.over {\n  background-color: #f4f4f4;\n  border-top: 1px solid #f0f0f0;\n  border-bottom: 1px solid #f0f0f0;\n}\n      \n.mapml-contextmenu-separator {\n  border-bottom: 1px solid #e3e3e3;\n  margin: 5px 0;\n}\n\n.mapml-contextmenu.mapml-submenu {\n  width: 80px;\n  margin-bottom: -2rem;\n  width: fit-content;\n}\n\n@supports (contain: layout) {\n  .mapml-contextmenu {\n    position: fixed;\n  }\n  .mapml-contextmenu.mapml-submenu {\n    position: absolute;\n  }\n}\n\n.mapml-contextmenu-item[aria-controls] span::after {\n  content:\">\";\n}\n@supports (list-style-type: disclosure-open) {\n  .mapml-contextmenu-item[aria-controls] span {\n    display: inline-block;\n  }\n  .mapml-contextmenu-item[aria-controls] span::after {\n    content:\"\";\n    display: list-item;\n    list-style-type: disclosure-closed;\n    margin-inline-start: 20px;\n  }\n}\n\n/*\n * Debug mode.\n */\n\n.mapml-debug {\n  contain: content;\n  max-height: 100%;\n  max-width: 100%;\n  border-radius: 4px;\n  padding: 5px 10px;\n  background-color: #fff;\n  cursor: default;\n  z-index: 1000;\n  position: absolute;\n  display: block;\n  top: auto;\n  right: 5px;\n  bottom: 5px;\n  left: 5px;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  font: inherit;\n}\n\n.mapml-debug-banner {\n  font-weight: bold;\n  text-transform: uppercase;\n  display: inline-block;\n  text-align: left;\n  text-align: inline-start;\n  line-height: 2;\n}\n\n.mapml-debug-panel,\n.mapml-debug-grid {\n  font-family: monospace;\n}\n\n.mapml-debug-tile {\n  text-indent: 6px;\n  line-height: 1.8;\n}\n\n.mapml-debug-coordinates {\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n.mapml-debug,\n.mapml-debug * {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\n.mapml-debug-coordinates:empty {\n  display: none;\n}\n\n.mapml-debug-coordinates > * {\n  display: inline;\n}\n\n:host(.mapml-fullscreen-on) .mapml-debug-grid {\n  color: #fff;\n  text-shadow: 1px 1px 1px #000, 1px 1px 1px #000;\n}\n\n/*\n * User interaction.\n */\n \n :host(.leaflet-drag-target) .leaflet-grab {\n   cursor: move;\n   cursor: -webkit-grabbing;\n   cursor:    -moz-grabbing;\n   cursor:         grabbing;\n }\n \n /* Prevent `:hover` styles from applying to controls when the user is panning\n the map display and the cursor happens to move over a control. */\n:host(.leaflet-drag-target) .leaflet-control {\n  pointer-events: none;\n}\n\n/* Disable dragging of controls. */\n.mapml-popup-button,\n.leaflet-popup-close-button,\n.leaflet-control :not([draggable=\"true\"]),\n.mapml-contextmenu :not([draggable=\"true\"]) {\n  -webkit-user-drag: none;\n}\n\n/* Disable text selection in controls. */\n.leaflet-control,\n.mapml-contextmenu,\n.mapml-debug,\n.mapml-focus-buttons,\n.mapml-layer-item-settings summary {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n/* Hide unintended highlighting of controls from clicking the map display in\n   quick succession. This is a workaround for `user-select: contain`, since it has\n   virtually no browser support: https://www.chromestatus.com/feature/5730263904550912. */\n.leaflet-control a::selection,\n.leaflet-popup-close-button::selection,\n.leaflet-control-attribution::selection {\n  background-color: transparent;\n}\n\n/* Disable pointer events where they'd interfere with the intended action. */\n.mapml-feature-index-box,\n.leaflet-tooltip,\n.leaflet-crosshair *,\n.mapml-layer-item-settings .mapml-control-layers summary label,\n.mapml-contextmenu-item > *,\n.mapml-link-preview {\n  pointer-events: none!important;\n}\n\n/* Restore the default focus outline of UA stylesheets,\n   which Leaflet unfortunately removes (https://github.com/Leaflet/Leaflet/issues/6986). */\n.leaflet-container :focus {\n  outline-color: -webkit-focus-ring-color !important;\n  outline-style: auto !important;\n  outline-width: thin !important;\n  outline: revert !important;\n}\n/* Unset the outline that Leaflet occasionally sets on controls without also\n   delegating focus. */\n.leaflet-active:not(:focus) {\n  outline: unset !important;\n}\n.leaflet-container:not(:focus-within) .mapml-outline {\n  outline: 0;\n}\n.leaflet-container:not(:focus-within) .mapml-crosshair {\n  display: none;\n}\n\n/* Restore the default UA tap highlight color by overriding the opinionated tap\n   highlight color inherited from leaflet.css. */\n.leaflet-control a {\n  -webkit-tap-highlight-color: initial;\n}\n\n/* Less opinionated styles for the zoom box than inherited from leaflet.css. */\n.leaflet-zoom-box {\n  border: thin dotted;\n  background-color: rgba(255,255,255,0.33);\n}\n\nlabel,\ninput,\nbutton,\nsummary {\n  cursor: pointer;\n}\n\n.mapml-draggable,\n.mapml-draggable * {\n  cursor: row-resize;\n}\n\n.leaflet-crosshair {\n  cursor: crosshair;\n}\n\n[hidden] {\n  display: none!important;\n}\n\n/*\n * Visibility hack  mitigates FOUC.\n * (https://github.com/Maps4HTML/MapML.js/issues/154)\n */\n\n/* Unset `visibility: hidden` (inherited from mapml.js). */\n.leaflet-container .mapml-contextmenu,\n.leaflet-container .leaflet-control-container {\n  visibility: unset!important;\n}\n\n.mapml-crosshair {\n  margin: -36px 0 0 -36px;\n  width: 72px;\n  height: 72px;\n  left: 50%;\n  top: 50%;\n  position: absolute;\n  z-index: 10000;\n}\n\n.mapml-popup-button {\n\tpadding: 0 4px 0 4px;\n\tborder: none;\n\ttext-align: center;\n\tfont: 16px/14px Tahoma, Verdana, sans-serif;\n\tcolor: inherit;\n\ttext-decoration: none;\n\tfont-weight: bold;\n  background: transparent;\n  white-space: nowrap;\n  box-sizing: border-box;\n  width: 44px;\n  height: 44px;\n  line-height: 44px;\n}\n\n.mapml-zoom-link {\n  display: block;\n  text-align: center;\n}\n\n.mapml-focus-buttons {\n  white-space: nowrap;\n}\n\n.mapml-feature-count {\n  display:inline;\n  white-space: nowrap;\n  text-align: center;\n  padding: 2px;\n}\n\n.mapml-focus-buttons button,\n.leaflet-container a.leaflet-popup-close-button {\n  width: 44px;\n  height: 44px;\n  min-width: 44px;\n  min-height: 44px;\n  line-height: 44px;\n}\n.leaflet-popup-content {\n  margin: 0;\n  min-width: min-content;\n  scrollbar-width: thin;\n}\n.mapml-popup-content {\n  padding-top: 44px;\n}\n.mapml-focus-buttons {\n  display: block;\n  text-align: center;\n}\n.mapml-focus-buttons button {\n  display: inline-block;\n  padding: 0;\n}\n.leaflet-container a.leaflet-popup-close-button {\n  padding: 0;\n  font-size: 20px;\n}\n.leaflet-popup-content .mapml-feature-count {\n  margin: 0;\n  padding: 0 5px;\n  line-height: 44px;\n}\n.mapml-popup-content hr:last-of-type {\n  margin-bottom: 0;\n  border-bottom: 0;\n  border-top: 1px solid #e3e3e3;\n}\n.mapml-popup-content :first-child {\n  margin-top: 0;\n  padding-top: 0;\n}\n.mapml-popup-content > :not(.mapml-focus-buttons) {\n  padding: 0 1rem;\n}\n.leaflet-popup-tip-container {\n  margin-top: -1px;\n}\n\n.mapml-outline {\n  outline-style: auto;\n  outline-offset: -2px;\n  z-index: 1000;\n  pointer-events: none;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  color: initial;\n}\n \n /* Force printers to include background-images of controls for printing.\n   (https://github.com/Maps4HTML/MapML.js/issues/294) */\n@media print {\n  .leaflet-control {\n    -webkit-print-color-adjust: exact;\n    print-color-adjust: exact;\n  }\n}\n\n.leaflet-pane > svg g.leaflet-interactive,\nsvg.leaflet-image-layer.leaflet-interactive g {\n  pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\n  pointer-events: auto;\n}\n\n.mapml-link-preview {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  background-color: rgb(222,225,230);\n  border-radius: 0 5px 0 0 ;\n  z-index: 1050;  \n  max-width: 60%;\n}\n\n.mapml-link-preview > p {\n  margin: 3px 5px 2px 3px;\n  color: rgb(60,64,67);\n  text-overflow: ellipsis;\n  overflow-x: hidden;\n  white-space: nowrap;\n}\n\n/**\n* layer item controls\n*/\n\n.mapml-button-icon {\n  pointer-events: none;\n}\n\n.mapml-button-icon svg {\n  fill: currentColor;\n}\n\n.mapml-layer-item,\n.mapml-layer-item * {\n  box-sizing: border-box;\n}\n\n.mapml-layer-item,\n.mapml-layer-grouped-extents,\n.mapml-layer-extent {\n  background-color: #fff;\n  border: 1px solid #fff;\n  margin: 0;\n  padding: 0;\n}\n\n.mapml-layer-item:not(:last-of-type) {\n  border-bottom: 1px solid #e3e3e3;\n}\n.mapml-layer-item[aria-grabbed=\"true\"],\n.mapml-layer-extent[aria-grabbed=\"true\"] {\n  border: 1px solid #e3e3e3;\n  border-radius: 0;\n}\n.mapml-layer-item:first-of-type,\n.mapml-layer-extent:first-of-type {\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n}\n.mapml-layer-item:last-of-type,\n.mapml-layer-extent:last-of-type {\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n}\n\n.mapml-layer-item-properties {\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n  padding-inline-start: .5rem;\n}\n.mapml-layer-item-controls {\n  margin-inline-start: auto;\n}\n\n\n.mapml-layer-item-controls button span {\n  font-size: large;\n  font-weight: 900;\n  vertical-align: middle;\n}\n\n.mapml-layer-item-controls button svg {\n  vertical-align: text-bottom;\n}\n\n.mapml-layer-item-controls,\n.mapml-layer-item-remove-control,\n.mapml-layer-item-settings-control {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n}\n\n\n.mapml-layer-item-remove-control,\n.mapml-layer-item-settings-control {\n  min-height: 44px;\n  min-width: 44px;\n  height: 44px;\n  width: 44px;\n}\n\nlabel.mapml-layer-item-toggle {\n  display: inline-flex;\n  align-items: center;\n  width: 100%; /* have the clickable area take up all available width */\n  min-height: 44px;\n}\n\n.mapml-layer-item-name {\n  word-break: break-word;\n  padding-block-start: .25rem;\n  padding-block-end: .25rem;\n  padding-inline-start: .25rem;\n  padding-inline-end: 1rem;\n}\n\n.mapml-layer-item-settings > * {\n  display: block;\n  padding-block-start: .25rem;\n  padding-block-end: .25rem;\n  padding-inline-start: 2rem;\n  padding-inline-end: 1rem;\n}\n\n.mapml-screen-reader-output {\n  clip: rect(0 0 0 0);\n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}\n\n.mapml-screen-reader-output-scale {\n  clip: rect(0 0 0 0);\n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px\n}\n/*\n * Feature styles.\n */\n\n.mapml-vector-container svg :is(\n  [role=\"link\"]:focus,\n  [role=\"link\"]:hover,\n  [role=\"link\"]:focus path,\n  [role=\"link\"]:hover path,\n  [role=\"link\"] path:focus,\n  [role=\"link\"] path:hover,\n  [role=\"button\"]:focus,\n  [role=\"button\"]:hover,\n  [role=\"button\"]:focus path,\n  [role=\"button\"]:hover path,\n  [role=\"button\"] path:focus,\n  [role=\"button\"] path:hover,\n  path[tabindex=\"0\"]:focus\n  ) {\n  stroke: #0000EE;\n  stroke: LinkText;\n}\n.mapml-vector-container svg :is(\n  [role=\"link\"]:focus:not(:focus-visible),\n  [role=\"link\"]:focus:not(:focus-visible) path,\n  [role=\"link\"] path:focus:not(:focus-visible),\n  [role=\"button\"]:focus:not(:focus-visible),\n  [role=\"button\"]:focus:not(:focus-visible) path,\n  [role=\"button\"] path:focus:not(:focus-visible),\n  path[tabindex=\"0\"]:focus:not(:focus-visible)\n  ) {\n  outline: 0!important;\n}\n\n/*\n* Extent Elements in the Layer Control\n*/\n\n.mapml-layer-item-settings .mapml-layer-extent {\n  padding-inline-start: 1.8rem;\n}\n\n.mapml-layer-item-settings .mapml-layer-extent .mapml-layer-item-properties{\n  padding-inline-start: 0;\n}\n\n.mapml-layer-item-settings .mapml-layer-extent .mapml-layer-item-details {\n  padding-inline-start: 1.6rem;\n}\n\n/**\n* Feature Index\n */\n.mapml-feature-index-box {\n  margin: -8% 0 0 -8%;\n  width: 16%;\n  left: 50%;\n  top: 50%;\n  position: absolute;\n  z-index: 10000;\n  outline: 2px solid #fff;\n}\n\n.mapml-feature-index-box:after{\n  display: block;\n  content: '';\n  padding-top: 100%;\n}\n\n.mapml-feature-index-box > svg {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.mapml-feature-index {\n  outline: 1px solid #000000;\n  contain: content;\n  border-radius: 4px;\n  background-color: #fff;\n  cursor: default;\n  z-index: 1000;\n  position: absolute;\n  top: auto;\n  left: 50%;\n  -ms-transform: translateX(-50%);\n  transform: translateX(-50%);\n  bottom: 30px;\n  padding-top: 5px;\n  height: 92px;\n  width: 450px;\n  font-size: 16px;\n}\n@container leafletmap (max-width: 650px ) {\n    .mapml-feature-index {\n        width: 70cqw; \n    }\n}\n@container leafletmap (max-width: 390px ) {\n    .mapml-feature-index {\n        bottom: 100px; \n    }\n}\n.mapml-feature-index-content > span{\n  width: 140px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: inline-block;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n.shortcuts-dialog > ul > li > kbd,\n.mapml-feature-index-content > span > kbd{\n  background-color: lightgrey;\n  padding-right: 4px;\n  padding-left: 4px;\n  border-radius: 4px;\n}\n\n.mapml-feature-index-content > span > span{\n  clip: rect(0 0 0 0);\n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: pre;\n  width: 1px;\n}\n\n.shortcuts-dialog > button{\n  font-size: inherit;\n}\n\n.shortcuts-dialog > ul {\n  padding: 0;\n  list-style-type:none;\n}\n\n.mapml-tile-group > svg { \n    overflow: visible;\n}\n/* ===== ESSENTIAL HOST DEFAULTS (immediate application for getBoundingClientRect) ===== */\n:host {\n  /* Reset first, then apply critical MapML defaults */\n  all: initial;\n  \n  /* Critical MapML defaults that must be available immediately */\n  display: inline-block;\n  background-color: white;\n  /* Default dimensions - will be overridden by JavaScript based on CSS rules or attributes */\n  height: 150px;        \n  width: 300px;         \n  contain: layout size;\n  border-width: 2px;\n  border-style: inset;\n}\n\n/* Ensure white background persists in fullscreen */\n:host(.mapml-fullscreen-on) {\n  background-color: white;\n}\n/* Ensure container fills the host element */\n.mapml-map-container {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n/* ===== GCDS LAYER ARCHITECTURE ===== */\n@layer reset, default, display, size, variant, hover, visited, focus;\n\n@layer reset {\n  :host {\n    /* GCDS responsive overrides (when CSS loads) */\n    position: relative;\n    \n    /* Aspect ratio support for responsive design */\n    aspect-ratio: var(--map-aspect);\n  }\n}\n\n@layer default {\n  :host {\n    /* Visual styling */\n    border: 2px inset;\n    cursor: pointer;\n    transition: all 0.35s;\n  }\n  \n  /* Attribute-based styling */\n  :host([frameborder=\"0\"]) {\n    border-width: 0;\n  }\n  \n  :host([hidden]) {\n    display: none !important;\n  }\n}/* Remaining layers: size, variant, hover, visited, focus remain unchanged */\n/* Optional: Add any gcds-specific styling here */\n/* You may want to import gcds design tokens if available */\n";var MapLayer=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.LayerGroup.extend({options:{zIndex:0,opacity:"1.0"},initialize:function(href,layerEl,options){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.LayerGroup.prototype.initialize.call(this,null,options),href&&(this._href=href),this._layerEl=layerEl,this._content=layerEl.src?layerEl.shadowRoot:layerEl,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.setOptions(this,options),this._container=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","leaflet-layer"),this.changeOpacity(this.options.opacity),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.addClass(this._container,"mapml-layer"),this._initialize(this._content)},getContainer:function(){return this._container},setZIndex:function(zIndex){return this.options.zIndex=zIndex,this._updateZIndex(),this},getHref:function(){return this._href??""},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},changeOpacity:function(opacity){this._container.style.opacity=opacity,this._layerEl._opacity=opacity,this._layerEl._opacitySlider&&(this._layerEl._opacitySlider.value=opacity)},titleIsReadOnly(){return!!this._titleIsReadOnly},setName(newName){this.titleIsReadOnly()||(this._title=newName,this._layerEl._layerControlHTML.querySelector(".mapml-layer-item-name").innerHTML=newName)},getName(){return this._title},onAdd:function(map){this.getPane().appendChild(this._container),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.LayerGroup.prototype.onAdd.call(this,map),this.setZIndex(this.options.zIndex),map.on("popupopen",this._attachSkipButtons,this)},_calculateBounds:function(){let bnds,zoomBounds;delete this.bounds,delete this.zoomBounds;bnds=this._layerEl.src&&this._layerEl.shadowRoot.querySelector(":host > map-meta[name=extent][content]")?_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getBoundsFromMeta(this._layerEl.shadowRoot):this._layerEl.querySelector(":scope > map-meta[name=extent][content]")?_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getBoundsFromMeta(this._layerEl):void 0,zoomBounds=this._layerEl.src&&this._layerEl.shadowRoot.querySelector(":host > map-meta[name=zoom][content]")?_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getZoomBoundsFromMeta(this._layerEl.shadowRoot):this._layerEl.querySelector(":scope > map-meta[name=zoom][content]")?_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getZoomBoundsFromMeta(this._layerEl):void 0;const mapExtents=this._layerEl.src?this._layerEl.shadowRoot.querySelectorAll("map-extent"):this._layerEl.querySelectorAll("map-extent");if(["_staticTileLayer","_mapmlvectors","_extentLayer"].forEach(type=>{let zoomMax,zoomMin,minNativeZoom,maxNativeZoom;if(zoomBounds&&(zoomMax=zoomBounds.maxZoom,zoomMin=zoomBounds.minZoom,maxNativeZoom=zoomBounds.maxNativeZoom?zoomBounds.maxNativeZoom:-1/0,minNativeZoom=zoomBounds.minNativeZoom?zoomBounds.minNativeZoom:1/0),"_extentLayer"===type&&mapExtents.length){for(let i=0;i<mapExtents.length;i++)if(mapExtents[i]._extentLayer?.bounds){let mapExtentLayer=mapExtents[i]._extentLayer;bnds?bnds.extend(mapExtentLayer.bounds):bnds=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds(mapExtentLayer.bounds.min,mapExtentLayer.bounds.max),mapExtentLayer.zoomBounds&&(zoomBounds?(zoomMax=Math.max(zoomMax,mapExtentLayer.zoomBounds.maxZoom),zoomMin=Math.min(zoomMin,mapExtentLayer.zoomBounds.minZoom),maxNativeZoom=Math.max(maxNativeZoom,mapExtentLayer.zoomBounds.maxNativeZoom),minNativeZoom=Math.min(minNativeZoom,mapExtentLayer.zoomBounds.minNativeZoom),zoomBounds.minZoom=zoomMin,zoomBounds.maxZoom=zoomMax,zoomBounds.minNativeZoom=minNativeZoom,zoomBounds.maxNativeZoom=maxNativeZoom):zoomBounds=mapExtentLayer.zoomBounds)}}else"_mapmlvectors"===type?this.eachLayer(function(layer){layer instanceof _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.M&&layer.layerBounds&&(bnds?bnds.extend(layer.layerBounds):bnds=layer.layerBounds),layer instanceof _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.M&&layer.zoomBounds&&(zoomBounds?(zoomMax=Math.max(zoomMax,layer.zoomBounds.maxZoom),zoomMin=Math.min(zoomMin,layer.zoomBounds.minZoom),maxNativeZoom=Math.max(maxNativeZoom,layer.zoomBounds.maxNativeZoom),minNativeZoom=Math.min(minNativeZoom,layer.zoomBounds.minNativeZoom),zoomBounds.minZoom=zoomMin,zoomBounds.maxZoom=zoomMax,zoomBounds.minNativeZoom=minNativeZoom,zoomBounds.maxNativeZoom=maxNativeZoom):zoomBounds=layer.zoomBounds)}):this.eachLayer(layer=>{layer instanceof _MapTileLayer_dNMHgVBV_js__WEBPACK_IMPORTED_MODULE_2__.M&&(layer.layerBounds&&(bnds?bnds.extend(layer.layerBounds):bnds=layer.layerBounds),layer.zoomBounds&&(zoomMax=Math.max(zoomMax,layer.zoomBounds.maxZoom),zoomMin=Math.min(zoomMin,layer.zoomBounds.minZoom),maxNativeZoom=Math.max(maxNativeZoom,layer.zoomBounds.maxNativeZoom),minNativeZoom=Math.min(minNativeZoom,layer.zoomBounds.minNativeZoom),zoomBounds.minZoom=zoomMin,zoomBounds.maxZoom=zoomMax,zoomBounds.minNativeZoom=minNativeZoom,zoomBounds.maxNativeZoom=maxNativeZoom))})}),bnds)this.bounds=bnds;else{let projectionBounds=M[this.options.projection].options.bounds;this.bounds=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds(projectionBounds.min,projectionBounds.max)}zoomBounds||(zoomBounds={}),zoomBounds.minZoom||(zoomBounds.minZoom=0),zoomBounds.maxZoom||(zoomBounds.maxZoom=M[this.options.projection].options.resolutions.length-1),zoomBounds.minNativeZoom===1/0&&(zoomBounds.minNativeZoom=zoomBounds.minZoom),zoomBounds.maxNativeZoom===-1/0&&(zoomBounds.maxNativeZoom=zoomBounds.maxZoom),this.zoomBounds=zoomBounds},onRemove:function(map){_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.LayerGroup.prototype.onRemove.call(this,map),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.remove(this._container),map.off("popupopen",this._attachSkipButtons)},getAttribution:function(){return this.options.attribution},getBase:function(){return new URL(this._content.querySelector("map-base")?this._content.querySelector("map-base").getAttribute("href"):"MAP-LAYER"===this._content.nodeName||"LAYER-"===this._content.nodeName?this._content.baseURI:this._href,this._href).href},renderStyles:_renderStyles_EYVT9Efh_js__WEBPACK_IMPORTED_MODULE_3__.r,_initialize:function(){var layer=this;layer.getBase();var mapml=this._content;!function parseLicenseAndLegend(){var licenseTitle,attText,licenseLink=mapml.querySelector("map-link[rel=license]");licenseLink&&(licenseTitle=licenseLink.getAttribute("title"),attText='<a href="'+licenseLink.getAttribute("href")+'" title="'+licenseTitle+'">'+licenseTitle+"</a>");_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.setOptions(layer,{attribution:attText});var legendLink=mapml.querySelector("map-link[rel=legend]");legendLink&&(layer._legendUrl=legendLink.getAttribute("href"));layer._map&&layer._map.hasLayer(layer)&&layer._map.attributionControl.addAttribution(layer.getAttribution())}(),function setLayerTitle(){mapml.querySelector("map-title")?(layer._title=mapml.querySelector("map-title").textContent.trim(),layer._titleIsReadOnly=!0):layer._layerEl&&layer._layerEl.hasAttribute("label")&&(layer._title=layer._layerEl.getAttribute("label").trim())}(),layer._layerEl.parentElement&&layer._layerEl.parentElement._toggleControls()},getQueryTemplates:function(location,zoom){const queryLinks=this._layerEl.querySelectorAll("map-extent[checked] map-link[rel=query]").length?this._layerEl.querySelectorAll("map-extent[checked] map-link[rel=query]"):this._layerEl.shadowRoot.querySelectorAll("map-extent[checked] map-link[rel=query]").length?this._layerEl.shadowRoot.querySelectorAll("map-extent[checked] map-link[rel=query]"):null;if(queryLinks){var templates=[];for(let i=0;i<queryLinks.length;i++){const minZoom=queryLinks[i].extent.zoom.minZoom,maxZoom=queryLinks[i].extent.zoom.maxZoom,withinZoomBounds=z=>minZoom<=z&&z<=maxZoom;queryLinks[i].getBounds().contains(location)&&withinZoomBounds(zoom)&&templates.push(queryLinks[i]._templateVars)}return templates}},_attachSkipButtons:function(e){let layer,group,popup=e.popup,map=e.target,content=popup._container.getElementsByClassName("mapml-popup-content")[0];if(popup._container.setAttribute("role","dialog"),content.setAttribute("tabindex","-1"),content.setAttribute("role","document"),popup._count=0,popup._source._eventParents)layer=popup._source._eventParents[Object.keys(popup._source._eventParents)[0]],group=popup._source.group,attachZoomLink.call(popup);else{layer=(popup._source._layerEl.querySelector("map-extent")||popup._source._layerEl.shadowRoot.querySelector("map-extent"))._extentLayer,map.on("attachZoomLink",attachZoomLink,popup)}popup._container.querySelector('nav[class="mapml-focus-buttons"]')&&(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.remove(popup._container.querySelector('nav[class="mapml-focus-buttons"]')),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.remove(popup._container.querySelector("hr")));let div=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("nav","mapml-focus-buttons"),mapFocusButton=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("button","mapml-popup-button",div);mapFocusButton.type="button",mapFocusButton.title=map.options.mapEl.locale.kbdFocusMap,mapFocusButton.innerHTML="<span aria-hidden='true'>|&#10094;</span>",_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(mapFocusButton,"click",e=>{_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.stop(e),map.featureIndex._sortIndex(),map.closePopup(),map._container.focus()},popup);let previousButton=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("button","mapml-popup-button",div);previousButton.type="button",previousButton.title=map.options.mapEl.locale.kbdPrevFeature,previousButton.innerHTML="<span aria-hidden='true'>&#10094;</span>",_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(previousButton,"click",layer._previousFeature,popup);let featureCount=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("p","mapml-feature-count",div),totalFeatures=this._totalFeatureCount?this._totalFeatureCount:1;featureCount.innerText=popup._count+1+"/"+totalFeatures;let nextButton=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("button","mapml-popup-button",div);nextButton.type="button",nextButton.title=map.options.mapEl.locale.kbdNextFeature,nextButton.innerHTML="<span aria-hidden='true'>&#10095;</span>",_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(nextButton,"click",layer._nextFeature,popup);let controlFocusButton=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("button","mapml-popup-button",div);controlFocusButton.type="button",controlFocusButton.title=map.options.mapEl.locale.kbdFocusControls,controlFocusButton.innerHTML="<span aria-hidden='true'>&#10095;|</span>",_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(controlFocusButton,"click",e=>{map.featureIndex._sortIndex(),map.featureIndex.currentIndex=map.featureIndex.inBoundFeatures.length-1,map.featureIndex.inBoundFeatures[0]?.path.setAttribute("tabindex",-1),map.featureIndex.inBoundFeatures[map.featureIndex.currentIndex]?.path.setAttribute("tabindex",0),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.stop(e),map.closePopup(),map._controlContainer.querySelector("A:not([hidden])").focus()},popup);let divider=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("hr","mapml-popup-divider");function focusFeature(focusEvent){let path=focusEvent.originalEvent.path||focusEvent.originalEvent.composedPath(),isTab=9===focusEvent.originalEvent.keyCode,shiftPressed=focusEvent.originalEvent.shiftKey;(path[0].classList.contains("leaflet-popup-close-button")&&isTab&&!shiftPressed||27===focusEvent.originalEvent.keyCode||path[0].classList.contains("leaflet-popup-close-button")&&13===focusEvent.originalEvent.keyCode||path[0].classList.contains("mapml-popup-content")&&isTab&&shiftPressed||path[0]===popup._content.querySelector("a")&&isTab&&shiftPressed)&&setTimeout(()=>{map.closePopup(popup),group.focus(),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.stop(focusEvent)},0)}function focusMap(focusEvent){let path=focusEvent.originalEvent.path||focusEvent.originalEvent.composedPath(),isTab=9===focusEvent.originalEvent.keyCode,shiftPressed=focusEvent.originalEvent.shiftKey;13===focusEvent.originalEvent.keyCode&&path[0].classList.contains("leaflet-popup-close-button")||27===focusEvent.originalEvent.keyCode?(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.stopPropagation(focusEvent),map.closePopup(popup),map._container.focus(),27!==focusEvent.originalEvent.keyCode&&(map._popupClosed=!0)):isTab&&path[0].classList.contains("leaflet-popup-close-button")?map.closePopup(popup):path[0].classList.contains("mapml-popup-content")&&isTab&&shiftPressed?(map.closePopup(popup),setTimeout(()=>{_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.stop(focusEvent),map._container.focus()},0)):path[0]===popup._content.querySelector("a")&&isTab&&shiftPressed&&(map.closePopup(popup),setTimeout(()=>{_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.stop(focusEvent),map.getContainer.focus()},0))}function attachZoomLink(e){let popupWrapper=this._wrapper,featureEl=e?e.currFeature:this._source._groupLayer._featureEl;if(popupWrapper.querySelector("a.mapml-zoom-link")&&popupWrapper.querySelector("a.mapml-zoom-link").remove(),!featureEl.querySelector("map-geometry"))return;let tL=featureEl.extent.topLeft.gcrs,bR=featureEl.extent.bottomRight.gcrs,center=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.latLngBounds(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.latLng(tL.horizontal,tL.vertical),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.latLng(bR.horizontal,bR.vertical)).getCenter(!0),zoomLink=document.createElement("a");zoomLink.href=`#${featureEl.getZoomToZoom()},${center.lng},${center.lat}`,zoomLink.innerHTML=`${map.options.mapEl.locale.popupZoom}`,zoomLink.className="mapml-zoom-link",zoomLink.onclick=zoomLink.onkeydown=function(e){(e instanceof MouseEvent||13===e.keyCode)&&(e.preventDefault(),featureEl.zoomTo(),map.closePopup(),map.getContainer().focus())};let link=popupWrapper.querySelector(".mapml-zoom-link");link&&link.remove(),popupWrapper.insertBefore(zoomLink,popupWrapper.querySelector("hr.mapml-popup-divider"))}popup._navigationBar=div,popup._content.parentElement.parentElement.appendChild(divider),popup._content.parentElement.parentElement.appendChild(div),content.focus(),group&&!M.options.featureIndexOverlayOption?(group.setAttribute("aria-expanded","true"),map.on("keydown",focusFeature)):map.on("keydown",focusMap),map.on("popupclose",function removeHandlers(removeEvent){removeEvent.popup===popup&&(map.off("keydown",focusFeature),map.off("keydown",focusMap),map.off("popupopen",attachZoomLink),map.off("popupclose",removeHandlers),group&&group.setAttribute("aria-expanded","false"))})}}),mapLayer=function(url,node,options){return url||node?new MapLayer(url,node,options):null},createLayerControlHTML=async function(){var fieldset=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("fieldset","mapml-layer-item"),input=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("input"),layerItemName=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("span","mapml-layer-item-name"),settingsButtonNameIcon=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("span"),layerItemProperty=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","mapml-layer-item-properties",fieldset),layerItemSettings=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","mapml-layer-item-settings",fieldset),itemToggleLabel=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("label","mapml-layer-item-toggle",layerItemProperty),layerItemControls=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("div","mapml-layer-item-controls",layerItemProperty),opacityControl=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("details","mapml-layer-item-opacity mapml-control-layers",layerItemSettings),opacity=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("input"),opacityControlSummary=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("summary"),svgSettingsControlIcon=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.SVG.create("svg"),settingsControlPath1=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.SVG.create("path"),settingsControlPath2=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.SVG.create("path"),extentsFieldset=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("fieldset","mapml-layer-grouped-extents"),mapEl=this.parentNode;opacity.setAttribute("data-testid","layer-item-opacity"),svgSettingsControlIcon.setAttribute("viewBox","0 0 24 24"),svgSettingsControlIcon.setAttribute("height","22"),svgSettingsControlIcon.setAttribute("width","22"),svgSettingsControlIcon.setAttribute("fill","currentColor"),settingsControlPath1.setAttribute("d","M0 0h24v24H0z"),settingsControlPath1.setAttribute("fill","none"),settingsControlPath2.setAttribute("d","M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"),svgSettingsControlIcon.appendChild(settingsControlPath1),svgSettingsControlIcon.appendChild(settingsControlPath2),layerItemSettings.hidden=!0,settingsButtonNameIcon.setAttribute("aria-hidden",!0);let removeControlButton=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("button","mapml-layer-item-remove-control",layerItemControls);removeControlButton.type="button",removeControlButton.title=mapEl.locale.lmRemoveLayer,removeControlButton.innerHTML="<span aria-hidden='true'>&#10005;</span>",removeControlButton.classList.add("mapml-button"),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(removeControlButton,"click",_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.stop),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(removeControlButton,"click",e=>{let elem,root,fieldset=0;if(root="GCDS-MAP"===mapEl.tagName?mapEl.shadowRoot:mapEl.querySelector(".mapml-web-map").shadowRoot,e.target.closest("fieldset").nextElementSibling&&!e.target.closest("fieldset").nextElementSibling.disbaled)for(elem=e.target.closest("fieldset").previousElementSibling;elem;)fieldset+=2,elem=elem.previousElementSibling;else elem="link";mapEl.removeChild(e.target.closest("fieldset").querySelector("span").layer._layerEl),elem=elem?root.querySelector(".leaflet-control-attribution").firstElementChild:elem=root.querySelectorAll("input")[fieldset],elem.focus()},this._layer);let itemSettingControlButton=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.create("button","mapml-layer-item-settings-control",layerItemControls);itemSettingControlButton.type="button",itemSettingControlButton.title=mapEl.locale.lmLayerSettings,itemSettingControlButton.setAttribute("aria-expanded",!1),itemSettingControlButton.classList.add("mapml-button"),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomEvent.on(itemSettingControlButton,"click",e=>{let layerControl=this._layer._layerEl._layerControl._container;layerControl._isExpanded||"touch"!==e.pointerType?!0===layerItemSettings.hidden?(itemSettingControlButton.setAttribute("aria-expanded",!0),layerItemSettings.hidden=!1):(itemSettingControlButton.setAttribute("aria-expanded",!1),layerItemSettings.hidden=!0):layerControl._isExpanded=!0},this._layer),input.defaultChecked=this.checked,input.type="checkbox",input.setAttribute("class","leaflet-control-layers-selector"),input.setAttribute("data-testid","layer-item-checkbox"),layerItemName.layer=this._layer;if(input.addEventListener("change",function(){this.checked=!this.checked,this.dispatchEvent(new CustomEvent("map-change")),this._layerControlCheckbox.focus()}.bind(this)),this._layer._legendUrl){var legendLink=document.createElement("a");legendLink.text=" "+this._layer._title,legendLink.href=this._layer._legendUrl,legendLink.target="_blank",legendLink.draggable=!1,layerItemName.appendChild(legendLink)}else layerItemName.innerHTML=this._layer._title;layerItemName.id="mapml-layer-item-name-{"+_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.stamp(layerItemName)+"}",opacityControlSummary.innerText=mapEl.locale.lcOpacity,opacityControlSummary.id="mapml-layer-item-opacity-"+_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.stamp(opacityControlSummary),opacityControl.appendChild(opacityControlSummary),opacityControl.appendChild(opacity),opacity.setAttribute("type","range"),opacity.setAttribute("min","0"),opacity.setAttribute("max","1.0"),opacity.setAttribute("value",this._opacity||"1.0"),opacity.setAttribute("step","0.1"),opacity.setAttribute("aria-labelledby","mapml-layer-item-opacity-"+_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.stamp(opacityControlSummary));opacity.value=this._opacity||"1.0",opacity.addEventListener("change",function(e){e&&e.target&&e.target.value>=0&&e.target.value<=1&&this._layer.changeOpacity(e.target.value)}.bind(this)),fieldset.setAttribute("aria-grabbed","false"),fieldset.setAttribute("aria-labelledby",layerItemName.id),fieldset.ontouchstart=fieldset.onmousedown=downEvent=>{if("label"===downEvent.target.parentElement.tagName.toLowerCase()&&"input"!==downEvent.target.tagName.toLowerCase()||"label"===downEvent.target.tagName.toLowerCase()){downEvent=downEvent instanceof TouchEvent?downEvent.touches[0]:downEvent;let control=fieldset,controls=fieldset.parentNode,moving=!1,yPos=downEvent.clientY,originalPosition=Array.from(controls.querySelectorAll("fieldset")).indexOf(fieldset);document.body.ontouchmove=document.body.onmousemove=moveEvent=>{moveEvent.preventDefault();let offset=(moveEvent=moveEvent instanceof TouchEvent?moveEvent.touches[0]:moveEvent).clientY-yPos;if(moving=Math.abs(offset)>15||moving,controls&&!moving||controls&&controls.childElementCount<=1||controls.getBoundingClientRect().top>control.getBoundingClientRect().bottom||controls.getBoundingClientRect().bottom<control.getBoundingClientRect().top)return;controls.classList.add("mapml-draggable"),control.style.transform="translateY("+offset+"px)",control.style.pointerEvents="none";let x=moveEvent.clientX,y=moveEvent.clientY,elementAt=("GCDS-MAP"===mapEl.tagName?mapEl.shadowRoot:mapEl.querySelector(".mapml-web-map").shadowRoot).elementFromPoint(x,y),swapControl=elementAt&&elementAt.closest("fieldset")?elementAt.closest("fieldset"):control;swapControl=Math.abs(offset)<=swapControl.offsetHeight?control:swapControl,control.setAttribute("aria-grabbed","true"),control.setAttribute("aria-dropeffect","move"),swapControl&&controls===swapControl.parentNode&&(swapControl=swapControl!==control.nextSibling?swapControl:swapControl.nextSibling,control!==swapControl&&(yPos=moveEvent.clientY,control.style.transform=null),controls.insertBefore(control,swapControl))},document.body.ontouchend=document.body.onmouseup=()=>{let newPosition=Array.from(controls.querySelectorAll("fieldset")).indexOf(fieldset);if(control.setAttribute("aria-grabbed","false"),control.removeAttribute("aria-dropeffect"),control.style.pointerEvents=null,control.style.transform=null,originalPosition!==newPosition){let controlsElems=controls.children,zIndex=1;for(let c of controlsElems){let layerEl=c.querySelector("span").layer._layerEl;layerEl.setAttribute("data-moving",""),mapEl.insertAdjacentElement("beforeend",layerEl),layerEl.removeAttribute("data-moving")}let layers=mapEl.querySelectorAll("map-layer,layer-");for(let i=0;i<layers.length;i++){let layer=layers[i]._layer;layer.options.zIndex!==zIndex&&layer.setZIndex(zIndex),zIndex++}}controls.classList.remove("mapml-draggable"),document.body.ontouchmove=document.body.onmousemove=document.body.onmouseup=null}}},itemToggleLabel.appendChild(input),itemToggleLabel.appendChild(layerItemName),itemSettingControlButton.appendChild(settingsButtonNameIcon),settingsButtonNameIcon.appendChild(svgSettingsControlIcon);let mapml=this.src?this.shadowRoot:this;var styleLinks=mapml.querySelectorAll('map-link[rel=style],map-link[rel="self style"],map-link[rel="style self"]');let styles;styleLinks&&(styles=this.getAlternateStyles(styleLinks),styles&&layerItemSettings.appendChild(styles)),this._layerControlCheckbox=input,this._layerControlLabel=itemToggleLabel,this._opacityControl=opacityControl,this._opacitySlider=opacity,this._layerControlHTML=fieldset,this._layerItemSettingsHTML=layerItemSettings,this._propertiesGroupAnatomy=extentsFieldset,this._styles=styles,extentsFieldset.setAttribute("aria-label","Sublayers"),extentsFieldset.setAttribute("hidden","");let mapExtents=mapml.querySelectorAll("map-extent:not([hidden])"),mapExtentLayerControls=[];for(let i=0;i<mapExtents.length;i++)mapExtentLayerControls.push(mapExtents[i].whenReady()),extentsFieldset.removeAttribute("hidden");await Promise.all(mapExtentLayerControls);for(let i=0;i<mapExtents.length;i++)extentsFieldset.appendChild(mapExtents[i].getLayerControlHTML());return layerItemSettings.appendChild(extentsFieldset),this._layerControlHTML};const GcdsMapLayer=class{constructor(hostRef){(0,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.r)(this,hostRef)}get el(){return(0,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.a)(this)}src;checked;hidden=!1;opacity=1;_opacity;media;get opacityValue(){return this._opacity??this.opacity??1}_layer;_layerControl;_layerControlHTML;_layerItemSettingsHTML;_propertiesGroupAnatomy;disabled=!1;_fetchError=!1;_layerRegistry=new Map;srcChanged(newValue,oldValue){oldValue!==newValue&&(this._onRemove(),this.el.isConnected&&this._onAdd())}checkedChanged(newValue){if(this._layer){const mapEl=this.getMapEl();if(mapEl&&mapEl._map){const leafletMap=mapEl._map;newValue?leafletMap.addLayer(this._layer):leafletMap.removeLayer(this._layer)}this._layerControlCheckbox&&(this._layerControlCheckbox.checked=newValue)}}opacityChanged(newValue,oldValue){oldValue!==newValue&&this._layer&&(this._opacity=newValue,this._layer.changeOpacity(newValue),this._opacitySlider&&(this._opacitySlider.value=newValue.toString()))}mediaChanged(newValue,oldValue){oldValue!==newValue&&this._registerMediaQuery(newValue)}hiddenChanged(newValue,oldValue){oldValue!==newValue&&this._layer&&this._layerControl&&this._applyHiddenState(newValue)}_applyHiddenState(isHidden){this._layer&&this._layerControl&&(isHidden?this._layerControl.removeLayer(this._layer):(this._layerControl.addOrUpdateOverlay(this._layer,this.label),this._validateDisabled()))}loggedMessages;_observer;_mql;_changeHandler;_boundCreateLayerControlHTML;_layerControlCheckbox;_layerControlLabel;_opacityControl;_opacitySlider;_styles;get label(){return this._layer?this._layer.getName():this.el.hasAttribute("label")?this.el.getAttribute("label"):""}set label(val){val&&(this.el.setAttribute("label",val),this._layer&&this._layer.setName(val))}get extent(){return this._layer&&this._layer._calculateBounds(),this._layer?Object.assign(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U._convertAndFormatPCRS(this._layer.bounds,window.M[this.getProjection()],this.getProjection()),{zoom:this._layer.zoomBounds}):null}_registerMediaQuery(mq){if(this._changeHandler||(this._changeHandler=()=>{this._onRemove(),this._mql.matches&&this._onAdd(),this._validateDisabled()}),mq){let map=this.getMapEl();if(!map)return;this._mql&&this._mql.removeEventListener("change",this._changeHandler),this._mql=map.matchMedia(mq),this._changeHandler(),this._mql.addEventListener("change",this._changeHandler)}else this._mql&&(this._mql.removeEventListener("change",this._changeHandler),delete this._mql,this._onRemove(),this._onAdd(),this._validateDisabled())}getMapEl(){return _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getClosest(this.el,"gcds-map")}componentWillLoad(){this.loggedMessages=new Set,Object.defineProperty(this.el,"queryable",{value:()=>this.queryable(),writable:!0,configurable:!0})}disconnectedCallback(){this.el.hasAttribute("data-moving")||(this._onRemove(),this._mql&&(this._changeHandler&&this._mql.removeEventListener("change",this._changeHandler),delete this._mql))}_onRemove(){this._observer&&this._observer.disconnect();let l=this._layer,lc=this._layerControl;l&&l.off(),l&&l._map&&l._map.removeLayer(l),lc&&!this.el.hasAttribute("hidden")&&lc.removeLayer(l),delete this._layer,delete this._layerControl,delete this._layerControlHTML,delete this._fetchError,delete this.el._layer,delete this.el._layerControl,delete this.el._layerControlHTML,delete this.el._fetchError,this._layerControlCheckbox=void 0,this._layerControlLabel=void 0,this._opacityControl=void 0,this._opacitySlider=void 0,this._styles=void 0,this.el.shadowRoot.innerHTML="",this.src&&(this.el.innerHTML=""),this._layerRegistry.clear()}connectedCallback(){if(this.el.hasAttribute("data-moving"))return;this._boundCreateLayerControlHTML=createLayerControlHTML.bind(this.el),this.el._validateDisabled=this._validateDisabled.bind(this),Object.defineProperty(this.el,"disabled",{get:()=>this.disabled,set:val=>{this.disabled=val},configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"_opacity",{get:()=>this._opacity,set:val=>{val!==this._opacity&&(this._opacity=val)},configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"opacity",{get:()=>this.opacityValue,set:val=>{+val>1||+val<0||(this._opacity=val,this._layer?.changeOpacity(val))},configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"whenElemsReady",{value:()=>this.whenElemsReady(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"zoomTo",{value:()=>this.zoomTo(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"mapml2geojson",{value:(options={})=>this.mapml2geojson(options),writable:!0,configurable:!0}),Object.defineProperty(this.el,"pasteFeature",{value:feature=>this.pasteFeature(feature),writable:!0,configurable:!0}),Object.defineProperty(this.el,"getAlternateStyles",{value:styleLinks=>this.getAlternateStyles(styleLinks),writable:!0,configurable:!0}),Object.defineProperty(this.el,"getOuterHTML",{value:()=>this.getOuterHTML(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"getMapEl",{value:()=>this.getMapEl(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"getProjection",{value:()=>this.getProjection(),writable:!0,configurable:!0}),Object.defineProperty(this.el,"label",{get:()=>this.label,set:val=>this.label=val,configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"hidden",{get:()=>this.el.hasAttribute("hidden"),set:val=>{val?this.el.setAttribute("hidden",""):this.el.removeAttribute("hidden")},configurable:!0,enumerable:!0}),Object.defineProperty(this.el,"extent",{get:()=>this.extent,configurable:!0,enumerable:!0}),this.el._layerRegistry=this._layerRegistry;const doConnected=this._onAdd.bind(this),doRemove=this._onRemove.bind(this),registerMediaQuery=this._registerMediaQuery.bind(this);let mq=this.media;this.getMapEl().whenReady().then(()=>{doRemove(),mq?registerMediaQuery(mq):doConnected()}).catch(error=>{throw new Error("Map never became ready: "+error)})}_onAdd(){new Promise((resolve,reject)=>{this.el.addEventListener("changestyle",e=>{e.stopPropagation(),e.detail&&(this.src=e.detail.src)},{once:!0});let base=this.el.baseURI?this.el.baseURI:document.baseURI;const headers=new Headers;if(headers.append("Accept","text/mapml"),this.src)fetch(this.src,{headers}).then(response=>{if(!response.ok)throw new Error(`HTTP error! Status: ${response.status}`);const responseUrl=response.url;return response.text().then(text=>({text,url:responseUrl}))}).then(({text,url:sourceUrl})=>{let content=(new DOMParser).parseFromString(text,"text/xml");if(content.querySelector("parsererror")||!content.querySelector("mapml-"))throw this._fetchError=!0,this.el._fetchError=this._fetchError,console.log("Error fetching layer content:\n\n"+text+"\n"),new Error("Parser error");return content._sourceUrl=sourceUrl,content}).then(content=>{this._copyRemoteContentToShadowRoot(content.querySelector("mapml-"),content._sourceUrl),this._copyRemoteContentToShadowRoot(content.querySelector("mapml-"));let elements=this.el.shadowRoot.querySelectorAll("*"),elementsReady=[];for(let i=0;i<elements.length;i++)elements[i].whenReady&&elementsReady.push(elements[i].whenReady().catch(error=>(console.warn(`Element ${elements[i].tagName} failed to become ready:`,error),null)));return Promise.allSettled(elementsReady)}).then(()=>{this._selectAlternateOrChangeProjection()}).then(()=>{this._layer=mapLayer(new URL(this.src,base).href,this.el,{projection:this.getProjection(),opacity:this.opacityValue}),this.el._layer=this._layer,this._createLayerControlHTML(),this._setLocalizedDefaultLabel(),this._attachedToMap(),this._runMutationObserver(this.el.shadowRoot.children),this._bindMutationObserver(),this._validateDisabled(),this.el.dispatchEvent(new CustomEvent("loadedmetadata",{detail:{target:this.el}})),resolve(void 0)}).catch(error=>{reject(error)});else{let elements=this.el.querySelectorAll("*"),elementsReady=[];for(let i=0;i<elements.length;i++)elements[i].whenReady&&elementsReady.push(elements[i].whenReady());Promise.allSettled(elementsReady).then(()=>{this._selectAlternateOrChangeProjection()}).then(()=>{this._layer=mapLayer(null,this.el,{projection:this.getProjection(),opacity:this.opacityValue}),this.el._layer=this._layer,this._createLayerControlHTML(),this._setLocalizedDefaultLabel(),this._attachedToMap(),this._runMutationObserver(this.el.children),this._bindMutationObserver(),this._validateDisabled(),this.el.dispatchEvent(new CustomEvent("loadedmetadata",{detail:{target:this.el}})),resolve(void 0)}).catch(error=>{reject(error)})}}).catch(e=>{if("changeprojection"===e.message){if(e.cause.href)console.log("Changing layer src to: "+e.cause.href),this.src=e.cause.href;else if(e.cause.mapprojection){console.log("Changing map projection to match layer: "+e.cause.mapprojection);const mapEl=this.getMapEl();mapEl&&(mapEl.projection=e.cause.mapprojection)}}else"Failed to fetch"===e.message?(this._fetchError=!0,this.el._fetchError=this._fetchError):(console.log(e),this.el.dispatchEvent(new CustomEvent("error",{detail:{target:this.el}})))})}_setLocalizedDefaultLabel(){if(!this._layer?._titleIsReadOnly&&!this._layer?._title){const mapEl=this.getMapEl();mapEl&&mapEl.locale?.dfLayer&&(this.label=mapEl.locale.dfLayer)}}_selectAlternateOrChangeProjection(){const mapml=this.src?this.el.shadowRoot:this.el,mapEl=this.getMapEl();if(!mapml||!mapEl)return;const selectedAlternate=this.getProjection()!==mapEl.projection&&mapml.querySelector("map-link[rel=alternate][projection="+mapEl.projection+"][href]");if(selectedAlternate){let baseUrl;const mapBase=mapml.querySelector("map-base[href]");baseUrl=mapBase?mapBase.getAttribute("href"):this.src?new URL(this.src,this.el.baseURI||document.baseURI).href:this.el.baseURI||document.baseURI;const url=new URL(selectedAlternate.getAttribute("href"),baseUrl).href;throw new Error("changeprojection",{cause:{href:url}})}const contentProjection=this.getProjection();if(contentProjection!==mapEl.projection&&1===mapEl.layers?.length)throw new Error("changeprojection",{cause:{mapprojection:contentProjection}})}_copyRemoteContentToShadowRoot(mapml,sourceUrl){const shadowRoot=this.el.shadowRoot;if(!shadowRoot||!mapml)return;const frag=document.createDocumentFragment(),elements=mapml.querySelectorAll("map-head > *, map-body > *");let mapBase=Array.from(elements).find(el=>"MAP-BASE"===el.nodeName);if(!mapBase&&sourceUrl)mapBase=document.createElement("map-base"),mapBase.setAttribute("href",sourceUrl),frag.appendChild(mapBase);else if(mapBase&&sourceUrl){const resolvedHref=new URL(mapBase.getAttribute("href")||"",sourceUrl).href;mapBase.setAttribute("href",resolvedHref)}for(let i=0;i<elements.length;i++)frag.appendChild(elements[i]);shadowRoot.appendChild(frag)}getProjection(){let mapml=this.src?this.el.shadowRoot:this.el,projection=this.getMapEl().projection;if(mapml.querySelector("map-meta[name=projection][content]"))projection=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U._metaContentToObject(mapml.querySelector("map-meta[name=projection]").getAttribute("content")).content||projection;else if(mapml.querySelector("map-extent[units]")){const getProjectionFrom=extents=>{let extentProj=extents[0].attributes.units.value,isMatch=!0;for(let i=0;i<extents.length;i++)extentProj!==extents[i].attributes.units.value&&(isMatch=!1);return isMatch?extentProj:null};projection=getProjectionFrom(Array.from(mapml.querySelectorAll("map-extent[units]")))||projection}else{const titleElement=this.el.querySelector("map-title"),message=`A projection was not assigned to the '${this.label||(titleElement?titleElement.textContent:"Unnamed")}' Layer. \nPlease specify a projection for that layer using a map-meta element. \nSee more here - https://maps4html.org/web-map-doc/docs/elements/meta/`;this.loggedMessages.has(message)||(console.log(message),this.loggedMessages.add(message))}return projection}_attachedToMap(){const mapEl=this.getMapEl();if(!mapEl||!this._layer)return;let i=0,position=1;const nodes=mapEl.children;for(i=0;i<nodes.length;i++)"MAP-LAYER"!==nodes[i].nodeName&&"LAYER-"!==nodes[i].nodeName||(nodes[i]===this.el?position=i+1:nodes[i]._layer&&nodes[i]._layer.setZIndex(i+1));const proj=mapEl.projection?mapEl.projection:"OSMTILE";_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.setOptions(this._layer,{zIndex:position,mapprojection:proj,opacity:window.getComputedStyle(this.el).opacity}),this.checked&&this._layer.addTo(mapEl._map),mapEl._map.on("moveend layeradd",this._validateDisabled,this),this._layer.on("add remove",this._validateDisabled,this),mapEl._layerControl&&(this._layerControl=mapEl._layerControl,this.el._layerControl=this._layerControl),mapEl._layerControl&&!this.hidden&&this._layerControl.addOrUpdateOverlay(this._layer,this.label),this._layer._legendUrl&&(this.el.legendLinks=[{type:"application/octet-stream",href:this._layer._legendUrl,rel:"legend",lang:null,hreflang:null,sizes:null}])}_runMutationObserver(elementsGroup){const _addStylesheetLink=mapLink=>{this.whenReady().then(()=>{this._layer.renderStyles(mapLink)})},_addStyleElement=mapStyle=>{this.whenReady().then(()=>{this._layer.renderStyles(mapStyle)})},_addExtentElement=mapExtent=>{this.whenReady().then(()=>{"function"==typeof mapExtent.whenReady?mapExtent.whenReady().then(()=>{delete this._layer.bounds,this._layer._calculateBounds(),this._validateDisabled()}):(delete this._layer.bounds,this._layer._calculateBounds(),this._validateDisabled())})},root=this.src?this.el.shadowRoot:this.el,pseudo=root instanceof ShadowRoot?":host":":scope",_addMetaElement=_mapMeta=>{this.whenReady().then(()=>{this._layer._calculateBounds(),this._validateDisabled()})};for(let i=0;i<elementsGroup.length;++i){const element=elementsGroup[i];switch(element.nodeName){case"MAP-LINK":element.link&&!element.link.isConnected&&_addStylesheetLink(element);break;case"MAP-STYLE":element.styleElement&&!element.styleElement.isConnected&&_addStyleElement(element);break;case"MAP-EXTENT":_addExtentElement(element);break;case"MAP-META":element.hasAttribute("name")&&("zoom"===element.getAttribute("name").toLowerCase()||"extent"===element.getAttribute("name").toLowerCase())&&element===root.querySelector(`${pseudo} > [name=${element.getAttribute("name")}]`)&&element.hasAttribute("content")&&_addMetaElement()}}}_bindMutationObserver(){this._observer=new MutationObserver(mutationList=>{for(let mutation of mutationList)"childList"===mutation.type&&this._runMutationObserver(mutation.addedNodes)}),this._observer.observe(this.src?this.el.shadowRoot:this.el,{childList:!0})}_validateDisabled(){const countTileLayers=()=>{let totalCount=0,disabledCount=0;return this._layer.eachLayer(layer=>{layer instanceof _MapTileLayer_dNMHgVBV_js__WEBPACK_IMPORTED_MODULE_2__.M&&(totalCount++,layer.isVisible()||disabledCount++)}),{totalCount,disabledCount}},countFeatureLayers=()=>{let totalCount=0,disabledCount=0;return this._layer.eachLayer(layer=>{layer instanceof _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.M&&(totalCount++,layer.isVisible()||disabledCount++)}),{totalCount,disabledCount}};setTimeout(()=>{let layer=this._layer,map=layer?._map;if(this._mql&&!this._mql.matches)return this.el.setAttribute("disabled",""),void(this.disabled=!0);if(map){const mapExtents=this.src?this.el.shadowRoot?.querySelectorAll("map-extent"):this.el.querySelectorAll("map-extent");let extentLinksReady=[];if(mapExtents)for(let i=0;i<mapExtents.length;i++)mapExtents[i].whenLinksReady&&extentLinksReady.push(mapExtents[i].whenLinksReady());Promise.allSettled(extentLinksReady).then(()=>{let disabledExtentCount=0,totalExtentCount=0,layerTypes=["_staticTileLayer","_mapmlvectors","_extentLayer"];for(let j=0;j<layerTypes.length;j++){let type=layerTypes[j];if(this.checked)if("_extentLayer"===type&&mapExtents&&mapExtents.length>0)for(let i=0;i<mapExtents.length;i++)totalExtentCount++,mapExtents[i]._validateDisabled&&mapExtents[i]._validateDisabled()&&disabledExtentCount++;else if("_mapmlvectors"===type){const featureLayerCounts=countFeatureLayers();totalExtentCount+=featureLayerCounts.totalCount,disabledExtentCount+=featureLayerCounts.disabledCount}else{const tileLayerCounts=countTileLayers();totalExtentCount+=tileLayerCounts.totalCount,disabledExtentCount+=tileLayerCounts.disabledCount}}disabledExtentCount===totalExtentCount&&0!==disabledExtentCount?(this.el.setAttribute("disabled",""),this.disabled=!0):(this.el.removeAttribute("disabled"),this.disabled=!1),this.toggleLayerControlDisabled()}).catch(e=>{console.log(e)})}},0)}toggleLayerControlDisabled(){let input=this._layerControlCheckbox,label=this._layerControlLabel,opacityControl=this._opacityControl,opacitySlider=this._opacitySlider,styleControl=this._styles;this.disabled?(input&&(input.disabled=!0),opacitySlider&&(opacitySlider.disabled=!0),label&&(label.style.fontStyle="italic"),opacityControl&&(opacityControl.style.fontStyle="italic"),styleControl&&(styleControl.style.fontStyle="italic",styleControl.querySelectorAll("input").forEach(i=>{i.disabled=!0}))):(input&&(input.disabled=!1),opacitySlider&&(opacitySlider.disabled=!1),label&&(label.style.fontStyle="normal"),opacityControl&&(opacityControl.style.fontStyle="normal"),styleControl&&(styleControl.style.fontStyle="normal",styleControl.querySelectorAll("input").forEach(i=>{i.disabled=!1})))}queryable(){let content=this.src?this.el.shadowRoot:this.el;return!(!(content?.querySelector("map-extent[checked] > map-link[rel=query]:not([disabled])")&&this.checked&&this._layer)||this.el.hasAttribute("hidden"))}getAlternateStyles(styleLinks){if(styleLinks.length>1){const stylesControl=document.createElement("details"),stylesControlSummary=document.createElement("summary"),mapEl=this.getMapEl();stylesControlSummary.innerText=mapEl?.locale?.lmStyle||"Style",stylesControl.appendChild(stylesControlSummary);for(let j=0;j<styleLinks.length;j++)stylesControl.appendChild(styleLinks[j].getLayerControlOption()),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.DomUtil.addClass(stylesControl,"mapml-layer-item-style mapml-control-layers");return stylesControl}return null}getOuterHTML(){let tempElement=this.el.cloneNode(!0);if(this.el.hasAttribute("src")){let newSrc=this._layer.getHref();tempElement.setAttribute("src",newSrc)}if(this.el.querySelector("map-link")){tempElement.querySelectorAll("map-link").forEach(mapLink=>{mapLink.hasAttribute("href")?mapLink.setAttribute("href",decodeURI(new URL(mapLink.getAttribute("href"),this.el.baseURI?this.el.baseURI:document.baseURI).href)):mapLink.hasAttribute("tref")&&mapLink.setAttribute("tref",decodeURI(new URL(mapLink.getAttribute("tref"),this.el.baseURI?this.el.baseURI:document.baseURI).href))})}let outerLayer=tempElement.outerHTML;return tempElement.remove(),outerLayer}zoomTo(){this.whenReady().then(()=>{let map=this.getMapEl()?._map,extent=this.extent,tL=extent.topLeft.pcrs,bR=extent.bottomRight.pcrs,layerBounds=_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.bounds(_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(tL.horizontal,tL.vertical),_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.l.point(bR.horizontal,bR.vertical)),center=map.options.crs.unproject(layerBounds.getCenter(!0)),maxZoom=extent.zoom.maxZoom,minZoom=extent.zoom.minZoom;map.setView(center,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.getMaxZoom(layerBounds,map,minZoom,maxZoom),{animate:!1})})}pasteFeature(feature){switch(typeof feature){case"string":feature.trim(),"<map-feature"===feature.slice(0,12)&&"</map-feature>"===feature.slice(-14)&&this.el.insertAdjacentHTML("beforeend",feature);break;case"object":"MAP-FEATURE"===feature.nodeName?.toUpperCase()&&this.el.appendChild(feature)}}_createLayerControlHTML(){this._boundCreateLayerControlHTML&&this._boundCreateLayerControlHTML().then(result=>{this._layerControlHTML=result,this.el._layerControlHTML=this._layerControlHTML,this._layerControlCheckbox=this.el._layerControlCheckbox,this._layerControlLabel=this.el._layerControlLabel,this._opacityControl=this.el._opacityControl,this._opacitySlider=this.el._opacitySlider,this._layerItemSettingsHTML=this.el._layerItemSettingsHTML,this._propertiesGroupAnatomy=this.el._propertiesGroupAnatomy,this._styles=this.el._styles,this._opacitySlider&&void 0!==this._opacity&&(this._opacitySlider.value=this._opacity.toString())})}async whenReady(){return new Promise((resolve,reject)=>{let interval,failureTimer;if(this.el._layer&&this._layerControlHTML&&(!this.src||this.el.shadowRoot?.childNodes.length))resolve();else{const layerElement=this.el;interval=setInterval(function testForLayer(layerElement){layerElement._layer&&layerElement._layerControlHTML&&(!layerElement.src||layerElement.shadowRoot?.childNodes.length)?(clearInterval(interval),clearTimeout(failureTimer),resolve()):layerElement._fetchError&&(clearInterval(interval),clearTimeout(failureTimer),reject("Error fetching layer content"))},200,layerElement),failureTimer=setTimeout(function layerNotDefined(){clearInterval(interval),clearTimeout(failureTimer),reject("Timeout reached waiting for layer to be ready")},5e3)}})}async whenElemsReady(){let elemsReady=[],target=this.src?this.el.shadowRoot:this.el;if(!target)return[];const extents=Array.from(target.querySelectorAll("map-extent")),features=Array.from(target.querySelectorAll("map-feature"));for(let elem of[...extents,...features])"function"==typeof elem.whenReady&&elemsReady.push(elem.whenReady());return Promise.allSettled(elemsReady)}mapml2geojson(options={}){return _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.U.mapml2geojson(this.el,options)}render(){return null}static get watchers(){return{src:["srcChanged"],checked:["checkedChanged"],_opacity:["opacityChanged"],media:["mediaChanged"],hidden:["hiddenChanged"]}}}},"./dist/esm/renderStyles-EYVT9Efh.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function renderStyles(mapStyleOrLink){let e=mapStyleOrLink.link||mapStyleOrLink.styleElement;if(void 0===e)return;let positionAndNode=(styleOrLink=>{const renderedSiblingStyles=Array.from(this._container.querySelectorAll(':scope > style, :scope > link[rel="stylesheet"]'));if(0===renderedSiblingStyles.length){const lastChild=this._container.lastChild;if(!lastChild)return{position:"afterbegin",node:this._container};const isSVG="SVG"===lastChild.nodeName,isContainer=lastChild.classList?.contains("mapml-vector-container")||lastChild.classList?.contains("mapml-extentlayer-container");return isSVG||isContainer?{position:"beforebegin",node:lastChild}:{position:"afterend",node:lastChild}}const mapStyleOrLinkLightDOMElement=styleOrLink.mapStyle||styleOrLink.mapLink;for(let i=0;i<renderedSiblingStyles.length;i++){const rendered=renderedSiblingStyles[i],siblingMapStyleOrLinkLightDOMElement=rendered.mapStyle||rendered.mapLink;if(siblingMapStyleOrLinkLightDOMElement&&mapStyleOrLinkLightDOMElement.compareDocumentPosition(siblingMapStyleOrLinkLightDOMElement)&Node.DOCUMENT_POSITION_FOLLOWING)return{position:"beforebegin",node:rendered}}return{position:"afterend",node:renderedSiblingStyles.at(-1)}})(e);positionAndNode.node.insertAdjacentElement(positionAndNode.position,e)}__webpack_require__.d(__webpack_exports__,{r:()=>renderStyles})}}]);