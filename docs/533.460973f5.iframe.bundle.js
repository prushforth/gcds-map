"use strict";(self.webpackChunkgcds_map=self.webpackChunkgcds_map||[]).push([[533],{"./dist/esm/map-select.entry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{map_select:()=>MapSelect});var _index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./dist/esm/index-PZrWUcjo.js");const MapSelect=class{constructor(hostRef){(0,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.r)(this,hostRef)}get el(){return(0,_index_PZrWUcjo_js__WEBPACK_IMPORTED_MODULE_0__.a)(this)}name;selectDetails;htmlSelect;connectedCallback(){this._createLayerControlForSelect(),this.el.selectdetails=this.selectDetails,this.el.htmlselect=this.htmlSelect}disconnectedCallback(){}nameChanged(newValue,oldValue){}_createLayerControlForSelect(){this.htmlSelect=this.transcribe();const selectdetails=document.createElement("details");selectdetails.className="mapml-layer-item-details mapml-control-layers";const selectsummary=document.createElement("summary"),selectSummaryLabel=document.createElement("label");selectSummaryLabel.innerText=this.name||"",this.el.hasAttribute("id")&&selectSummaryLabel.setAttribute("for",this.el.getAttribute("id")),selectsummary.appendChild(selectSummaryLabel),selectdetails.appendChild(selectsummary),selectdetails.appendChild(this.htmlSelect),this.selectDetails=selectdetails,this.htmlSelect.addEventListener("change",()=>{this.el.parentElement?._extentLayer?.redraw?.()})}transcribe(){const select=document.createElement("select"),elementAttrNames=this.el.getAttributeNames();for(let i=0;i<elementAttrNames.length;i++)select.setAttribute(elementAttrNames[i],this.el.getAttribute(elementAttrNames[i]));const options=this.el.querySelectorAll("map-option");for(let i=0;i<options.length;i++){const option=document.createElement("option"),optionAttrNames=options[i].getAttributeNames();for(let j=0;j<optionAttrNames.length;j++)option.setAttribute(optionAttrNames[j],options[i].getAttribute(optionAttrNames[j]));option.innerHTML=options[i].innerHTML,select.appendChild(option)}return select}async whenReady(){return new Promise((resolve,reject)=>{let interval,failureTimer;if(this.selectDetails)resolve();else{interval=setInterval(function testForSelect(selectElement){selectElement.selectDetails?(clearInterval(interval),clearTimeout(failureTimer),resolve()):selectElement.el.isConnected||(clearInterval(interval),clearTimeout(failureTimer),reject("map-select was disconnected while waiting to be ready"))},300,this),failureTimer=setTimeout(function selectNotDefined(){clearInterval(interval),clearTimeout(failureTimer),reject("Timeout reached waiting for map-select to be ready")},1e4)}})}render(){return null}static get watchers(){return{name:["nameChanged"]}}}}}]);