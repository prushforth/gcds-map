{"version":3,"file":"map-extent.entry.js","sources":["src/components/utils/mapml/layers/MapExtentLayer.js","src/components/utils/mapml/elementSupport/extents/createLayerControlForExtent.js","src/components/map-extent/map-extent.tsx"],"sourcesContent":["import { LayerGroup, DomUtil } from 'leaflet';\nimport { renderStyles } from '../elementSupport/layers/renderStyles.js';\n/**\n * Leaflet layer implementing map-extent elements\n * Extends LayerGroup to create a single layer containing \"templated\" layers\n * from child map-link[@tref] elements\n *\n * Similar in intent to MapFeatureLayer and MapTileLayer, which are LayerGroup or\n * GridLayer for map-feature and map-tile elements' leaflet layer object, respectively.\n *\n * This layer will be inserted into the LayerGroup hosted by the <map-layer>\n * immediately after creation, so that its index within the _layers array of\n * that LayerGroup will be equal to its z-index within the LayerGroup's container\n *\n * <map-tile row=\"10\" col=\"12\" src=\"url1\"></map-tile>  LayerGroup._layers[0] <- each *set* of adjacent tiles\n * <map-tile row=\"11\" col=\"12\" src=\"url2\"></map-tile>  LayerGroup._layers[0] <- is a *single* MapTileLayer\n * <map-extent units=\"OSMTILE\" checked hidden> LayerGroup._layers[1] *each* <map-extent> is a LayerGroup of Templated*Layer.js\n * <map-feature id=\"a\"> LayerGroup._layers[2] <- each *set* of adjacent features\n * <map-feature id=\"b\"> LayerGroup._layers[2] <- is a single MapFeatureLayer FeatureGroup\n * <map-tile row=\"10\" col=\"12\" src=\"url3\"></map-tile>  LayerGroup._layers[3]\n * <map-tile row=\"11\" col=\"12\" src=\"url4\"></map-tile>  LayerGroup._layers[3]\n * <map-feature id=\"c\"> LayerGroup._layers[4]\n * <map-feature id=\"d\"> LayerGroup._layers[4]\n * and so on\n *\n * A constraint of <map-extent> is that it cannot be nested inside a templated\n * layer i.e. if a <map-link> retrieves a text/mapml document that contains a\n * <map-extent>, it will be ignored, otherwise there could be infinite nested\n * fetches triggered. That is why the \"TemplatedFeaturesOrTilesLayer\" exists - it\n * excludes <map-extent> elements.\n */\nexport var MapExtentLayer = LayerGroup.extend({\n  initialize: function (options) {\n    // Call LayerGroup's initialize to trigger Leaflet's setup\n    LayerGroup.prototype.initialize.call(this, null, options);\n    this._container = DomUtil.create('div', 'leaflet-layer');\n    this._extentEl = this.options.extentEl;\n    this.changeOpacity(this.options.opacity);\n    this.setZIndex(options.zIndex);\n    // Add class to the container\n    DomUtil.addClass(this._container, 'mapml-extentlayer-container');\n  },\n  getEvents: function () {\n    return {\n      zoomstart: this._onZoomStart\n    };\n  },\n  _onZoomStart: function () {\n    this.closePopup();\n  },\n  getContainer: function () {\n    return this._container;\n  },\n  onAdd: function (map) {\n    LayerGroup.prototype.onAdd.call(this, map);\n    let pane = this.options.extentEl.parentLayer._layer._container;\n    pane.appendChild(this._container);\n  },\n  redraw: function () {\n    this.eachLayer(function (layer) {\n      layer.redraw();\n    });\n  },\n  setZIndex: function (zIndex) {\n    this.options.zIndex = zIndex;\n    this._updateZIndex();\n\n    return this;\n  },\n  _updateZIndex: function () {\n    if (\n      this._container &&\n      this.options.zIndex !== undefined &&\n      this.options.zIndex !== null\n    ) {\n      this._container.style.zIndex = this.options.zIndex;\n    }\n  },\n  onRemove: function () {\n    LayerGroup.prototype.onRemove.call(this, this._map);\n    DomUtil.remove(this._container);\n  },\n\n  _previousFeature: function (e) {\n    if (this._count + -1 >= 0) {\n      this._count--;\n      this._map.fire('featurepagination', {\n        i: this._count,\n        popup: this\n      });\n    }\n  },\n\n  _nextFeature: function (e) {\n    if (this._count + 1 < this._source._totalFeatureCount) {\n      this._count++;\n      this._map.fire('featurepagination', {\n        i: this._count,\n        popup: this\n      });\n    }\n  },\n\n  changeOpacity: function (opacity) {\n    this._container.style.opacity = opacity;\n    this._extentEl._opacity = opacity;\n    if (this._extentEl._opacitySlider)\n      this._extentEl._opacitySlider.value = opacity;\n  },\n  renderStyles\n});\nexport var mapExtentLayer = function (options) {\n  return new MapExtentLayer(options);\n};\n","import { DomUtil, SVG, DomEvent, stamp } from 'leaflet';\nimport { Util } from '../../Util.js';\n\nexport var createLayerControlExtentHTML = function () {\n  var extent = DomUtil.create('fieldset', 'mapml-layer-extent'),\n    extentProperties = DomUtil.create(\n      'div',\n      'mapml-layer-item-properties',\n      extent\n    ),\n    extentSettings = DomUtil.create('div', 'mapml-layer-item-settings', extent),\n    extentLabel = DomUtil.create(\n      'label',\n      'mapml-layer-item-toggle',\n      extentProperties\n    ),\n    input = DomUtil.create('input'),\n    svgExtentControlIcon = SVG.create('svg'),\n    extentControlPath1 = SVG.create('path'),\n    extentControlPath2 = SVG.create('path'),\n    extentNameIcon = DomUtil.create('span'),\n    extentItemControls = DomUtil.create(\n      'div',\n      'mapml-layer-item-controls',\n      extentProperties\n    ),\n    opacityControl = DomUtil.create(\n      'details',\n      'mapml-layer-item-details mapml-control-layers',\n      extentSettings\n    ),\n    extentOpacitySummary = DomUtil.create('summary', '', opacityControl),\n    mapEl = this.getMapEl(),\n    layerEl = this.getLayerEl(),\n    opacity = DomUtil.create('input', '', opacityControl);\n  extentSettings.hidden = true;\n  extent.setAttribute('aria-grabbed', 'false');\n\n  // append the svg paths\n  svgExtentControlIcon.setAttribute('viewBox', '0 0 24 24');\n  svgExtentControlIcon.setAttribute('height', '22');\n  svgExtentControlIcon.setAttribute('width', '22');\n  extentControlPath1.setAttribute('d', 'M0 0h24v24H0z');\n  extentControlPath1.setAttribute('fill', 'none');\n  extentControlPath2.setAttribute(\n    'd',\n    'M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z'\n  );\n  svgExtentControlIcon.appendChild(extentControlPath1);\n  svgExtentControlIcon.appendChild(extentControlPath2);\n\n  let mapSelects = this.el.querySelectorAll('map-select');\n  if (mapSelects.length) {\n    var frag = document.createDocumentFragment();\n    for (var i = 0; i < mapSelects.length; i++) {\n      frag.appendChild(mapSelects[i].selectdetails);\n    }\n    extentSettings.appendChild(frag);\n  }\n\n  let removeExtentButton = DomUtil.create(\n    'button',\n    'mapml-layer-item-remove-control',\n    extentItemControls\n  );\n  removeExtentButton.type = 'button';\n  removeExtentButton.title = mapEl.locale.lmRemoveExtent;\n  removeExtentButton.innerHTML = \"<span aria-hidden='true'>&#10005;</span>\";\n  removeExtentButton.classList.add('mapml-button');\n  removeExtentButton.addEventListener('click', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.el.remove();\n  });\n\n  let extentsettingsButton = DomUtil.create(\n    'button',\n    'mapml-layer-item-settings-control',\n    extentItemControls\n  );\n  extentsettingsButton.type = 'button';\n  extentsettingsButton.title = mapEl.locale.lmExtentSettings;\n  extentsettingsButton.setAttribute('aria-expanded', false);\n  extentsettingsButton.classList.add('mapml-button');\n  DomEvent.on(\n    extentsettingsButton,\n    'click',\n    (e) => {\n      if (extentSettings.hidden === true) {\n        extentsettingsButton.setAttribute('aria-expanded', true);\n        extentSettings.hidden = false;\n      } else {\n        extentsettingsButton.setAttribute('aria-expanded', false);\n        extentSettings.hidden = true;\n      }\n    },\n    this\n  );\n\n  extentNameIcon.setAttribute('aria-hidden', true);\n  extentLabel.appendChild(input);\n  extentsettingsButton.appendChild(extentNameIcon);\n  extentNameIcon.appendChild(svgExtentControlIcon);\n  extentOpacitySummary.innerText = mapEl.locale.lcOpacity;\n  extentOpacitySummary.id =\n    'mapml-extent-item-opacity-' + stamp(extentOpacitySummary);\n  opacity.setAttribute('type', 'range');\n  opacity.setAttribute('min', '0');\n  opacity.setAttribute('max', '1.0');\n  opacity.setAttribute('step', '0.1');\n  opacity.setAttribute(\n    'aria-labelledby',\n    'mapml-extent-item-opacity-' + stamp(extentOpacitySummary)\n  );\n  const changeOpacity = function (e) {\n    if (e && e.target && e.target.value >= 0 && e.target.value <= 1.0) {\n      this._extentLayer.changeOpacity(e.target.value);\n    }\n  };\n  opacity.setAttribute('value', this.opacity);\n  opacity.value = this._extentLayer._container.style.opacity || '1.0';\n  opacity.addEventListener('change', changeOpacity.bind(this));\n\n  var extentItemNameSpan = DomUtil.create(\n    'span',\n    'mapml-extent-item-name',\n    extentLabel\n  );\n  input.type = 'checkbox';\n  input.defaultChecked = this.checked;\n  extentItemNameSpan.innerHTML = this.label;\n  const changeCheck = function () {\n    this.checked = !this.checked;\n    this.el.dispatchEvent(new CustomEvent('map-change'));\n  };\n  // save for later access by API\n  this._layerControlCheckbox = input;\n  input.addEventListener('change', changeCheck.bind(this));\n  extentItemNameSpan.id =\n    'mapml-extent-item-name-{' + stamp(extentItemNameSpan) + '}';\n  extent.setAttribute('aria-labelledby', extentItemNameSpan.id);\n  extentItemNameSpan.extent = this.el;\n\n  extent.ontouchstart = extent.onmousedown = (downEvent) => {\n    if (\n      (downEvent.target.parentElement.tagName.toLowerCase() === 'label' &&\n        downEvent.target.tagName.toLowerCase() !== 'input') ||\n      downEvent.target.tagName.toLowerCase() === 'label'\n    ) {\n      downEvent.stopPropagation();\n      downEvent =\n        downEvent instanceof TouchEvent ? downEvent.touches[0] : downEvent;\n\n      let control = extent,\n        controls = extent.parentNode,\n        moving = false,\n        yPos = downEvent.clientY,\n        originalPosition = Array.from(\n          extent.parentElement.querySelectorAll('fieldset')\n        ).indexOf(extent);\n\n      document.body.ontouchmove = document.body.onmousemove = (moveEvent) => {\n        moveEvent.preventDefault();\n        moveEvent =\n          moveEvent instanceof TouchEvent ? moveEvent.touches[0] : moveEvent;\n\n        // Fixes flickering by only moving element when there is enough space\n        let offset = moveEvent.clientY - yPos;\n        moving = Math.abs(offset) > 15 || moving;\n        if (\n          (controls && !moving) ||\n          (controls && controls.childElementCount <= 1) ||\n          controls.getBoundingClientRect().top >\n            control.getBoundingClientRect().bottom ||\n          controls.getBoundingClientRect().bottom <\n            control.getBoundingClientRect().top\n        ) {\n          return;\n        }\n\n        controls.classList.add('mapml-draggable');\n        control.style.transform = 'translateY(' + offset + 'px)';\n        control.style.pointerEvents = 'none';\n\n        let x = moveEvent.clientX,\n          y = moveEvent.clientY,\n          root =\n            mapEl.tagName === 'GCDS-MAP'\n              ? mapEl.shadowRoot\n              : mapEl.querySelector('.mapml-web-map').shadowRoot,\n          elementAt = root.elementFromPoint(x, y),\n          swapControl =\n            !elementAt || !elementAt.closest('fieldset')\n              ? control\n              : elementAt.closest('fieldset');\n\n        swapControl =\n          Math.abs(offset) <= swapControl.offsetHeight ? control : swapControl;\n\n        control.setAttribute('aria-grabbed', 'true');\n        control.setAttribute('aria-dropeffect', 'move');\n        if (swapControl && controls === swapControl.parentNode) {\n          swapControl =\n            swapControl !== control.nextSibling\n              ? swapControl\n              : swapControl.nextSibling;\n          if (control !== swapControl) {\n            yPos = moveEvent.clientY;\n            control.style.transform = null;\n          }\n          controls.insertBefore(control, swapControl);\n        }\n      };\n\n      document.body.ontouchend = document.body.onmouseup = () => {\n        let newPosition = Array.from(\n          extent.parentElement.querySelectorAll('fieldset')\n        ).indexOf(extent);\n        control.setAttribute('aria-grabbed', 'false');\n        control.removeAttribute('aria-dropeffect');\n        control.style.pointerEvents = null;\n        control.style.transform = null;\n        if (originalPosition !== newPosition) {\n          let controlsElems = controls.children,\n            zIndex = 0;\n          for (let c of controlsElems) {\n            let extentEl = c.querySelector('span').extent;\n\n            extentEl.setAttribute('data-moving', '');\n            const node = layerEl.src ? layerEl.shadowRoot : layerEl;\n            node.append(extentEl);\n            extentEl.removeAttribute('data-moving');\n\n            extentEl.extentZIndex = zIndex;\n            extentEl._extentLayer.setZIndex(zIndex);\n            zIndex++;\n          }\n        }\n        controls.classList.remove('mapml-draggable');\n        document.body.ontouchmove =\n          document.body.onmousemove =\n          document.body.ontouchend =\n          document.body.onmouseup =\n            null;\n      };\n    }\n  };\n  this._extentRootFieldset = extent;\n  this._opacitySlider = opacity;\n  this._opacityControl = opacityControl;\n  this._layerControlLabel = extentLabel;\n  return extent;\n};\n","import { Component, Prop, Element, Watch, Method } from '@stencil/core';\nimport { bounds as Lbounds, point as Lpoint } from 'leaflet';\n\nimport { Util } from '../utils/mapml/Util.js';\nimport { mapExtentLayer } from '../utils/mapml/layers/MapExtentLayer.js';\nimport { createLayerControlExtentHTML } from '../utils/mapml/elementSupport/extents/createLayerControlForExtent.js';\nimport { calculatePosition } from '../utils/mapml/elementSupport/layers/calculatePosition.js';\n\ndeclare const M: any;\n@Component({\n  tag: 'map-extent',\n  shadow: true\n})\nexport class GcdsMapExtent {\n    @Element() el: HTMLElement;\n  @Prop({ mutable: true, reflect: true }) checked?: boolean = false;\n  @Prop({ mutable: true }) _label?: string;\n  @Prop({ mutable: true }) opacity?: number = 1;\n  @Prop({ mutable: true }) _opacity?: number;\n  @Prop({ reflect: true, mutable: true }) hidden: boolean = false;\n  @Prop({ mutable: false, reflect: true }) units!: string;\n  @Prop({ mutable: true, reflect: true }) disabled?: boolean = false;\n\n  // Internal getter for use within component\n  get label(): string {\n    return this._label || this.mapEl?.locale?.dfExtent || 'Sub-layer';\n  }\n\n  get opacityValue(): number {\n    return this._opacity ?? this.opacity ?? 1.0;\n  }\n\n  mapEl: any;\n  parentLayer: any;\n  _map: any;\n  _extentLayer: any;\n  _layerControlHTML: any;\n  _layerControlCheckbox: any;\n  _layerControlLabel: any;\n  _opacityControl: any;\n  _opacitySlider: any;\n  _selectdetails: any;\n  _observer: any;\n  _changeHandler: any;\n  _boundsCalculated: boolean = false;\n\n  @Watch('units')\n  unitsChanged(newValue: string, oldValue: string) {\n    if (this._extentLayer && oldValue !== newValue) {\n      // handle units change\n    }\n  }\n\n  @Watch('_label')\n  labelChanged() {\n    if (this._layerControlHTML) {\n      this._layerControlHTML.querySelector(\n        '.mapml-extent-item-name'\n      ).textContent = this.label;\n    }\n  }\n\n  @Watch('checked')\n  checkedChanged() {\n    if (this.parentLayer && this._extentLayer) {\n      this.parentLayer\n        .whenReady()\n        .then(() => {\n          this._handleChange();\n          this._calculateBounds();\n          if (this._layerControlCheckbox) {\n            this._layerControlCheckbox.checked = this.checked;\n          }\n        })\n        .catch((error) => {\n          console.log(\n            'Error while waiting on parentLayer for map-extent checked callback: ' +\n              error\n          );\n        });\n    }\n  }\n\n  @Watch('_opacity')\n  opacityChanged(newValue: number, oldValue: number) {\n    // This watcher handles programmatic changes to the opacity property\n    if (oldValue !== newValue && this._extentLayer) {\n      this._opacity = newValue;\n      this._extentLayer.changeOpacity(newValue);\n      // Update opacity slider if it exists\n      if (this._opacitySlider) {\n        this._opacitySlider.value = newValue.toString();\n      }\n    }\n  }\n\n  @Watch('hidden')\n  hiddenChanged(newValue: boolean, oldValue: boolean) {\n    // Only process hidden changes after the extent is fully initialized\n    // During initial load, this will be handled in connectedCallback\n    if (oldValue !== newValue && this._extentLayer && this._layerControlHTML) {\n      this._applyHiddenState(newValue);\n    }\n  }\n  \n  private _applyHiddenState(isHidden: boolean) {\n    if (!this._extentLayer || !this._layerControlHTML || !this.parentLayer) return;\n    \n    this.parentLayer\n      .whenReady()\n      .then(() => {\n        let extentsRootFieldset = this.parentLayer._propertiesGroupAnatomy;\n        // Get all map-extent elements and filter by component property, not DOM attribute\n        const allExtents = this.parentLayer.src\n          ? Array.from(this.parentLayer.shadowRoot.querySelectorAll(':host > map-extent'))\n          : Array.from(this.parentLayer.querySelectorAll(':scope > map-extent'));\n        \n        // Filter visible extents using component property\n        const visibleExtents = allExtents.filter(extent => !(extent as any).hidden);\n        let position = visibleExtents.indexOf(this.el);\n        \n        if (isHidden) {\n          // Hidden was set to true - remove from layer control (hide from user)\n          this._layerControlHTML.remove();\n        } else {\n          // Hidden was set to false - add back to layer control in calculated position\n          if (position === 0) {\n            extentsRootFieldset.insertAdjacentElement(\n              'afterbegin',\n              this._layerControlHTML\n            );\n          } else if (position > 0) {\n            (Array.from(\n              this.parentLayer.src\n                ? this.parentLayer.shadowRoot.querySelectorAll(\n                    ':host > map-extent:not([hidden])'\n                  )\n                : this.parentLayer.querySelectorAll(\n                    ':scope > map-extent:not([hidden])'\n                  )\n            )[position - 1] as any)._layerControlHTML.insertAdjacentElement(\n              'afterend',\n              this._layerControlHTML\n            );\n          }\n        }\n        this._validateLayerControlContainerHidden();\n      })\n      .catch(() => {\n        console.log(\n          'Error while waiting on parentLayer for map-extent hidden callback'\n        );\n      });\n  }\n\n  get extent() {\n    const getExtent = (extent) => {\n      return Object.assign(\n        Util._convertAndFormatPCRS(\n          extent._extentLayer.bounds,\n          M[extent.units],\n          extent.units\n        ),\n        { zoom: extent._extentLayer.zoomBounds }\n      );\n    };\n    const getCalculatedExtent = (extent) => {\n      extent._calculateBounds();\n      return getExtent(extent);\n    };\n\n    return this._extentLayer.bounds\n      ? getExtent(this)\n      : getCalculatedExtent(this);\n  }\n  get position() {\n    return calculatePosition(this.el);\n  }\n\n  getOuterHTML() {\n    let tempElement = this.el.cloneNode(true) as Element;\n\n    if (this.el.querySelector('map-link')) {\n      let mapLinks = tempElement.querySelectorAll('map-link');\n\n      mapLinks.forEach((mapLink) => {\n        if (mapLink.hasAttribute('href')) {\n          mapLink.setAttribute(\n            'href',\n            decodeURI(\n              new URL(\n                mapLink.getAttribute('href'),\n                this.el.baseURI ? this.el.baseURI : document.baseURI\n              ).href\n            )\n          );\n        } else if (mapLink.hasAttribute('tref')) {\n          mapLink.setAttribute(\n            'tref',\n            decodeURI(\n              new URL(\n                mapLink.getAttribute('tref'),\n                this.el.baseURI ? this.el.baseURI : document.baseURI\n              ).href\n            )\n          );\n        }\n      });\n    }\n\n    let outerLayer = tempElement.outerHTML;\n\n    tempElement.remove();\n\n    return outerLayer;\n  }\n\n  zoomTo() {\n    let extent = this.extent;\n    let map = this.getMapEl()._map,\n      xmin = extent.topLeft.pcrs.horizontal,\n      xmax = extent.bottomRight.pcrs.horizontal,\n      ymin = extent.bottomRight.pcrs.vertical,\n      ymax = extent.topLeft.pcrs.vertical,\n      bounds = Lbounds(Lpoint(xmin, ymin), Lpoint(xmax, ymax)),\n      center = map.options.crs.unproject(bounds.getCenter(true)),\n      maxZoom = extent.zoom.maxZoom,\n      minZoom = extent.zoom.minZoom;\n    map.setView(center, Util.getMaxZoom(bounds, map, minZoom, maxZoom), {\n      animate: false\n    });\n  }\n\n  getMapEl() {\n    return Util.getClosest(this.el, 'gcds-map');\n  }\n  getLayerEl() {\n    return Util.getClosest(this.el, 'map-layer,layer-');\n  }\n\n  async connectedCallback() {\n    // Initialize default values and bind handlers\n    this._opacity = this.opacityValue;\n    this._changeHandler = this._handleChange.bind(this);\n    this.parentLayer = (this.el as any).parentLayer = this.getLayerEl();\n    if (\n      this.el.hasAttribute('data-moving') ||\n      this.parentLayer?.hasAttribute('data-moving')\n    )\n      return;\n    this.mapEl = this.getMapEl();\n    // Add MapML compatibility methods to the element\n    (this.el as any).getMapEl = this.getMapEl.bind(this);\n    (this.el as any).getLayerEl = this.getLayerEl.bind(this);\n    (this.el as any).getLayerControlHTML = this.getLayerControlHTML.bind(this);\n    (this.el as any).zoomTo = this.zoomTo.bind(this);\n    (this.el as any)._validateDisabled = this._validateDisabled.bind(this);\n    (this.el as any).getMeta = this.getMeta.bind(this);\n    (this.el as any).getOuterHTML = this.getOuterHTML.bind(this);\n    // this is necessary for true \"whenReady\" being true because bounds\n    // being established is pretty important.  This is different from MapML.js;\n    // TODO it may be to port this idea back to MapML.js tbd.\n    Object.defineProperty(this.el, '_boundsCalculated', {\n      get: () => this._boundsCalculated,\n      configurable: true,\n      enumerable: true\n    });    \n      // Add extent getter on element for MapML compatibility\n    Object.defineProperty(this.el, 'extent', {\n      get: () => {\n        return this.extent;\n      },\n      configurable: true\n    });\n    \n    // Add label getter/setter on element for MapML compatibility\n    Object.defineProperty(this.el, 'label', {\n      get: () => {\n        return this.el.hasAttribute('label')\n          ? this.el.getAttribute('label')\n          : this.mapEl?.locale?.dfExtent || 'Sub-layer';\n      },\n      set: (val: string) => {\n        if (val) {\n          this.el.setAttribute('label', val);\n          // Update internal prop to trigger watcher\n          this._label = val;\n        }\n      },\n      configurable: true\n    });\n    \n    // Initialize _label from attribute if present\n    if (this.el.hasAttribute('label')) {\n      this._label = this.el.getAttribute('label');\n    }\n    \n    if (!this.mapEl) return;\n\n    await this.mapEl.whenProjectionDefined(this.units).catch(() => {\n      throw new Error('Undefined projection:' + this.units);\n    });\n    \n    // when projection is changed, the parent map-layer._layer is created (so whenReady is fulfilled) but then removed,\n    // then the map-extent disconnectedCallback will be triggered by map-layer._onRemove() (clear the shadowRoot)\n    // even before connectedCallback is finished\n    // in this case, the microtasks triggered by the fulfillment of the removed MapLayer should be stopped as well\n    // !this.isConnected <=> the disconnectedCallback has run before\n    if (!this.el.isConnected) return;\n\n    await this.mapEl.whenReady();\n    this._map = this.mapEl._map;\n    this.parentLayer?.addEventListener('map-change', this._changeHandler);\n    this.mapEl.addEventListener('map-projectionchange', this._changeHandler);\n    \n    this._extentLayer = mapExtentLayer({\n      opacity: this.opacityValue,\n      crs: M[this.units],\n      zIndex: this.position,\n      extentEl: this.el\n    });\n    // Publish to element for MapML compatibility\n    (this.el as any)._extentLayer = this._extentLayer;\n    // this._layerControlHTML is the fieldset for the extent in the LayerControl\n    // Create layer control HTML and ensure it's captured on the component instance\n    const layerControlHTML = createLayerControlExtentHTML.call(this);\n    this._layerControlHTML = layerControlHTML;\n    \n    // Also ensure the DOM element reference is synced (MapML compatibility)\n    (this.el as any)._layerControlHTML = layerControlHTML;\n    (this.el as any)._layerControlLabel = this._layerControlLabel;\n    (this.el as any)._layerControlCheckbox = this._layerControlCheckbox;\n    (this.el as any)._opacityControl = this._opacityControl;\n    (this.el as any)._opacitySlider = this._opacitySlider;\n    (this.el as any)._selectdetails = this._selectdetails;\n   // Wait for map-link elements to be ready before calculating bounds\n    await this._waitForTrefLinks();\n    this._calculateBounds();\n\n    // Handle initial checked state - add extent layer to parent if checked\n    this._handleChange();\n\n    // instead of children using parents' whenReady which can be cyclic,\n    // when this element is ready, run stuff that is only available after\n    // initialization\n    this._runMutationObserver(this.el.children);\n    // make sure same thing happens when children are added\n    this._bindMutationObserver();\n  }\n  /*\n   * Set up a function to watch additions of child elements of map-extent\n   * and to invoke desired side  effects of those additions via\n   * _runMutationObserver\n   */\n  _bindMutationObserver() {\n    this._observer = new MutationObserver((mutationList) => {\n      for (let mutation of mutationList) {\n        // Handle attribute removals for 'label'\n        if (mutation.type === 'attributes' && mutation.attributeName === 'label') {\n          if (!this.el.hasAttribute('label')) {\n            this._label = this.mapEl?.locale?.dfExtent || 'Sub-layer';\n          }\n        }\n        // the attributes changes should be handled by attributeChangedCallback()\n        if (mutation.type === 'childList') {\n          this._runMutationObserver(mutation.addedNodes);\n        }\n      }\n    });\n    // Observe both childList and attribute changes for 'label'\n    this._observer.observe(this.el, {\n      childList: true,\n      attributes: true,\n      attributeFilter: ['label']\n    });\n  }\n  _runMutationObserver(elementsGroup) {\n    const _addMetaElement = (_mapMeta) => {\n      this.whenReady().then(() => {\n        this._calculateBounds();\n        this._validateDisabled();\n      });\n    };\n    const _addStylesheetLink = (mapLink) => {\n      this.whenReady().then(() => {\n        this._extentLayer.renderStyles(mapLink);\n      });\n    };\n    const _addStyleElement = (mapStyle) => {\n      this.whenReady().then(() => {\n        this._extentLayer.renderStyles(mapStyle);\n      });\n    };\n    for (let i = 0; i < elementsGroup.length; ++i) {\n      let element = elementsGroup[i];\n      switch (element.nodeName) {\n        case 'MAP-META':\n          const name =\n            element.hasAttribute('name') &&\n            (element.getAttribute('name').toLowerCase() === 'zoom' ||\n              element.getAttribute('name').toLowerCase() === 'extent');\n          if (name && element.hasAttribute('content')) {\n            _addMetaElement(element);\n          }\n          break;\n        case 'MAP-LINK':\n          if (element.link && !element.link.isConnected)\n            _addStylesheetLink(element);\n          break;\n        case 'MAP-STYLE':\n          if (element.styleElement && !element.styleElement.isConnected) {\n            _addStyleElement(element);\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n  getLayerControlHTML() {\n    return this._layerControlHTML;\n  }\n  _projectionMatch() {\n    return (\n      this.units.toUpperCase() === this._map.options.projection.toUpperCase()\n    );\n  }\n  _validateDisabled() {\n    if (!this._extentLayer) return;\n    let templates = this.el.querySelectorAll(\n      'map-link[rel=image],map-link[rel=tile],map-link[rel=features],map-link[rel=query]'\n    );\n    const noTemplateVisible = () => {\n      let totalTemplateCount = templates.length,\n        disabledTemplateCount = 0;\n      for (let j = 0; j < templates.length; j++) {\n        if (!(templates[j] as any).isVisible()) {\n          disabledTemplateCount++;\n        }\n      }\n      return disabledTemplateCount === totalTemplateCount;\n    };\n    if (!this._projectionMatch() || noTemplateVisible()) {\n      this.el.setAttribute('disabled', '');\n      this.disabled = true;\n    } else {\n      this.el.removeAttribute('disabled');\n      this.disabled = false;\n    }\n    this.toggleLayerControlDisabled();\n    this._handleChange();\n    return this.disabled;\n  }\n  getMeta(metaName) {\n    let name = metaName.toLowerCase();\n    if (name !== 'extent' && name !== 'zoom' && name !== 'cs') return;\n    return this.parentLayer.src\n      ? this.el.querySelector(`:scope > map-meta[name=${name}]`) ||\n          this.parentLayer.shadowRoot.querySelector(\n            `:host > map-meta[name=${name}]`\n          )\n      : this.el.querySelector(`:scope > map-meta[name=${name}]`) ||\n          this.parentLayer.querySelector(`:scope > map-meta[name=${name}]`);\n  }\n  // disable/italicize layer control elements based on the map-extent.disabled property\n  toggleLayerControlDisabled() {\n    let input = this._layerControlCheckbox,\n      label = this._layerControlLabel, // access to the label for the specific map-extent\n      opacityControl = this._opacityControl,\n      opacitySlider = this._opacitySlider,\n      selectDetails = this._selectdetails;\n    if (this.disabled) {\n      // update the status of layerControl\n      input.disabled = true;\n      opacitySlider.disabled = true;\n      label.style.fontStyle = 'italic';\n      opacityControl.style.fontStyle = 'italic';\n      if (selectDetails) {\n        selectDetails.forEach((i) => {\n          i.querySelectorAll('select').forEach((j) => {\n            j.disabled = true;\n            j.style.fontStyle = 'italic';\n          });\n          i.style.fontStyle = 'italic';\n        });\n      }\n    } else {\n      input.disabled = false;\n      opacitySlider.disabled = false;\n      label.style.fontStyle = 'normal';\n      opacityControl.style.fontStyle = 'normal';\n      if (selectDetails) {\n        selectDetails.forEach((i) => {\n          i.querySelectorAll('select').forEach((j) => {\n            j.disabled = false;\n            j.style.fontStyle = 'normal';\n          });\n          i.style.fontStyle = 'normal';\n        });\n      }\n    }\n  }\n\n  _handleChange() {\n    // add _extentLayer to map if map-extent is checked, otherwise remove it\n    if (this.checked && !this.disabled && this.parentLayer._layer) {\n      // can be added to MapLayer LayerGroup no matter map-layer is checked or not\n      this._extentLayer.addTo(this.parentLayer._layer);\n      this._extentLayer.setZIndex(this.position);\n    } else {\n      this.parentLayer._layer?.removeLayer(this._extentLayer);\n    }\n    // change the checkbox in the layer control to match map-extent.checked\n    // doesn't trigger the event handler because it's not user-caused AFAICT\n  }\n  _validateLayerControlContainerHidden() {\n    let extentsFieldset = this.parentLayer._propertiesGroupAnatomy;\n    if (!extentsFieldset) return;\n    \n    // Get all map-extent elements (not just non-hidden ones)\n    const allExtents = this.parentLayer.src\n      ? Array.from(this.parentLayer.shadowRoot.querySelectorAll(':host > map-extent'))\n      : Array.from(this.parentLayer.querySelectorAll(':scope > map-extent'));\n    \n    // Count visible extents using component property, not DOM attribute\n    const numberOfVisibleSublayers = allExtents.filter(extent => !(extent as any).hidden).length;\n    \n    if (numberOfVisibleSublayers === 0) {\n      extentsFieldset.setAttribute('hidden', '');\n    } else {\n      extentsFieldset.removeAttribute('hidden');\n    }\n  }\n  disconnectedCallback() {\n    // in case of projection change, the disconnectedcallback will be triggered by removing map-layer._layer even before\n    // map-extent.connectedcallback is finished (because it will wait for the map-layer to be ready)\n    // !this._extentLayer <=> this.connectedCallback has not yet been finished before disconnectedCallback is triggered\n    if (\n      this.el.hasAttribute('data-moving') ||\n      this.parentLayer?.hasAttribute('data-moving') ||\n      !this._extentLayer\n    )\n      return;\n    this._validateLayerControlContainerHidden();\n    // remove layer control for map-extent from layer control DOM\n    // TODO: for the case of projection change, the layer control for map-extent has been created while _extentLayer has not yet been ready\n    if (this._layerControlHTML) {\n      this._layerControlHTML.remove();\n    }\n    if (this.parentLayer?._layer) {\n      this.parentLayer._layer.removeLayer(this._extentLayer);\n    }\n    if (this.parentLayer) {\n      this.parentLayer.removeEventListener('map-change', this._changeHandler);\n    }\n    if (this.mapEl) {\n      this.mapEl.removeEventListener('map-projectionchange', this._changeHandler);\n    }\n    this._boundsCalculated = false;\n    delete this._extentLayer;\n    if (this.parentLayer?._layer) delete this.parentLayer._layer.bounds;\n  }\n  \n  async _waitForTrefLinks() {\n    // Wait only for links with explicit tref attributes to have _templateVars initialized\n    // This is needed because _calculateBounds() calls link.getZoomBounds() and link.getBounds()\n    // which depend on _templateVars being set\n    // Links without tref would create circular dependency if we waited for them\n    const templates = this.el.querySelectorAll(\n      'map-link[rel=image][tref],map-link[rel=tile][tref],map-link[rel=features][tref],map-link[rel=query][tref]'\n    );\n    const linksVarsReady = [];\n    for (let link of Array.from(templates)) {\n      // Wait for _templateVars to be set, not for _templatedLayer to be created\n      linksVarsReady.push(\n        new Promise<void>((resolve) => {\n          if ((link as any)._templateVars) {\n            resolve();\n          } else {\n            const checkInterval = setInterval(() => {\n              if ((link as any)._templateVars) {\n                clearInterval(checkInterval);\n                resolve();\n              }\n            }, 10);\n            // Timeout after 1 second\n            setTimeout(() => {\n              clearInterval(checkInterval);\n              resolve(); // Resolve anyway to not block forever\n            }, 1000);\n          }\n        })\n      );\n    }\n    return Promise.all(linksVarsReady);\n  }\n  \n  _calculateBounds() {\n    delete this._extentLayer.bounds;\n    delete this._extentLayer.zoomBounds;\n    if (this.parentLayer._layer) delete this.parentLayer._layer.bounds;\n    let templates = this.el.querySelectorAll(\n      'map-link[rel=image]:not([disabled]),map-link[rel=tile]:not([disabled]),map-link[rel=features]:not([disabled]),map-link[rel=query]:not([disabled])'\n    );\n\n    // initialize bounds from this.scope > map-meta\n    let bounds = this.el.querySelector(':scope > map-meta[name=extent][content]')\n      ? Util.getBoundsFromMeta(this.el) // TODO rewrite this pile of doo doo\n      : undefined;\n\n    // initialize zoom bounds from this.scope > map-meta\n    let zoomBounds = this.el.querySelector(':scope > map-meta[name=zoom][content]')\n      ? Util.getZoomBoundsFromMeta(this.el) // TODO rewrite this pile of doo doo\n      : undefined;\n\n    // bounds should be able to be calculated unconditionally, not depend on map-extent.checked\n    for (let j = 0; j < templates.length; j++) {\n      const templateZoomBounds = (templates[j] as any).getZoomBounds(),\n        templateBounds = (templates[j] as any).getBounds();\n      let zoomMax =\n          zoomBounds && zoomBounds.hasOwnProperty('maxZoom')\n            ? zoomBounds.maxZoom\n            : -Infinity,\n        zoomMin =\n          zoomBounds && zoomBounds.hasOwnProperty('minZoom')\n            ? zoomBounds.minZoom\n            : Infinity,\n        minNativeZoom =\n          zoomBounds && zoomBounds.hasOwnProperty('minNativeZoom')\n            ? zoomBounds.minNativeZoom\n            : Infinity,\n        maxNativeZoom =\n          zoomBounds && zoomBounds.hasOwnProperty('maxNativeZoom')\n            ? zoomBounds.maxNativeZoom\n            : -Infinity;\n      if (!zoomBounds) {\n        zoomBounds = Object.assign({}, templateZoomBounds);\n      } else {\n        zoomMax = Math.max(zoomMax, templateZoomBounds.maxZoom);\n        zoomMin = Math.min(zoomMin, templateZoomBounds.minZoom);\n        maxNativeZoom = Math.max(\n          maxNativeZoom,\n          templateZoomBounds.maxNativeZoom\n        );\n        minNativeZoom = Math.min(\n          minNativeZoom,\n          templateZoomBounds.minNativeZoom\n        );\n        zoomBounds.minZoom = zoomMin;\n        zoomBounds.maxZoom = zoomMax;\n        zoomBounds.minNativeZoom = minNativeZoom;\n        zoomBounds.maxNativeZoom = maxNativeZoom;\n      }\n      if (!bounds) {\n        bounds = Lbounds(templateBounds.min, templateBounds.max);\n      } else {\n        bounds.extend(templateBounds);\n      }\n    }\n    if (bounds) {\n      this._extentLayer.bounds = bounds;\n    } else {\n      this._extentLayer.bounds = Lbounds(\n        M[this.units].options.bounds.min,\n        M[this.units].options.bounds.max\n      );\n    }\n    if (!zoomBounds) zoomBounds = {};\n    if (!zoomBounds.hasOwnProperty('minZoom')) {\n      zoomBounds.minZoom = 0;\n    }\n    if (!zoomBounds.hasOwnProperty('maxZoom')) {\n      zoomBounds.maxZoom = M[this.units].options.resolutions.length - 1;\n    }\n    if (\n      !zoomBounds.hasOwnProperty('minNativeZoom') ||\n      zoomBounds.minNativeZoom === Infinity\n    ) {\n      zoomBounds.minNativeZoom = zoomBounds.minZoom;\n    }\n    if (\n      !zoomBounds.hasOwnProperty('maxNativeZoom') ||\n      zoomBounds.maxNativeZoom === -Infinity\n    ) {\n      zoomBounds.maxNativeZoom = zoomBounds.maxZoom;\n    }\n    this._extentLayer.zoomBounds = zoomBounds;\n    this._boundsCalculated = true;\n  }\n\n  @Method()\n  async whenReady() {\n    return new Promise<void>((resolve, reject) => {\n      let interval, failureTimer;\n      if (this._extentLayer && this._boundsCalculated) {\n        resolve();\n      } else {\n        let extentElement = this.el;\n        interval = setInterval(testForExtent, 300, extentElement);\n        failureTimer = setTimeout(extentNotDefined, 10000);\n      }\n      function testForExtent(extentElement) {\n        if (extentElement._extentLayer && extentElement._boundsCalculated) {\n          clearInterval(interval);\n          clearTimeout(failureTimer);\n          resolve();\n        } else if (!extentElement.isConnected) {\n          clearInterval(interval);\n          clearTimeout(failureTimer);\n          reject('map-extent was disconnected while waiting to be ready');\n        }\n      }\n      function extentNotDefined() {\n        clearInterval(interval);\n        clearTimeout(failureTimer);\n        reject('Timeout reached waiting for extent to be ready');\n      }\n    });\n  }\n\n  render() {\n    return null;\n  }\n\n  @Method()\n  async whenLinksReady() {\n    let templates = this.el.querySelectorAll(\n      'map-link[rel=image],map-link[rel=tile],map-link[rel=features],map-link[rel=query]'\n    );\n    let linksReady = [];\n    for (let link of Array.from(templates)) {\n      linksReady.push((link as any).whenReady());\n    }\n    return Promise.allSettled(linksReady);\n  }\n}\n"],"names":["LayerGroup","DomUtil","SVG","DomEvent","stamp","Lbounds","Lpoint"],"mappings":"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"}