import{r as e,a as t}from"./p-PZrWUcjo.js";const s=class{constructor(t){e(this,t)}get el(){return t(this)}name;selectDetails;htmlSelect;connectedCallback(){this._createLayerControlForSelect();this.el.selectdetails=this.selectDetails;this.el.htmlselect=this.htmlSelect}disconnectedCallback(){}nameChanged(e,t){}_createLayerControlForSelect(){this.htmlSelect=this.transcribe();const e=document.createElement("details");e.className="mapml-layer-item-details mapml-control-layers";const t=document.createElement("summary");const s=document.createElement("label");s.innerText=this.name||"";if(this.el.hasAttribute("id"))s.setAttribute("for",this.el.getAttribute("id"));t.appendChild(s);e.appendChild(t);e.appendChild(this.htmlSelect);this.selectDetails=e;this.htmlSelect.addEventListener("change",(()=>{this.el.parentElement?._extentLayer?.redraw?.()}))}transcribe(){const e=document.createElement("select");const t=this.el.getAttributeNames();for(let s=0;s<t.length;s++){e.setAttribute(t[s],this.el.getAttribute(t[s]))}const s=this.el.querySelectorAll("map-option");for(let t=0;t<s.length;t++){const n=document.createElement("option");const a=s[t].getAttributeNames();for(let e=0;e<a.length;e++){n.setAttribute(a[e],s[t].getAttribute(a[e]))}n.innerHTML=s[t].innerHTML;e.appendChild(n)}return e}async whenReady(){return new Promise(((e,t)=>{let s,n;if(this.selectDetails){e()}else{const e=this;s=setInterval(a,300,e);n=setTimeout(i,1e4)}function a(a){if(a.selectDetails){clearInterval(s);clearTimeout(n);e()}else if(!a.el.isConnected){clearInterval(s);clearTimeout(n);t("map-select was disconnected while waiting to be ready")}}function i(){clearInterval(s);clearTimeout(n);t("Timeout reached waiting for map-select to be ready")}}))}render(){return null}static get watchers(){return{name:["nameChanged"]}}};export{s as map_select};
//# sourceMappingURL=p-d581fd5e.entry.js.map