<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Custom TCRS Test - Invalid Projection Name</title>
  <script type="module" src="/build/gcds-map.esm.js"></script>
</head>

<body>
  <gcds-map zoom="2" lat="45" lon="-90" controls>
    <map-layer label="Static MapML with tiles" checked>
      <map-meta name="zoom" content="min=1,max=4"></map-meta>
      <map-meta name="projection" content="basic"></map-meta>

      <map-tile zoom="2" row="-23" col="-9" src="/test/data/tiles/cbmt/3/c17_r18.png"></map-tile>
      <map-tile zoom="2" row="-23" col="-10" src="/test/data/tiles/cbmt/3/c16_r18.png"></map-tile>
    </map-layer>
  </gcds-map>

  <script type="module">
    let badProjectionName = `
        {
          "projection":"oth:er",
          "proj4string":"+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs",
          "resolutions":[
            38364.660062653464,
            22489.62831258996,
            13229.193125052918,
            7937.5158750317505,
            4630.2175937685215,
            2645.8386250105837,
            1587.5031750063501,
            926.0435187537042,
            529.1677250021168,
            317.50063500127004,
            185.20870375074085,
            111.12522225044451,
            66.1459656252646,
            38.36466006265346,
            22.48962831258996,
            13.229193125052918,
            7.9375158750317505,
            4.6302175937685215,
            2.6458386250105836,
            1.5875031750063502,
            0.92604351875370428,
            0.52916772500211673,
            0.31750063500127002,
            0.18520870375074083,
            0.11112522225044451,
            0.066145965625264591
          ],
          "origin":[-34655800, 39310000],
          "bounds":[[-34655800, -39000000], [10000000, 39310000]],
          "tilesize":256
        }`
    var msg = document.createElement("p");
    document.body.append(msg);
    msg.innerHTML = "passing";
    await customElements.whenDefined('gcds-map');
    let map = document.querySelector("gcds-map");
    await map.whenReady();
    let badProj = map.defineCustomProjection(badProjectionName);
    msg.innerHTML = "failing";
    map.projection = badProj;
  </script>
  
</body>

</html>
