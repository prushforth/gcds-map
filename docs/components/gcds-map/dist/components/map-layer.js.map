{"file":"map-layer.js","mappings":"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","names":["MapLayer","LayerGroup","setOptions","DomUtil","bounds","DomEvent","latLngBounds","latLng","SVG","stamp","__stencil_proxyCustomElement","HTMLElement","MapLayerModule.mapLayer","point"],"sources":["src/components/utils/mapml/layers/MapLayer.js","src/components/utils/mapml/elementSupport/layers/createLayerControlForLayer.js","src/components/map-layer/map-layer.tsx"],"sourcesContent":["import {\n  LayerGroup,\n  setOptions,\n  DomUtil,\n  DomEvent,\n  bounds,\n  latLng,\n  latLngBounds\n} from 'leaflet';\nimport { Util } from '../Util.js';\nimport { MapFeatureLayer } from './MapFeatureLayer.js';\nimport { MapTileLayer } from './MapTileLayer.js';\nimport { featureRenderer } from '../features/featureRenderer.js';\nimport { renderStyles } from '../elementSupport/layers/renderStyles.js';\n\nexport var MapLayer = LayerGroup.extend({\n  options: {\n    zIndex: 0,\n    opacity: '1.0'\n  },\n  // initialize is executed before the layer is added to a map\n  initialize: function (href, layerEl, options) {\n    // in the custom element, the attribute is actually 'src'\n    // the _href version is the URL received from map-layer@src\n    LayerGroup.prototype.initialize.call(this, null, options);\n    if (href) {\n      this._href = href;\n    }\n    this._layerEl = layerEl;\n    this._content = layerEl.src ? layerEl.shadowRoot : layerEl;\n    setOptions(this, options);\n    this._container = DomUtil.create('div', 'leaflet-layer');\n    this.changeOpacity(this.options.opacity);\n    DomUtil.addClass(this._container, 'mapml-layer');\n\n    // hit the service to determine what its extent might be\n    // OR use the extent of the content provided\n\n    this._initialize(this._content);\n  },\n  getContainer: function () {\n    return this._container;\n  },\n  setZIndex: function (zIndex) {\n    this.options.zIndex = zIndex;\n    this._updateZIndex();\n\n    return this;\n  },\n  getHref: function () {\n    return this._href ?? '';\n  },\n  _updateZIndex: function () {\n    if (\n      this._container &&\n      this.options.zIndex !== undefined &&\n      this.options.zIndex !== null\n    ) {\n      this._container.style.zIndex = this.options.zIndex;\n    }\n  },\n  changeOpacity: function (opacity) {\n    this._container.style.opacity = opacity;\n    this._layerEl._opacity = opacity;\n    if (this._layerEl._opacitySlider)\n      this._layerEl._opacitySlider.value = opacity;\n  },\n  titleIsReadOnly() {\n    return !!this._titleIsReadOnly;\n  },\n  setName(newName) {\n    // a layer's accessible name is set by the <map-title>, if present\n    // if it's not available the <map-layer label=\"accessible-name\"> attribute\n    // can be used\n    if (!this.titleIsReadOnly()) {\n      this._title = newName;\n      this._layerEl._layerControlHTML.querySelector(\n        '.mapml-layer-item-name'\n      ).innerHTML = newName;\n    }\n  },\n  getName() {\n    return this._title;\n  },\n\n  onAdd: function (map) {\n    this.getPane().appendChild(this._container);\n    LayerGroup.prototype.onAdd.call(this, map);\n\n    this.setZIndex(this.options.zIndex);\n    map.on('popupopen', this._attachSkipButtons, this);\n  },\n\n  _calculateBounds: function () {\n    delete this.bounds;\n    delete this.zoomBounds;\n    let bnds, zoomBounds;\n    let layerTypes = ['_staticTileLayer', '_mapmlvectors', '_extentLayer'];\n    bnds =\n      this._layerEl.src &&\n      this._layerEl.shadowRoot.querySelector(\n        ':host > map-meta[name=extent][content]'\n      )\n        ? Util.getBoundsFromMeta(this._layerEl.shadowRoot)\n        : this._layerEl.querySelector(':scope > map-meta[name=extent][content]')\n        ? Util.getBoundsFromMeta(this._layerEl)\n        : undefined;\n    zoomBounds =\n      this._layerEl.src &&\n      this._layerEl.shadowRoot.querySelector(\n        ':host > map-meta[name=zoom][content]'\n      )\n        ? Util.getZoomBoundsFromMeta(this._layerEl.shadowRoot)\n        : this._layerEl.querySelector(':scope > map-meta[name=zoom][content]')\n        ? Util.getZoomBoundsFromMeta(this._layerEl)\n        : undefined;\n    const mapExtents = this._layerEl.src\n      ? this._layerEl.shadowRoot.querySelectorAll('map-extent')\n      : this._layerEl.querySelectorAll('map-extent');\n    layerTypes.forEach((type) => {\n      let zoomMax, zoomMin, minNativeZoom, maxNativeZoom;\n      if (zoomBounds) {\n        zoomMax = zoomBounds.maxZoom;\n        zoomMin = zoomBounds.minZoom;\n        maxNativeZoom = zoomBounds.maxNativeZoom\n          ? zoomBounds.maxNativeZoom\n          : -Infinity;\n        minNativeZoom = zoomBounds.minNativeZoom\n          ? zoomBounds.minNativeZoom\n          : Infinity;\n      }\n      if (type === '_extentLayer' && mapExtents.length) {\n        for (let i = 0; i < mapExtents.length; i++) {\n          if (mapExtents[i]._extentLayer?.bounds) {\n            let mapExtentLayer = mapExtents[i]._extentLayer;\n            if (!bnds) {\n              bnds = bounds(\n                mapExtentLayer.bounds.min,\n                mapExtentLayer.bounds.max\n              );\n            } else {\n              bnds.extend(mapExtentLayer.bounds);\n            }\n            if (mapExtentLayer.zoomBounds) {\n              if (!zoomBounds) {\n                zoomBounds = mapExtentLayer.zoomBounds;\n              } else {\n                // Extend layer zoombounds\n                zoomMax = Math.max(zoomMax, mapExtentLayer.zoomBounds.maxZoom);\n                zoomMin = Math.min(zoomMin, mapExtentLayer.zoomBounds.minZoom);\n                maxNativeZoom = Math.max(\n                  maxNativeZoom,\n                  mapExtentLayer.zoomBounds.maxNativeZoom\n                );\n                minNativeZoom = Math.min(\n                  minNativeZoom,\n                  mapExtentLayer.zoomBounds.minNativeZoom\n                );\n                zoomBounds.minZoom = zoomMin;\n                zoomBounds.maxZoom = zoomMax;\n                zoomBounds.minNativeZoom = minNativeZoom;\n                zoomBounds.maxNativeZoom = maxNativeZoom;\n              }\n            }\n          }\n        }\n      } else if (type === '_mapmlvectors') {\n        // Iterate through individual MapFeatureLayer instances in the LayerGroup\n        this.eachLayer(function (layer) {\n          // Check if this is a MapFeatureLayer\n          if (layer instanceof MapFeatureLayer && layer.layerBounds) {\n            if (!bnds) {\n              bnds = layer.layerBounds;\n            } else {\n              bnds.extend(layer.layerBounds);\n            }\n          }\n          if (layer instanceof MapFeatureLayer && layer.zoomBounds) {\n            if (!zoomBounds) {\n              zoomBounds = layer.zoomBounds;\n            } else {\n              // Extend layer zoombounds\n              zoomMax = Math.max(zoomMax, layer.zoomBounds.maxZoom);\n              zoomMin = Math.min(zoomMin, layer.zoomBounds.minZoom);\n              maxNativeZoom = Math.max(\n                maxNativeZoom,\n                layer.zoomBounds.maxNativeZoom\n              );\n              minNativeZoom = Math.min(\n                minNativeZoom,\n                layer.zoomBounds.minNativeZoom\n              );\n              zoomBounds.minZoom = zoomMin;\n              zoomBounds.maxZoom = zoomMax;\n              zoomBounds.minNativeZoom = minNativeZoom;\n              zoomBounds.maxNativeZoom = maxNativeZoom;\n            }\n          }\n        });\n      } else {\n        // inline tiles\n        this.eachLayer((layer) => {\n          if (layer instanceof MapTileLayer) {\n            if (layer.layerBounds) {\n              if (!bnds) {\n                bnds = layer.layerBounds;\n              } else {\n                bnds.extend(layer.layerBounds);\n              }\n            }\n\n            if (layer.zoomBounds) {\n              // Extend zoomBounds with layer zoomBounds\n              zoomMax = Math.max(zoomMax, layer.zoomBounds.maxZoom);\n              zoomMin = Math.min(zoomMin, layer.zoomBounds.minZoom);\n              maxNativeZoom = Math.max(\n                maxNativeZoom,\n                layer.zoomBounds.maxNativeZoom\n              );\n              minNativeZoom = Math.min(\n                minNativeZoom,\n                layer.zoomBounds.minNativeZoom\n              );\n              zoomBounds.minZoom = zoomMin;\n              zoomBounds.maxZoom = zoomMax;\n              zoomBounds.minNativeZoom = minNativeZoom;\n              zoomBounds.maxNativeZoom = maxNativeZoom;\n            }\n          }\n        });\n      }\n    });\n    if (bnds) {\n      this.bounds = bnds;\n    } else {\n      let projectionBounds = M[this.options.projection].options.bounds;\n      this.bounds = bounds(projectionBounds.min, projectionBounds.max);\n    }\n    // we could get here and zoomBounds might still not be defined (empty layer)\n    if (!zoomBounds) zoomBounds = {};\n    if (!zoomBounds.minZoom) {\n      zoomBounds.minZoom = 0;\n    }\n    if (!zoomBounds.maxZoom) {\n      zoomBounds.maxZoom =\n        M[this.options.projection].options.resolutions.length - 1;\n    }\n    if (zoomBounds.minNativeZoom === Infinity) {\n      zoomBounds.minNativeZoom = zoomBounds.minZoom;\n    }\n    if (zoomBounds.maxNativeZoom === -Infinity) {\n      zoomBounds.maxNativeZoom = zoomBounds.maxZoom;\n    }\n    this.zoomBounds = zoomBounds;\n  },\n\n  onRemove: function (map) {\n    LayerGroup.prototype.onRemove.call(this, map);\n    DomUtil.remove(this._container);\n    map.off('popupopen', this._attachSkipButtons);\n  },\n  getAttribution: function () {\n    return this.options.attribution;\n  },\n  getBase: function () {\n    return new URL(\n      this._content.querySelector('map-base')\n        ? this._content.querySelector('map-base').getAttribute('href')\n        : this._content.nodeName === 'MAP-LAYER' ||\n          this._content.nodeName === 'LAYER-'\n        ? this._content.baseURI\n        : this._href,\n      this._href\n    ).href;\n  },\n  renderStyles,\n  _initialize: function () {\n    var layer = this;\n    var base = layer.getBase(),\n      mapml = this._content;\n    parseLicenseAndLegend();\n    setLayerTitle();\n    // update controls if needed based on mapml-viewer controls/controlslist attribute\n    if (layer._layerEl.parentElement) {\n      // if layer does not have a parent Element, do not need to set Controls\n      layer._layerEl.parentElement._toggleControls();\n    }\n    // local functions\n    function setLayerTitle() {\n      if (mapml.querySelector('map-title')) {\n        layer._title = mapml.querySelector('map-title').textContent.trim();\n        layer._titleIsReadOnly = true;\n      } else if (layer._layerEl && layer._layerEl.hasAttribute('label')) {\n        layer._title = layer._layerEl.getAttribute('label').trim();\n      }\n    }\n    function parseLicenseAndLegend() {\n      var licenseLink = mapml.querySelector('map-link[rel=license]'),\n        licenseTitle,\n        licenseUrl,\n        attText;\n      if (licenseLink) {\n        licenseTitle = licenseLink.getAttribute('title');\n        licenseUrl = licenseLink.getAttribute('href');\n        attText =\n          '<a href=\"' +\n          licenseUrl +\n          '\" title=\"' +\n          licenseTitle +\n          '\">' +\n          licenseTitle +\n          '</a>';\n      }\n      setOptions(layer, { attribution: attText });\n      var legendLink = mapml.querySelector('map-link[rel=legend]');\n      if (legendLink) {\n        layer._legendUrl = legendLink.getAttribute('href');\n      }\n      if (layer._map) {\n        // if the layer is checked in the layer control, force the addition\n        // of the attribution just received\n        if (layer._map.hasLayer(layer)) {\n          layer._map.attributionControl.addAttribution(layer.getAttribution());\n        }\n      }\n    }\n  },\n  getQueryTemplates: function (location, zoom) {\n    const queryLinks = this._layerEl.querySelectorAll(\n      'map-extent[checked] map-link[rel=query]'\n    ).length\n      ? this._layerEl.querySelectorAll(\n          'map-extent[checked] map-link[rel=query]'\n        )\n      : this._layerEl.shadowRoot.querySelectorAll(\n          'map-extent[checked] map-link[rel=query]'\n        ).length\n      ? this._layerEl.shadowRoot.querySelectorAll(\n          'map-extent[checked] map-link[rel=query]'\n        )\n      : null;\n    if (queryLinks) {\n      var templates = [];\n      for (let i = 0; i < queryLinks.length; i++) {\n        const minZoom = queryLinks[i].extent.zoom.minZoom,\n          maxZoom = queryLinks[i].extent.zoom.maxZoom,\n          withinZoomBounds = (z) => {\n            return minZoom <= z && z <= maxZoom;\n          },\n          bounds = queryLinks[i].getBounds();\n\n        if (bounds.contains(location) && withinZoomBounds(zoom)) {\n          templates.push(queryLinks[i]._templateVars);\n        }\n      }\n      return templates;\n    }\n  },\n  _attachSkipButtons: function (e) {\n    let popup = e.popup,\n      map = e.target,\n      layer,\n      group,\n      content = popup._container.getElementsByClassName(\n        'mapml-popup-content'\n      )[0];\n\n    popup._container.setAttribute('role', 'dialog');\n    content.setAttribute('tabindex', '-1');\n    // https://github.com/Maps4HTML/MapML.js/pull/467#issuecomment-844307818\n    content.setAttribute('role', 'document');\n    popup._count = 0; // used for feature pagination\n\n    if (popup._source._eventParents) {\n      // check if the popup is for a feature or query\n      layer =\n        popup._source._eventParents[\n          Object.keys(popup._source._eventParents)[0]\n        ]; // get first parent of feature, there should only be one\n      group = popup._source.group;\n      // if the popup is for a static / templated feature, the \"zoom to here\" link can be attached once the popup opens\n      attachZoomLink.call(popup);\n    } else {\n      // getting access to the first map-extent to get access to _extentLayer to use it's (possibly) generic _previousFeature + _nextFeature methods.\n      const mapExtent =\n        popup._source._layerEl.querySelector('map-extent') ||\n        popup._source._layerEl.shadowRoot.querySelector('map-extent');\n      layer = mapExtent._extentLayer;\n      // if the popup is for a query, the \"zoom to here\" link should be re-attached every time new pagination features are displayed\n      map.on('attachZoomLink', attachZoomLink, popup);\n    }\n\n    if (popup._container.querySelector('nav[class=\"mapml-focus-buttons\"]')) {\n      DomUtil.remove(\n        popup._container.querySelector('nav[class=\"mapml-focus-buttons\"]')\n      );\n      DomUtil.remove(popup._container.querySelector('hr'));\n    }\n    //add when popopen event happens instead\n    let div = DomUtil.create('nav', 'mapml-focus-buttons');\n    // creates |< button, focuses map\n    let mapFocusButton = DomUtil.create('button', 'mapml-popup-button', div);\n    mapFocusButton.type = 'button';\n    mapFocusButton.title = map.options.mapEl.locale.kbdFocusMap;\n    mapFocusButton.innerHTML = \"<span aria-hidden='true'>|&#10094;</span>\";\n    DomEvent.on(\n      mapFocusButton,\n      'click',\n      (e) => {\n        DomEvent.stop(e);\n        map.featureIndex._sortIndex();\n        map.closePopup();\n        map._container.focus();\n      },\n      popup\n    );\n\n    // creates < button, focuses previous feature, if none exists focuses the current feature\n    let previousButton = DomUtil.create('button', 'mapml-popup-button', div);\n    previousButton.type = 'button';\n    previousButton.title = map.options.mapEl.locale.kbdPrevFeature;\n    previousButton.innerHTML = \"<span aria-hidden='true'>&#10094;</span>\";\n    DomEvent.on(previousButton, 'click', layer._previousFeature, popup);\n\n    // static feature counter that 1/1\n    let featureCount = DomUtil.create('p', 'mapml-feature-count', div),\n      totalFeatures = this._totalFeatureCount ? this._totalFeatureCount : 1;\n    featureCount.innerText = popup._count + 1 + '/' + totalFeatures;\n\n    // creates > button, focuses next feature, if none exists focuses the current feature\n    let nextButton = DomUtil.create('button', 'mapml-popup-button', div);\n    nextButton.type = 'button';\n    nextButton.title = map.options.mapEl.locale.kbdNextFeature;\n    nextButton.innerHTML = \"<span aria-hidden='true'>&#10095;</span>\";\n    DomEvent.on(nextButton, 'click', layer._nextFeature, popup);\n\n    // creates >| button, focuses map controls\n    let controlFocusButton = DomUtil.create(\n      'button',\n      'mapml-popup-button',\n      div\n    );\n    controlFocusButton.type = 'button';\n    controlFocusButton.title = map.options.mapEl.locale.kbdFocusControls;\n    controlFocusButton.innerHTML = \"<span aria-hidden='true'>&#10095;|</span>\";\n    DomEvent.on(\n      controlFocusButton,\n      'click',\n      (e) => {\n        map.featureIndex._sortIndex();\n        map.featureIndex.currentIndex =\n          map.featureIndex.inBoundFeatures.length - 1;\n        map.featureIndex.inBoundFeatures[0]?.path.setAttribute('tabindex', -1);\n        map.featureIndex.inBoundFeatures[\n          map.featureIndex.currentIndex\n        ]?.path.setAttribute('tabindex', 0);\n        DomEvent.stop(e);\n        map.closePopup();\n        map._controlContainer.querySelector('A:not([hidden])').focus();\n      },\n      popup\n    );\n\n    let divider = DomUtil.create('hr', 'mapml-popup-divider');\n\n    popup._navigationBar = div;\n    popup._content.parentElement.parentElement.appendChild(divider);\n    popup._content.parentElement.parentElement.appendChild(div);\n\n    content.focus();\n\n    if (group && !M.options.featureIndexOverlayOption) {\n      // e.target = this._map\n      // Looks for keydown, more specifically tab and shift tab\n      group.setAttribute('aria-expanded', 'true');\n      map.on('keydown', focusFeature);\n    } else {\n      map.on('keydown', focusMap);\n    }\n    // When popup is open, what gets focused with tab needs to be done using JS as the DOM order is not in an accessibility friendly manner\n    function focusFeature(focusEvent) {\n      let path =\n        focusEvent.originalEvent.path ||\n        focusEvent.originalEvent.composedPath();\n      let isTab = focusEvent.originalEvent.keyCode === 9,\n        shiftPressed = focusEvent.originalEvent.shiftKey;\n      if (\n        (path[0].classList.contains('leaflet-popup-close-button') &&\n          isTab &&\n          !shiftPressed) ||\n        focusEvent.originalEvent.keyCode === 27 ||\n        (path[0].classList.contains('leaflet-popup-close-button') &&\n          focusEvent.originalEvent.keyCode === 13)\n      ) {\n        setTimeout(() => {\n          map.closePopup(popup);\n          group.focus();\n          DomEvent.stop(focusEvent);\n        }, 0);\n      } else if (\n        path[0].classList.contains('mapml-popup-content') &&\n        isTab &&\n        shiftPressed\n      ) {\n        setTimeout(() => {\n          //timeout needed so focus of the feature is done even after the keypressup event occurs\n          map.closePopup(popup);\n          group.focus();\n          DomEvent.stop(focusEvent);\n        }, 0);\n      } else if (\n        path[0] === popup._content.querySelector('a') &&\n        isTab &&\n        shiftPressed\n      ) {\n        setTimeout(() => {\n          map.closePopup(popup);\n          group.focus();\n          DomEvent.stop(focusEvent);\n        }, 0);\n      }\n    }\n\n    function focusMap(focusEvent) {\n      let path =\n        focusEvent.originalEvent.path ||\n        focusEvent.originalEvent.composedPath();\n      let isTab = focusEvent.originalEvent.keyCode === 9,\n        shiftPressed = focusEvent.originalEvent.shiftKey;\n\n      if (\n        (focusEvent.originalEvent.keyCode === 13 &&\n          path[0].classList.contains('leaflet-popup-close-button')) ||\n        focusEvent.originalEvent.keyCode === 27\n      ) {\n        DomEvent.stopPropagation(focusEvent);\n        map.closePopup(popup);\n        map._container.focus();\n        if (focusEvent.originalEvent.keyCode !== 27) map._popupClosed = true;\n      } else if (\n        isTab &&\n        path[0].classList.contains('leaflet-popup-close-button')\n      ) {\n        map.closePopup(popup);\n      } else if (\n        path[0].classList.contains('mapml-popup-content') &&\n        isTab &&\n        shiftPressed\n      ) {\n        map.closePopup(popup);\n        setTimeout(() => {\n          //timeout needed so focus of the feature is done even after the keypressup event occurs\n          DomEvent.stop(focusEvent);\n          map._container.focus();\n        }, 0);\n      } else if (\n        path[0] === popup._content.querySelector('a') &&\n        isTab &&\n        shiftPressed\n      ) {\n        map.closePopup(popup);\n        setTimeout(() => {\n          DomEvent.stop(focusEvent);\n          map.getContainer.focus();\n        }, 0);\n      }\n    }\n\n    function attachZoomLink(e) {\n      // this === popup\n      let popupWrapper = this._wrapper,\n        featureEl = e ? e.currFeature : this._source._groupLayer._featureEl;\n      if (popupWrapper.querySelector('a.mapml-zoom-link')) {\n        popupWrapper.querySelector('a.mapml-zoom-link').remove();\n      }\n\n      // return early if feature doesn't have map-geometry\n      if (!featureEl.querySelector('map-geometry')) return;\n\n      // calculate zoom parameters\n      let tL = featureEl.extent.topLeft.gcrs,\n        bR = featureEl.extent.bottomRight.gcrs,\n        center = latLngBounds(\n          latLng(tL.horizontal, tL.vertical),\n          latLng(bR.horizontal, bR.vertical)\n        ).getCenter(true);\n\n      // construct zoom link\n      let zoomLink = document.createElement('a');\n      zoomLink.href = `#${featureEl.getZoomToZoom()},${center.lng},${\n        center.lat\n      }`;\n      zoomLink.innerHTML = `${map.options.mapEl.locale.popupZoom}`;\n      zoomLink.className = 'mapml-zoom-link';\n\n      // handle zoom link interactions\n      zoomLink.onclick = zoomLink.onkeydown = function (e) {\n        if (!(e instanceof MouseEvent) && e.keyCode !== 13) return;\n        e.preventDefault();\n        featureEl.zoomTo();\n        map.closePopup();\n        map.getContainer().focus();\n      };\n\n      // we found that the popupopen event is fired as many times as there\n      // are layers on the map (<map-layer> elements / MapLayers that is).\n      // In each case the target layer is always this layer, so we can't\n      // detect and conditionally add the zoomLink if the target is not this.\n      // so, like Ahmad, we are taking a 'delete everyting each time'\n      // approach (see _attachSkipButtons for this approach taken with\n      // feature navigation buttons); obviously he dealt with this leaflet bug\n      // this way some time ago, and we can't figure out how to get around it\n      // apart from this slightly non-optimal method. Revisit sometime!\n      let link = popupWrapper.querySelector('.mapml-zoom-link');\n      if (link) link.remove();\n\n      // attach link to popup\n      popupWrapper.insertBefore(\n        zoomLink,\n        popupWrapper.querySelector('hr.mapml-popup-divider')\n      );\n    }\n\n    // if popup closes then the focusFeature handler can be removed\n    map.on('popupclose', removeHandlers);\n    function removeHandlers(removeEvent) {\n      if (removeEvent.popup === popup) {\n        map.off('keydown', focusFeature);\n        map.off('keydown', focusMap);\n        map.off('popupopen', attachZoomLink);\n        map.off('popupclose', removeHandlers);\n        if (group) group.setAttribute('aria-expanded', 'false');\n      }\n    }\n  }\n});\nexport var mapLayer = function (url, node, options) {\n  if (!url && !node) return null;\n  return new MapLayer(url, node, options);\n};\n","import { DomUtil, SVG, DomEvent, stamp } from 'leaflet';\nexport var createLayerControlHTML = async function () {\n  var fieldset = DomUtil.create('fieldset', 'mapml-layer-item'),\n    input = DomUtil.create('input'),\n    layerItemName = DomUtil.create('span', 'mapml-layer-item-name'),\n    settingsButtonNameIcon = DomUtil.create('span'),\n    layerItemProperty = DomUtil.create(\n      'div',\n      'mapml-layer-item-properties',\n      fieldset\n    ),\n    layerItemSettings = DomUtil.create(\n      'div',\n      'mapml-layer-item-settings',\n      fieldset\n    ),\n    itemToggleLabel = DomUtil.create(\n      'label',\n      'mapml-layer-item-toggle',\n      layerItemProperty\n    ),\n    layerItemControls = DomUtil.create(\n      'div',\n      'mapml-layer-item-controls',\n      layerItemProperty\n    ),\n    opacityControl = DomUtil.create(\n      'details',\n      'mapml-layer-item-opacity mapml-control-layers',\n      layerItemSettings\n    ),\n    opacity = DomUtil.create('input'),\n    opacityControlSummary = DomUtil.create('summary'),\n    svgSettingsControlIcon = SVG.create('svg'),\n    settingsControlPath1 = SVG.create('path'),\n    settingsControlPath2 = SVG.create('path'),\n    extentsFieldset = DomUtil.create('fieldset', 'mapml-layer-grouped-extents'),\n    mapEl = this.parentNode;\n    opacity.setAttribute('data-testid', 'layer-item-opacity');\n\n  // append the paths in svg for the remove layer and toggle icons\n  svgSettingsControlIcon.setAttribute('viewBox', '0 0 24 24');\n  svgSettingsControlIcon.setAttribute('height', '22');\n  svgSettingsControlIcon.setAttribute('width', '22');\n  svgSettingsControlIcon.setAttribute('fill', 'currentColor');\n  settingsControlPath1.setAttribute('d', 'M0 0h24v24H0z');\n  settingsControlPath1.setAttribute('fill', 'none');\n  settingsControlPath2.setAttribute(\n    'd',\n    'M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z'\n  );\n  svgSettingsControlIcon.appendChild(settingsControlPath1);\n  svgSettingsControlIcon.appendChild(settingsControlPath2);\n\n  layerItemSettings.hidden = true;\n  settingsButtonNameIcon.setAttribute('aria-hidden', true);\n\n  let removeControlButton = DomUtil.create(\n    'button',\n    'mapml-layer-item-remove-control',\n    layerItemControls\n  );\n  removeControlButton.type = 'button';\n  removeControlButton.title = mapEl.locale.lmRemoveLayer;\n  removeControlButton.innerHTML = \"<span aria-hidden='true'>&#10005;</span>\";\n  removeControlButton.classList.add('mapml-button');\n  DomEvent.on(removeControlButton, 'click', DomEvent.stop);\n  DomEvent.on(\n    removeControlButton,\n    'click',\n    (e) => {\n      let fieldset = 0,\n        elem,\n        root;\n      root =\n        mapEl.tagName === 'GCDS-MAP'\n          ? mapEl.shadowRoot\n          : mapEl.querySelector('.mapml-web-map').shadowRoot;\n      if (\n        e.target.closest('fieldset').nextElementSibling &&\n        !e.target.closest('fieldset').nextElementSibling.disbaled\n      ) {\n        elem = e.target.closest('fieldset').previousElementSibling;\n        while (elem) {\n          fieldset += 2; // find the next layer menu item\n          elem = elem.previousElementSibling;\n        }\n      } else {\n        // focus on the link\n        elem = 'link';\n      }\n      mapEl.removeChild(\n        e.target.closest('fieldset').querySelector('span').layer._layerEl\n      );\n      elem = elem\n        ? root.querySelector('.leaflet-control-attribution').firstElementChild\n        : (elem = root.querySelectorAll('input')[fieldset]);\n      elem.focus();\n    },\n    this._layer\n  );\n\n  let itemSettingControlButton = DomUtil.create(\n    'button',\n    'mapml-layer-item-settings-control',\n    layerItemControls\n  );\n  itemSettingControlButton.type = 'button';\n  itemSettingControlButton.title = mapEl.locale.lmLayerSettings;\n  itemSettingControlButton.setAttribute('aria-expanded', false);\n  itemSettingControlButton.classList.add('mapml-button');\n  DomEvent.on(\n    itemSettingControlButton,\n    'click',\n    (e) => {\n      let layerControl = this._layer._layerEl._layerControl._container;\n      if (!layerControl._isExpanded && e.pointerType === 'touch') {\n        layerControl._isExpanded = true;\n        return;\n      }\n      if (layerItemSettings.hidden === true) {\n        itemSettingControlButton.setAttribute('aria-expanded', true);\n        layerItemSettings.hidden = false;\n      } else {\n        itemSettingControlButton.setAttribute('aria-expanded', false);\n        layerItemSettings.hidden = true;\n      }\n    },\n    this._layer\n  );\n\n  input.defaultChecked = this.checked;\n  input.type = 'checkbox';\n  input.setAttribute('class', 'leaflet-control-layers-selector');\n  input.setAttribute('data-testid', 'layer-item-checkbox');\n  layerItemName.layer = this._layer;\n  const changeCheck = function () {\n    this.checked = !this.checked;\n    this.dispatchEvent(new CustomEvent('map-change'));\n    this._layerControlCheckbox.focus();\n  };\n  input.addEventListener('change', changeCheck.bind(this));\n  if (this._layer._legendUrl) {\n    var legendLink = document.createElement('a');\n    legendLink.text = ' ' + this._layer._title;\n    legendLink.href = this._layer._legendUrl;\n    legendLink.target = '_blank';\n    legendLink.draggable = false;\n    layerItemName.appendChild(legendLink);\n  } else {\n    layerItemName.innerHTML = this._layer._title;\n  }\n  layerItemName.id = 'mapml-layer-item-name-{' + stamp(layerItemName) + '}';\n  opacityControlSummary.innerText = mapEl.locale.lcOpacity;\n  opacityControlSummary.id =\n    'mapml-layer-item-opacity-' + stamp(opacityControlSummary);\n  opacityControl.appendChild(opacityControlSummary);\n  opacityControl.appendChild(opacity);\n  opacity.setAttribute('type', 'range');\n  opacity.setAttribute('min', '0');\n  opacity.setAttribute('max', '1.0');\n  opacity.setAttribute('value', this._opacity || '1.0');\n  opacity.setAttribute('step', '0.1');\n  opacity.setAttribute(\n    'aria-labelledby',\n    'mapml-layer-item-opacity-' + stamp(opacityControlSummary)\n  );\n\n  const changeOpacity = function (e) {\n    if (e && e.target && e.target.value >= 0 && e.target.value <= 1.0) {\n      this._layer.changeOpacity(e.target.value);\n    }\n  };\n  opacity.value = this._opacity || '1.0';\n  opacity.addEventListener('change', changeOpacity.bind(this));\n\n  fieldset.setAttribute('aria-grabbed', 'false');\n  fieldset.setAttribute('aria-labelledby', layerItemName.id);\n\n  fieldset.ontouchstart = fieldset.onmousedown = (downEvent) => {\n    if (\n      (downEvent.target.parentElement.tagName.toLowerCase() === 'label' &&\n        downEvent.target.tagName.toLowerCase() !== 'input') ||\n      downEvent.target.tagName.toLowerCase() === 'label'\n    ) {\n      downEvent =\n        downEvent instanceof TouchEvent ? downEvent.touches[0] : downEvent;\n      let control = fieldset,\n        controls = fieldset.parentNode,\n        moving = false,\n        yPos = downEvent.clientY,\n        originalPosition = Array.from(\n          controls.querySelectorAll('fieldset')\n        ).indexOf(fieldset);\n\n      document.body.ontouchmove = document.body.onmousemove = (moveEvent) => {\n        moveEvent.preventDefault();\n        moveEvent =\n          moveEvent instanceof TouchEvent ? moveEvent.touches[0] : moveEvent;\n\n        // Fixes flickering by only moving element when there is enough space\n        let offset = moveEvent.clientY - yPos;\n        moving = Math.abs(offset) > 15 || moving;\n        if (\n          (controls && !moving) ||\n          (controls && controls.childElementCount <= 1) ||\n          controls.getBoundingClientRect().top >\n            control.getBoundingClientRect().bottom ||\n          controls.getBoundingClientRect().bottom <\n            control.getBoundingClientRect().top\n        ) {\n          return;\n        }\n\n        controls.classList.add('mapml-draggable');\n        control.style.transform = 'translateY(' + offset + 'px)';\n        control.style.pointerEvents = 'none';\n\n        let x = moveEvent.clientX,\n          y = moveEvent.clientY,\n          root =\n            mapEl.tagName === 'GCDS-MAP'\n              ? mapEl.shadowRoot\n              : mapEl.querySelector('.mapml-web-map').shadowRoot,\n          elementAt = root.elementFromPoint(x, y),\n          swapControl =\n            !elementAt || !elementAt.closest('fieldset')\n              ? control\n              : elementAt.closest('fieldset');\n\n        swapControl =\n          Math.abs(offset) <= swapControl.offsetHeight ? control : swapControl;\n\n        control.setAttribute('aria-grabbed', 'true');\n        control.setAttribute('aria-dropeffect', 'move');\n        if (swapControl && controls === swapControl.parentNode) {\n          swapControl =\n            swapControl !== control.nextSibling\n              ? swapControl\n              : swapControl.nextSibling;\n          if (control !== swapControl) {\n            yPos = moveEvent.clientY;\n            control.style.transform = null;\n          }\n          controls.insertBefore(control, swapControl);\n        }\n      };\n\n      document.body.ontouchend = document.body.onmouseup = () => {\n        let newPosition = Array.from(\n          controls.querySelectorAll('fieldset')\n        ).indexOf(fieldset);\n        control.setAttribute('aria-grabbed', 'false');\n        control.removeAttribute('aria-dropeffect');\n        control.style.pointerEvents = null;\n        control.style.transform = null;\n        if (originalPosition !== newPosition) {\n          let controlsElems = controls.children,\n            zIndex = 1;\n          // re-order layer elements DOM order\n          for (let c of controlsElems) {\n            let layerEl = c.querySelector('span').layer._layerEl;\n            layerEl.setAttribute('data-moving', '');\n            mapEl.insertAdjacentElement('beforeend', layerEl);\n            layerEl.removeAttribute('data-moving');\n          }\n          // update zIndex of all map-layer elements\n          let layers = mapEl.querySelectorAll('map-layer,layer-');\n          for (let i = 0; i < layers.length; i++) {\n            let layer = layers[i]._layer;\n            if (layer.options.zIndex !== zIndex) {\n              layer.setZIndex(zIndex);\n            }\n            zIndex++;\n          }\n        }\n        controls.classList.remove('mapml-draggable');\n        document.body.ontouchmove =\n          document.body.onmousemove =\n          document.body.onmouseup =\n            null;\n      };\n    }\n  };\n\n  itemToggleLabel.appendChild(input);\n  itemToggleLabel.appendChild(layerItemName);\n  itemSettingControlButton.appendChild(settingsButtonNameIcon);\n  settingsButtonNameIcon.appendChild(svgSettingsControlIcon);\n\n  let mapml = this.src ? this.shadowRoot : this;\n  var styleLinks = mapml.querySelectorAll(\n    'map-link[rel=style],map-link[rel=\"self style\"],map-link[rel=\"style self\"]'\n  );\n  let styles;\n  if (styleLinks) {\n    styles = this.getAlternateStyles(styleLinks);\n    if (styles) {\n      layerItemSettings.appendChild(styles);\n    }\n  }\n\n  this._layerControlCheckbox = input;\n  this._layerControlLabel = itemToggleLabel;\n  this._opacityControl = opacityControl;\n  this._opacitySlider = opacity;\n  this._layerControlHTML = fieldset;\n  this._layerItemSettingsHTML = layerItemSettings;\n  this._propertiesGroupAnatomy = extentsFieldset;\n  this._styles = styles;\n  extentsFieldset.setAttribute('aria-label', 'Sublayers');\n  extentsFieldset.setAttribute('hidden', '');\n  let mapExtents = mapml.querySelectorAll('map-extent:not([hidden])');\n  let mapExtentLayerControls = [];\n  for (let i = 0; i < mapExtents.length; i++) {\n    mapExtentLayerControls.push(mapExtents[i].whenReady());\n    // if any map-extent is not hidden, the parent fieldset should not be hidden\n    extentsFieldset.removeAttribute('hidden');\n  }\n  await Promise.all(mapExtentLayerControls);\n  for (let i = 0; i < mapExtents.length; i++) {\n    extentsFieldset.appendChild(mapExtents[i].getLayerControlHTML());\n  }\n  layerItemSettings.appendChild(extentsFieldset);\n  return this._layerControlHTML;\n};\n","import { Component, Prop, Element, Watch, Method } from '@stencil/core';\nimport { setOptions, DomUtil, bounds, point } from 'leaflet';\nimport { Util } from '../utils/mapml/Util.js';\nimport * as MapLayerModule from '../utils/mapml/layers/MapLayer.js';\nimport { MapTileLayer } from '../utils/mapml/layers/MapTileLayer.js';\nimport { MapFeatureLayer } from '../utils/mapml/layers/MapFeatureLayer.js';\nimport { createLayerControlHTML } from '../utils/mapml/elementSupport/layers/createLayerControlForLayer.js';\n\n@Component({\n  tag: 'map-layer',\n  shadow: true\n})\nexport class GcdsMapLayer {\n  /*\n   * MapML Compatibility: The following properties are exposed on this.el for MapML compatibility:\n   * - _layer: The MapML layer instance\n   * - _layerControl: The layer control instance \n   * - _layerControlHTML: The layer control HTML elements\n   * - _fetchError: Boolean indicating if there was a fetch error\n   * - _layerControlCheckbox: The layer control checkbox element (set by createLayerControlHTML)\n   * - _opacitySlider: The opacity slider element (set by createLayerControlHTML)\n   * - Other layer control elements set dynamically by createLayerControlHTML\n   */\n  @Element() el: HTMLElement;\n\n  // Core properties matching BaseLayerElement observedAttributes\n  @Prop({ reflect: true, mutable: true }) src?: string;\n  @Prop({ reflect: true, mutable: true }) checked?: boolean;\n  @Prop({ reflect: true, mutable: true }) hidden: boolean = false;\n  @Prop({ mutable: true }) opacity?: number = 1;\n  @Prop({ mutable: true }) _opacity?: number;\n  @Prop({ reflect: true, mutable: true }) media?: string;\n  \n  get opacityValue(): number {\n    return this._opacity ?? this.opacity ?? 1.0;\n  }\n\n  _layer: any;\n  _layerControl: any;\n  _layerControlHTML: any;\n  _layerItemSettingsHTML: any;\n  _propertiesGroupAnatomy: any;\n  disabled: boolean = false;\n  _fetchError: boolean = false;\n  // the layer registry is a semi-private Map stored on each map-link and map-layer element\n  // structured as follows: position -> {layer: layerInstance, count: number}\n  // where layer is either a MapTileLayer or a MapFeatureLayer, \n  // and count is the number of tiles or features in that layer\n  _layerRegistry: Map<number, { layer: any; count: number }> = new Map();\n\n  // Watchers for attribute changes - these automatically don't fire during initial load\n  @Watch('src')\n  srcChanged(newValue: string, oldValue: string) {\n    if (oldValue !== newValue) {\n      this._onRemove();\n      if (this.el.isConnected) {\n        this._onAdd();\n      }\n    }\n  }\n  @Watch('checked')\n  checkedChanged(newValue: boolean) {\n    if (this._layer) {\n      \n      // Get the parent map element\n      const mapEl = this.getMapEl();\n      if (mapEl && (mapEl as any)._map) {\n        const leafletMap = (mapEl as any)._map;\n        \n        if (newValue) {\n          // If checked is true, add the layer to the map\n          leafletMap.addLayer(this._layer);\n        } else {\n          // If checked is false, remove the layer from the map\n          leafletMap.removeLayer(this._layer);\n        }\n      }\n      \n      // Update the layer control checkbox to match the checked state\n      if (this._layerControlCheckbox) {\n        this._layerControlCheckbox.checked = newValue;\n      }\n    }\n  }\n  @Watch('_opacity')\n  opacityChanged(newValue: number, oldValue: number) {\n    // This watcher handles programmatic changes to the opacity property\n    if (oldValue !== newValue && this._layer) {\n      this._opacity = newValue;\n      this._layer.changeOpacity(newValue);\n      // reflect to map-layer opacity attribute when opacity property changes\n      // this.el.setAttribute('opacity', newValue.toString());\n      // Update opacity slider if it exists\n      if (this._opacitySlider) {\n        this._opacitySlider.value = newValue.toString();\n      }\n    }\n  }\n  @Watch('media')\n  mediaChanged(newValue: string, oldValue: string) {\n    if (oldValue !== newValue) {\n      this._registerMediaQuery(newValue);\n    }\n  }\n  @Watch('hidden')\n  hiddenChanged(newValue: boolean, oldValue: boolean) {\n    // Only process hidden changes after the layer is fully initialized\n    // During initial load, this will be handled in _attachedToMap()\n    if (oldValue !== newValue && this._layer && this._layerControl) {\n      this._applyHiddenState(newValue);\n    }\n  }\n  \n  private _applyHiddenState(isHidden: boolean) {\n    if (!this._layer || !this._layerControl) return;\n    \n    if (isHidden) {\n      // Hidden was set to true - remove from layer control\n      this._layerControl.removeLayer(this._layer);\n    } else {\n      // Hidden was set to false - add back to layer control and validate\n      this._layerControl.addOrUpdateOverlay(this._layer, this.label);\n      this._validateDisabled();\n    }\n  }\n\n  private loggedMessages: Set<unknown>;\n  private _observer?: MutationObserver;\n  private _mql?: MediaQueryList;\n  private _changeHandler?: () => void;\n  private _boundCreateLayerControlHTML?: () => any;\n  \n  // Layer control element references (synced from DOM element properties)\n  private _layerControlCheckbox?: HTMLInputElement;\n  private _layerControlLabel?: HTMLElement;\n  private _opacityControl?: HTMLElement;\n  private _opacitySlider?: HTMLInputElement;\n  // private _layerItemSettingsHTML?: HTMLElement; \n  // private _propertiesGroupAnatomy?: HTMLElement; \n  private _styles?: HTMLElement;\n\n  get label(): string {\n    if (this._layer) return this._layer.getName();\n    else return this.el.hasAttribute('label') ? this.el.getAttribute('label') : '';\n  }\n\n  set label(val: string) {\n    if (val) {\n      this.el.setAttribute('label', val);\n      if (this._layer) this._layer.setName(val);\n    }\n  }\n\n  get extent() {\n    // calculate the bounds of all content, return it.\n    if (this._layer) {\n      this._layer._calculateBounds();\n    }\n    return this._layer\n      ? Object.assign(\n          Util._convertAndFormatPCRS(\n            this._layer.bounds,\n            (window as any).M[this.getProjection()],\n            this.getProjection()\n          ),\n          { zoom: this._layer.zoomBounds }\n        )\n      : null;\n  }\n  private _registerMediaQuery(mq: string) {\n    if (!this._changeHandler) {\n      this._changeHandler = () => {\n        this._onRemove();\n        if (this._mql.matches) {\n          this._onAdd();\n        }\n        // set the disabled 'read-only' attribute indirectly, via _validateDisabled\n        this._validateDisabled();\n      };\n    }\n\n    if (mq) {\n      // a new media query is being established\n      let map = this.getMapEl();\n      if (!map) return;\n\n      // Remove listener from the old media query (if it exists)\n      if (this._mql) {\n        this._mql.removeEventListener('change', this._changeHandler);\n      }\n\n      this._mql = (map as any).matchMedia(mq);\n      this._changeHandler();\n      this._mql.addEventListener('change', this._changeHandler);\n    } else if (this._mql) {\n      // the media attribute removed or query set to ''\n      this._mql.removeEventListener('change', this._changeHandler);\n      delete this._mql;\n      // effectively, no / empty media attribute matches, do what changeHandler does\n      this._onRemove();\n      this._onAdd();\n      this._validateDisabled();\n    }\n  }\n\n  getMapEl() {\n    return Util.getClosest(this.el, 'gcds-map');\n  }\n  // Note: Stencil handles constructor automatically, but we can use componentWillLoad for initialization\n  componentWillLoad() {\n    // Mirror the original constructor logic\n    // by keeping track of console.log, we can avoid overwhelming the console\n    this.loggedMessages = new Set();\n    \n    // Publish queryable() early so it's available even before connectedCallback\n    // This is needed for dynamically added layers (e.g., via inplace links)\n    Object.defineProperty(this.el, 'queryable', {\n      value: () => this.queryable(),\n      writable: true,\n      configurable: true\n    });\n  }\n  \n  disconnectedCallback() {\n    // if the map-layer node is removed from the dom, the layer should be\n    // removed from the map and the layer control\n    if (this.el.hasAttribute('data-moving')) return;\n    this._onRemove();\n\n    if (this._mql) {\n      if (this._changeHandler) {\n        this._mql.removeEventListener('change', this._changeHandler);\n      }\n      delete this._mql;\n    }\n  }\n\n  private _onRemove() {\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n    let l = this._layer,\n      lc = this._layerControl;\n\n    if (l) {\n      l.off();\n    }\n    // if this layer has never been connected, it will not have a _layer\n    if (l && l._map) {\n      l._map.removeLayer(l);\n    }\n\n    if (lc && !this.el.hasAttribute('hidden')) {\n      // lc.removeLayer depends on this._layerControlHTML, can't delete it until after\n      lc.removeLayer(l);\n    }\n    // remove properties of layer involved in whenReady() logic\n    delete this._layer;\n    delete this._layerControl;\n    delete this._layerControlHTML;\n    delete this._fetchError;\n    \n    // Clean up DOM element properties exposed for MapML compatibility\n    delete (this.el as any)._layer;\n    delete (this.el as any)._layerControl;\n    delete (this.el as any)._layerControlHTML;\n    delete (this.el as any)._fetchError;\n    \n    // Clean up layer control element references\n    this._layerControlCheckbox = undefined;\n    this._layerControlLabel = undefined;\n    this._opacityControl = undefined;\n    this._opacitySlider = undefined;\n    // this._layerItemSettingsHTML = undefined;\n    // this._propertiesGroupAnatomy = undefined;\n    this._styles = undefined;\n\n    this.el.shadowRoot.innerHTML = '';\n    if (this.src) this.el.innerHTML = '';\n    this._layerRegistry.clear();\n  }\n\n  connectedCallback() {\n    if (this.el.hasAttribute('data-moving')) return;\n    this._boundCreateLayerControlHTML = createLayerControlHTML.bind(this.el);\n    \n    // Publish _validateDisabled on element for MapML compatibility\n    (this.el as any)._validateDisabled = this._validateDisabled.bind(this);\n    \n    // Expose disabled property on DOM element\n    Object.defineProperty(this.el, 'disabled', {\n      get: () => this.disabled,\n      set: (val: boolean) => {\n        this.disabled = val;\n      },\n      configurable: true,\n      enumerable: true\n    });\n    \n    // Expose _opacity property on DOM element (internal opacity state)\n    Object.defineProperty(this.el, '_opacity', {\n      get: () => this._opacity,\n      set: (val: number) => {\n        if (val !== this._opacity) {\n          this._opacity = val;\n        }\n      },\n      configurable: true,\n      enumerable: true\n    });\n    // Expose opacity getter/setter on DOM element using the component's opacityValue\n    Object.defineProperty(this.el, 'opacity', {\n      get: () => {\n        return this.opacityValue;\n      },\n      set: (val: number) => {\n        if (+val > 1 || +val < 0) return;\n        this._opacity = val;\n        this._layer?.changeOpacity(val);\n      },\n      configurable: true,\n      enumerable: true\n    });\n\n    Object.defineProperty(this.el, 'whenElemsReady', {\n      value: () => this.whenElemsReady(),\n      writable: true,\n      configurable: true\n    })\n\n    Object.defineProperty(this.el, 'zoomTo', {\n      value: () => this.zoomTo(),\n      writable: true,\n      configurable: true\n    });\n    \n    Object.defineProperty(this.el, 'mapml2geojson', {\n      value: (options = {}) => this.mapml2geojson(options),\n      writable: true,\n      configurable: true\n    });\n    \n    Object.defineProperty(this.el, 'pasteFeature', {\n      value: (feature: any) => this.pasteFeature(feature),\n      writable: true,\n      configurable: true\n    });\n    \n    Object.defineProperty(this.el, 'getAlternateStyles', {\n      value: (styleLinks: any[]) => this.getAlternateStyles(styleLinks),\n      writable: true,\n      configurable: true\n    });\n    \n    Object.defineProperty(this.el, 'getOuterHTML', {\n      value: () => this.getOuterHTML(),\n      writable: true,\n      configurable: true\n    });\n    \n    Object.defineProperty(this.el, 'getMapEl', {\n      value: () => this.getMapEl(),\n      writable: true,\n      configurable: true\n    });\n    \n    Object.defineProperty(this.el, 'getProjection', {\n      value: () => this.getProjection(),\n      writable: true,\n      configurable: true\n    });\n\n    // Expose label property on DOM element for MapML compatibility\n    Object.defineProperty(this.el, 'label', {\n      get: () => this.label,\n      set: (val: string) => this.label = val,\n      configurable: true,\n      enumerable: true\n    });\n\n    // Expose hidden property on DOM element for MapML compatibility\n    // The @Watch('hidden') decorator handles the side effects\n    Object.defineProperty(this.el, 'hidden', {\n      get: () => this.el.hasAttribute('hidden'),\n      set: (val: boolean) => {\n        if (val) {\n          this.el.setAttribute('hidden', '');\n        } else {\n          this.el.removeAttribute('hidden');\n        }\n      },\n      configurable: true,\n      enumerable: true\n    });\n    \n    // Expose extent property on DOM element for MapML compatibility\n    Object.defineProperty(this.el, 'extent', {\n      get: () => this.extent,\n      configurable: true,\n      enumerable: true\n    });\n\n    (this.el as any)._layerRegistry = this._layerRegistry;\n\n    const doConnected = this._onAdd.bind(this);\n    const doRemove = this._onRemove.bind(this);\n    const registerMediaQuery = this._registerMediaQuery.bind(this);\n    let mq = this.media;\n    this.getMapEl()\n      .whenReady()\n      .then(() => {\n        doRemove();\n        if (mq) {\n          registerMediaQuery(mq);\n        } else {\n          doConnected();\n        }\n      })\n      .catch((error) => {\n        throw new Error('Map never became ready: ' + error);\n      });\n  }\n\n  private _onAdd() {\n    new Promise<void>((resolve, reject) => {\n      this.el.addEventListener(\n        'changestyle',\n        (e: any) => {\n          e.stopPropagation();\n          // if user changes the style in layer control\n          if (e.detail) {\n            this.src = e.detail.src;\n          }\n        },\n        { once: true }\n      );\n      let base = this.el.baseURI ? this.el.baseURI : document.baseURI;\n      const headers = new Headers();\n      headers.append('Accept', 'text/mapml');\n      if (this.src) {\n        fetch(this.src, { headers: headers })\n          .then((response) => {\n            if (!response.ok) {\n              throw new Error(`HTTP error! Status: ${response.status}`);\n            }\n            // Save the response URL to use as base for resolving relative URLs\n            const responseUrl = response.url;\n            return response.text().then(text => ({ text, url: responseUrl }));\n          })\n          .then(({ text, url: sourceUrl }) => {\n            let content = new DOMParser().parseFromString(text, 'text/xml');\n            if (\n              content.querySelector('parsererror') ||\n              !content.querySelector('mapml-')\n            ) {\n              // cut short whenReady with the _fetchError property\n              this._fetchError = true;\n              // Expose _fetchError on DOM element for MapML compatibility\n              (this.el as any)._fetchError = this._fetchError;\n              console.log('Error fetching layer content:\\n\\n' + text + '\\n');\n              throw new Error('Parser error');\n            }\n            // Attach the source URL to the content for later use\n            (content as any)._sourceUrl = sourceUrl;\n            return content;\n          })\n          .then((content) => {\n            this._copyRemoteContentToShadowRoot(content.querySelector('mapml-'), (content as any)._sourceUrl);            this._copyRemoteContentToShadowRoot(content.querySelector('mapml-'));\n            let elements = this.el.shadowRoot.querySelectorAll('*');\n            let elementsReady = [];\n            for (let i = 0; i < elements.length; i++) {\n              if ((elements[i] as any).whenReady) {\n                elementsReady.push((elements[i] as any).whenReady().catch(error => {\n                  console.warn(`Element ${elements[i].tagName} failed to become ready:`, error);\n                  return null; // Convert rejection to resolution so layer can still proceed\n                }));\n              }\n            }\n            return Promise.allSettled(elementsReady);\n          })\n          .then(() => {\n            // may throw:\n            this._selectAlternateOrChangeProjection();\n          })\n          .then(() => {\n            this._layer = (MapLayerModule as any).mapLayer(new URL(this.src, base).href, this.el, {\n              projection: this.getProjection(),\n              opacity: this.opacityValue\n            });\n            // Expose _layer on DOM element for MapML compatibility\n            (this.el as any)._layer = this._layer;\n            this._createLayerControlHTML();\n            this._setLocalizedDefaultLabel();\n            this._attachedToMap();\n            // Process any elements that were created before layer was ready\n            this._runMutationObserver(this.el.shadowRoot.children);\n            this._bindMutationObserver();\n            this._validateDisabled();\n            // re-use 'loadedmetadata' event from HTMLMediaElement inteface, applied\n            // to MapML extent as metadata\n            // Should always be fired at the end of initialization process\n            // https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/loadedmetadata_event\n            // https://maps4html.org/web-map-doc/docs/api/layer-api#events\n            this.el.dispatchEvent(\n              new CustomEvent('loadedmetadata', { detail: { target: this.el } })\n            );\n            resolve(undefined);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      } else {\n        let elements = this.el.querySelectorAll('*');\n        let elementsReady = [];\n        for (let i = 0; i < elements.length; i++) {\n          if ((elements[i] as any).whenReady)\n            elementsReady.push((elements[i] as any).whenReady());\n        }\n        Promise.allSettled(elementsReady)\n          .then(() => {\n            // may throw:\n            this._selectAlternateOrChangeProjection();\n          })\n          .then(() => {\n            this._layer = (MapLayerModule as any).mapLayer(null, this.el, {\n              projection: this.getProjection(),\n              opacity: this.opacityValue\n            });\n            // Expose _layer on DOM element for MapML compatibility\n            (this.el as any)._layer = this._layer;\n            this._createLayerControlHTML();\n            this._setLocalizedDefaultLabel();\n            this._attachedToMap();\n            // Process any elements that were created before layer was ready\n            this._runMutationObserver(this.el.children);\n            this._bindMutationObserver();\n            this._validateDisabled();\n            // re-use 'loadedmetadata' event from HTMLMediaElement inteface, applied\n            // to MapML extent as metadata\n            // Should always be fired at the end of initialization process\n            // https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/loadedmetadata_event\n            // https://maps4html.org/web-map-doc/docs/api/layer-api#events\n            this.el.dispatchEvent(\n              new CustomEvent('loadedmetadata', { detail: { target: this.el } })\n            );\n            resolve(undefined);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      }\n    }).catch((e) => {\n      if (e.message === 'changeprojection') {\n        if (e.cause.href) {\n          console.log('Changing layer src to: ' + e.cause.href);\n          this.src = e.cause.href;\n        } else if (e.cause.mapprojection) {\n          console.log(\n            'Changing map projection to match layer: ' + e.cause.mapprojection\n          );\n          const mapEl = this.getMapEl();\n          if (mapEl) {\n            (mapEl as any).projection = e.cause.mapprojection;\n          }\n        }\n      } else if (e.message === 'Failed to fetch') {\n        // cut short whenReady with the _fetchError property\n        this._fetchError = true;\n        // Expose _fetchError on DOM element for MapML compatibility\n        (this.el as any)._fetchError = this._fetchError;\n      } else {\n        console.log(e);\n        this.el.dispatchEvent(\n          new CustomEvent('error', { detail: { target: this.el } })\n        );\n      }\n    });\n  }\n\n  private _setLocalizedDefaultLabel() {\n    if (!this._layer?._titleIsReadOnly && !this._layer?._title) {\n      const mapEl = this.getMapEl();\n      if (mapEl && (mapEl as any).locale?.dfLayer) {\n        this.label = (mapEl as any).locale.dfLayer;\n      }\n    }\n  }\n\n  private _selectAlternateOrChangeProjection() {\n    const mapml = this.src ? this.el.shadowRoot : this.el;\n    const mapEl = this.getMapEl();\n    \n    if (!mapml || !mapEl) return;\n    \n    const selectedAlternate = \n      this.getProjection() !== (mapEl as any).projection &&\n      mapml.querySelector(\n        'map-link[rel=alternate][projection=' +\n          (mapEl as any).projection +\n          '][href]'\n      );\n\n    if (selectedAlternate) {\n      // Use the same base resolution logic as map-link.getBase()\n      // Check for map-base element first, then fall back to layer src\n      let baseUrl: string;\n      const mapBase = mapml.querySelector('map-base[href]');\n      if (mapBase) {\n        baseUrl = mapBase.getAttribute('href')!;\n      } else if (this.src) {\n        // Fallback to resolving layer's src against document base\n        baseUrl = new URL(this.src, this.el.baseURI || document.baseURI).href;\n      } else {\n        baseUrl = this.el.baseURI || document.baseURI;\n      }\n      \n      const url = new URL(selectedAlternate.getAttribute('href')!, baseUrl).href;\n      throw new Error('changeprojection', {\n        cause: { href: url }\n      });\n    }\n    \n    const contentProjection = this.getProjection();\n    if (\n      contentProjection !== (mapEl as any).projection &&\n      (mapEl as any).layers?.length === 1\n    ) {\n      throw new Error('changeprojection', {\n        cause: { mapprojection: contentProjection }\n      });\n    }\n  }\n\n  private _copyRemoteContentToShadowRoot(mapml: any, sourceUrl?: string) {\n    const shadowRoot = this.el.shadowRoot;\n    if (!shadowRoot || !mapml) return;\n    \n    const frag = document.createDocumentFragment();\n    const elements = mapml.querySelectorAll('map-head > *, map-body > *');\n    \n    // Find or create a map-base element to store the source document's base URL\n    let mapBase = Array.from(elements).find(el => (el as any).nodeName === 'MAP-BASE') as HTMLElement;\n    \n    if (!mapBase && sourceUrl) {\n      // Create a synthetic map-base element if none exists\n      mapBase = document.createElement('map-base');\n      mapBase.setAttribute('href', sourceUrl);\n      frag.appendChild(mapBase);\n    } else if (mapBase && sourceUrl) {\n      // Resolve existing map-base href against the source URL\n      const resolvedHref = new URL(mapBase.getAttribute('href') || '', sourceUrl).href;\n      mapBase.setAttribute('href', resolvedHref);\n    }\n    \n    for (let i = 0; i < elements.length; i++) {\n      frag.appendChild(elements[i]);\n    }\n    \n    shadowRoot.appendChild(frag);\n  }\n  /**\n   * For \"local\" content, getProjection will use content of \"this\"\n   * For \"remote\" content, you need to pass the shadowRoot to search through\n   */\n  getProjection() {\n    let mapml = this.src ? this.el.shadowRoot : this.el;\n    let projection = this.getMapEl().projection;\n    if (mapml.querySelector('map-meta[name=projection][content]')) {\n      projection =\n        Util._metaContentToObject(\n          mapml\n            .querySelector('map-meta[name=projection]')\n            .getAttribute('content')\n        ).content || projection;\n    } else if (mapml.querySelector('map-extent[units]')) {\n      const getProjectionFrom = (extents) => {\n        let extentProj = extents[0].attributes.units.value;\n        let isMatch = true;\n        for (let i = 0; i < extents.length; i++) {\n          if (extentProj !== extents[i].attributes.units.value) {\n            isMatch = false;\n          }\n        }\n        return isMatch ? extentProj : null;\n      };\n      projection =\n        getProjectionFrom(\n          Array.from(mapml.querySelectorAll('map-extent[units]'))\n        ) || projection;\n    } else {\n      const titleElement = this.el.querySelector('map-title');\n      const layerLabel = this.label || (titleElement ? titleElement.textContent : 'Unnamed');\n      const message = `A projection was not assigned to the '${layerLabel}' Layer. \\nPlease specify a projection for that layer using a map-meta element. \\nSee more here - https://maps4html.org/web-map-doc/docs/elements/meta/`;\n      if (!this.loggedMessages.has(message)) {\n        console.log(message);\n        this.loggedMessages.add(message);\n      }\n    }\n    return projection;\n  }\n  private _attachedToMap() {\n    // Refactored from layer.js _attachedToMap()\n    // Set i to the position of this layer element in the set of layers\n    const mapEl = this.getMapEl();\n    if (!mapEl || !this._layer) return;\n\n    let i = 0;\n    let position = 1;\n    const nodes = mapEl.children;\n    \n    for (i = 0; i < nodes.length; i++) {\n      if (\n        nodes[i].nodeName === 'MAP-LAYER' ||\n        nodes[i].nodeName === 'LAYER-'\n      ) {\n        if (nodes[i] === this.el) {\n          position = i + 1;\n        } else if ((nodes[i] as any)._layer) {\n          (nodes[i] as any)._layer.setZIndex(i + 1);\n        }\n      }\n    }\n    \n    const proj = (mapEl as any).projection ? (mapEl as any).projection : 'OSMTILE';\n    setOptions(this._layer, {\n      zIndex: position,\n      mapprojection: proj,\n      opacity: window.getComputedStyle(this.el).opacity\n    });\n\n    if (this.checked) {\n      this._layer.addTo((mapEl as any)._map);\n      // Toggle the this.disabled attribute depending on whether the layer\n      // is: same prj as map, within view/zoom of map\n    }\n    \n    (mapEl as any)._map.on('moveend layeradd', this._validateDisabled, this);\n    this._layer.on('add remove', this._validateDisabled, this);\n\n    if ((mapEl as any)._layerControl) {\n      this._layerControl = (mapEl as any)._layerControl;\n      // Expose _layerControl on DOM element for MapML compatibility\n      (this.el as any)._layerControl = this._layerControl;\n    }\n    \n    // If controls option is enabled, insert the layer into the overlays array\n    if ((mapEl as any)._layerControl && !this.hidden) {\n      this._layerControl.addOrUpdateOverlay(this._layer, this.label);\n    }\n\n    // The mapml document associated to this layer can in theory contain many\n    // link[@rel=legend] elements with different @type or other attributes;\n    // currently only support a single link, don't care about type, lang etc.\n    // TODO: add support for full LayerLegend object, and > one link.\n    if (this._layer._legendUrl) {\n      (this.el as any).legendLinks = [\n        {\n          type: 'application/octet-stream',\n          href: this._layer._legendUrl,\n          rel: 'legend',\n          lang: null,\n          hreflang: null,\n          sizes: null\n        }\n      ];\n    }\n  }\n  \n  private _runMutationObserver(elementsGroup: NodeList | HTMLCollection) {\n    const _addStylesheetLink = (mapLink: any) => {\n      this.whenReady().then(() => {\n        this._layer.renderStyles(mapLink);\n      });\n    };\n    const _addStyleElement = (mapStyle: any) => {\n      this.whenReady().then(() => {\n        this._layer.renderStyles(mapStyle);\n      });\n    };\n    const _addExtentElement = (mapExtent: any) => {\n      this.whenReady().then(() => {\n        // Wait for the extent itself to be ready before recalculating bounds\n        if (typeof mapExtent.whenReady === 'function') {\n          mapExtent.whenReady().then(() => {\n            // Force complete recalculation by deleting cached bounds\n            delete this._layer.bounds;\n            this._layer._calculateBounds();\n            this._validateDisabled();\n          });\n        } else {\n          delete this._layer.bounds;\n          this._layer._calculateBounds();\n          this._validateDisabled();\n        }\n      });\n    };\n    \n    const root = this.src ? this.el.shadowRoot : this.el;\n    const pseudo = root instanceof ShadowRoot ? ':host' : ':scope';\n    \n    const _addMetaElement = (_mapMeta: any) => {\n      this.whenReady().then(() => {\n        this._layer._calculateBounds();\n        this._validateDisabled();\n      });\n    };\n    \n    for (let i = 0; i < elementsGroup.length; ++i) {\n      const element = elementsGroup[i] as any;\n      switch (element.nodeName) {\n        case 'MAP-LINK':\n          if (element.link && !element.link.isConnected)\n            _addStylesheetLink(element);\n          break;\n        case 'MAP-STYLE':\n          if (element.styleElement && !element.styleElement.isConnected) {\n            _addStyleElement(element);\n          }\n          break;\n        case 'MAP-EXTENT':\n          _addExtentElement(element);\n          break;\n        case 'MAP-META':\n          const name =\n            element.hasAttribute('name') &&\n            (element.getAttribute('name').toLowerCase() === 'zoom' ||\n              element.getAttribute('name').toLowerCase() === 'extent');\n          if (\n            name &&\n            element ===\n              root.querySelector(\n                `${pseudo} > [name=${element.getAttribute('name')}]`\n              ) &&\n            element.hasAttribute('content')\n          ) {\n            _addMetaElement(element);\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n  \n  /**\n   * Set up a function to watch additions of child elements of map-layer or\n   * map-layer.shadowRoot and invoke desired side effects via _runMutationObserver\n   */\n  private _bindMutationObserver() {\n    this._observer = new MutationObserver((mutationList) => {\n      for (let mutation of mutationList) {\n        if (mutation.type === 'childList') {\n          this._runMutationObserver(mutation.addedNodes);\n        }\n      }\n    });\n    this._observer.observe(this.src ? this.el.shadowRoot : this.el, {\n      childList: true\n    });\n  }\n  \n  private _validateDisabled() {\n    const countTileLayers = () => {\n      let totalCount = 0;\n      let disabledCount = 0;\n\n      this._layer.eachLayer((layer: any) => {\n        if (layer instanceof MapTileLayer) {\n          totalCount++;\n          if (!layer.isVisible()) disabledCount++;\n        }\n      });\n\n      return { totalCount, disabledCount };\n    };\n    const countFeatureLayers = () => {\n      let totalCount = 0;\n      let disabledCount = 0;\n\n      this._layer.eachLayer((layer: any) => {\n        if (layer instanceof MapFeatureLayer) {\n          totalCount++;\n          if (!layer.isVisible()) disabledCount++;\n        }\n      });\n\n      return { totalCount, disabledCount };\n    };\n    // setTimeout is necessary to make the validateDisabled happen later than the moveend operations etc.,\n    // to ensure that the validated result is correct\n    setTimeout(() => {\n      let layer = this._layer,\n        map = layer?._map;\n      // if there's a media query in play, check it early\n      if (this._mql && !this._mql.matches) {\n        this.el.setAttribute('disabled', '');\n        this.disabled = true;\n        return;\n      }\n      if (map) {\n        // prerequisite: no inline and remote mapml elements exists at the same time\n        const mapExtents = this.src\n          ? this.el.shadowRoot?.querySelectorAll('map-extent')\n          : this.el.querySelectorAll('map-extent');\n        let extentLinksReady: Promise<any>[] = [];\n        if (mapExtents) {\n          for (let i = 0; i < mapExtents.length; i++) {\n            if ((mapExtents[i] as any).whenLinksReady) {\n              extentLinksReady.push((mapExtents[i] as any).whenLinksReady());\n            }\n          }\n        }\n        Promise.allSettled(extentLinksReady)\n          .then(() => {\n            let disabledExtentCount = 0,\n              totalExtentCount = 0,\n              layerTypes = [\n                '_staticTileLayer',\n                '_mapmlvectors',\n                '_extentLayer'\n              ];\n            for (let j = 0; j < layerTypes.length; j++) {\n              let type = layerTypes[j];\n              if (this.checked) {\n                if (type === '_extentLayer' && mapExtents && mapExtents.length > 0) {\n                  for (let i = 0; i < mapExtents.length; i++) {\n                    totalExtentCount++;\n                    if ((mapExtents[i] as any)._validateDisabled && (mapExtents[i] as any)._validateDisabled())\n                      disabledExtentCount++;\n                  }\n                } else if (type === '_mapmlvectors') {\n                  // inline / static features\n                  const featureLayerCounts = countFeatureLayers();\n                  totalExtentCount += featureLayerCounts.totalCount;\n                  disabledExtentCount += featureLayerCounts.disabledCount;\n                } else {\n                  // inline tiles\n                  const tileLayerCounts = countTileLayers();\n                  totalExtentCount += tileLayerCounts.totalCount;\n                  disabledExtentCount += tileLayerCounts.disabledCount;\n                }\n              }\n            }\n            // if all extents are not visible / disabled, set layer to disabled\n            if (\n              disabledExtentCount === totalExtentCount &&\n              disabledExtentCount !== 0\n            ) {\n              this.el.setAttribute('disabled', '');\n              this.disabled = true;\n            } else {\n              this.el.removeAttribute('disabled');\n              this.disabled = false;\n            }\n            this.toggleLayerControlDisabled();\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n      }\n    }, 0);\n  }\n  // disable/italicize layer control elements based on the map-layer.disabled property\n  private toggleLayerControlDisabled() {\n    let input = this._layerControlCheckbox,\n      label = this._layerControlLabel,\n      opacityControl = this._opacityControl,\n      opacitySlider = this._opacitySlider,\n      styleControl = this._styles;\n    if (this.disabled) {\n      if (input) input.disabled = true;\n      if (opacitySlider) opacitySlider.disabled = true;\n      if (label) label.style.fontStyle = 'italic';\n      if (opacityControl) opacityControl.style.fontStyle = 'italic';\n      if (styleControl) {\n        styleControl.style.fontStyle = 'italic';\n        styleControl.querySelectorAll('input').forEach((i: any) => {\n          i.disabled = true;\n        });\n      }\n    } else {\n      if (input) input.disabled = false;\n      if (opacitySlider) opacitySlider.disabled = false;\n      if (label) label.style.fontStyle = 'normal';\n      if (opacityControl) opacityControl.style.fontStyle = 'normal';\n      if (styleControl) {\n        styleControl.style.fontStyle = 'normal';\n        styleControl.querySelectorAll('input').forEach((i: any) => {\n          i.disabled = false;\n        });\n      }\n    }\n  }\n  queryable(): boolean {\n    let content = this.src ? this.el.shadowRoot : this.el;\n    return !!(\n      content?.querySelector(\n        'map-extent[checked] > map-link[rel=query]:not([disabled])'\n      ) &&\n      this.checked &&\n      this._layer &&\n      !this.el.hasAttribute('hidden')\n    );\n  }\n  getAlternateStyles(styleLinks: any[]): HTMLElement | null {\n    if (styleLinks.length > 1) {\n      const stylesControl = document.createElement('details');\n      const stylesControlSummary = document.createElement('summary');\n      const mapEl = this.getMapEl();\n      \n      stylesControlSummary.innerText = (mapEl as any)?.locale?.lmStyle || 'Style';\n      stylesControl.appendChild(stylesControlSummary);\n\n      for (let j = 0; j < styleLinks.length; j++) {\n        stylesControl.appendChild(styleLinks[j].getLayerControlOption());\n        DomUtil.addClass(\n          stylesControl,\n          'mapml-layer-item-style mapml-control-layers'\n        );\n      }\n      return stylesControl;\n    }\n    return null;\n  }\n\n  getOuterHTML(): string {\n    let tempElement = this.el.cloneNode(true) as HTMLElement;\n\n    if (this.el.hasAttribute('src')) {\n      let newSrc = this._layer.getHref();\n      tempElement.setAttribute('src', newSrc);\n    }\n    if (this.el.querySelector('map-link')) {\n      let mapLinks = tempElement.querySelectorAll('map-link');\n\n      mapLinks.forEach((mapLink) => {\n        if (mapLink.hasAttribute('href')) {\n          mapLink.setAttribute(\n            'href',\n            decodeURI(\n              new URL(\n                mapLink.getAttribute('href')!,\n                this.el.baseURI ? this.el.baseURI : document.baseURI\n              ).href\n            )\n          );\n        } else if (mapLink.hasAttribute('tref')) {\n          mapLink.setAttribute(\n            'tref',\n            decodeURI(\n              new URL(\n                mapLink.getAttribute('tref')!,\n                this.el.baseURI ? this.el.baseURI : document.baseURI\n              ).href\n            )\n          );\n        }\n      });\n    }\n\n    let outerLayer = tempElement.outerHTML;\n\n    tempElement.remove();\n\n    return outerLayer;\n  }\n  zoomTo() {\n    this.whenReady().then(() => {\n      let map = (this.getMapEl() as any)?._map,\n        extent = this.extent,\n        tL = extent.topLeft.pcrs,\n        bR = extent.bottomRight.pcrs,\n        layerBounds = bounds(\n          point(tL.horizontal, tL.vertical),\n          point(bR.horizontal, bR.vertical)\n        ),\n        center = map.options.crs.unproject(layerBounds.getCenter(true));\n\n      let maxZoom = extent.zoom.maxZoom,\n        minZoom = extent.zoom.minZoom;\n      map.setView(center, Util.getMaxZoom(layerBounds, map, minZoom, maxZoom), {\n        animate: false\n      });\n    });\n  }\n\n  pasteFeature(feature: any) {\n    switch (typeof feature) {\n      case 'string':\n        feature.trim();\n        if (\n          feature.slice(0, 12) === '<map-feature' &&\n          feature.slice(-14) === '</map-feature>'\n        ) {\n          this.el.insertAdjacentHTML('beforeend', feature);\n        }\n        break;\n      case 'object':\n        if (feature.nodeName?.toUpperCase() === 'MAP-FEATURE') {\n          this.el.appendChild(feature);\n        }\n    }\n  }\n  private _createLayerControlHTML() {\n    // Use the bound function that was set up in connectedCallback  \n    // The createLayerControlHTML function was bound to this.el in connectedCallback\n    if (this._boundCreateLayerControlHTML) {\n      // Call the async function but don't await it (matches original layer.js behavior)\n      this._boundCreateLayerControlHTML().then((result: any) => {\n        this._layerControlHTML = result;\n        // Expose _layerControlHTML on DOM element for MapML compatibility\n        (this.el as any)._layerControlHTML = this._layerControlHTML;\n        \n        // Sync all layer control properties created by createLayerControlForLayer\n        // These properties are set on the DOM element by the bound function and need to be\n        // available on both the element and the component for future refactoring\n        this._layerControlCheckbox = (this.el as any)._layerControlCheckbox;\n        this._layerControlLabel = (this.el as any)._layerControlLabel;\n        this._opacityControl = (this.el as any)._opacityControl;\n        this._opacitySlider = (this.el as any)._opacitySlider;\n        this._layerItemSettingsHTML = (this.el as any)._layerItemSettingsHTML;\n        this._propertiesGroupAnatomy = (this.el as any)._propertiesGroupAnatomy;\n        this._styles = (this.el as any)._styles;\n        \n        // Ensure opacity slider is synced with current opacity value\n        if (this._opacitySlider && this._opacity !== undefined) {\n          this._opacitySlider.value = this._opacity.toString();\n        }\n        \n\n      });\n    }\n  }\n\n  @Method()\n  async whenReady(): Promise<void> {\n    return new Promise<void>((resolve, reject) => {\n      let interval: any, failureTimer: any;\n      if (\n        (this.el as any)._layer &&\n        this._layerControlHTML &&\n        (!this.src || this.el.shadowRoot?.childNodes.length)\n      ) {\n        resolve();\n      } else {\n        const layerElement = this.el;\n        interval = setInterval(testForLayer, 200, layerElement);\n        failureTimer = setTimeout(layerNotDefined, 5000);\n      }\n\n      function testForLayer(layerElement: any) {\n        if (\n          layerElement._layer &&\n          layerElement._layerControlHTML &&\n          (!layerElement.src || layerElement.shadowRoot?.childNodes.length)\n        ) {\n          clearInterval(interval);\n          clearTimeout(failureTimer);\n          resolve();\n        } else if (layerElement._fetchError) {\n          clearInterval(interval);\n          clearTimeout(failureTimer);\n          reject('Error fetching layer content');\n        }\n      }\n      \n      function layerNotDefined() {\n        clearInterval(interval);\n        clearTimeout(failureTimer);\n        reject('Timeout reached waiting for layer to be ready');\n      }\n    });\n  }\n  /**\n   * Wait for all map-extent and map-feature elements to be ready.\n   * Returns a promise that resolves when all are settled.\n   */\n  @Method()\n  async whenElemsReady(): Promise<PromiseSettledResult<unknown>[]> {\n    let elemsReady: Promise<unknown>[] = [];\n    // Use shadowRoot if src is set, otherwise use this.el\n    let target = this.src ? this.el.shadowRoot : this.el;\n    if (!target) return [];\n    const extents = Array.from(target.querySelectorAll('map-extent'));\n    const features = Array.from(target.querySelectorAll('map-feature'));\n    for (let elem of [...extents, ...features]) {\n      if (typeof (elem as any).whenReady === 'function') {\n        elemsReady.push((elem as any).whenReady());\n      }\n    }\n    return Promise.allSettled(elemsReady);\n  }\n\n  /**\n   * Convert this MapML layer to GeoJSON FeatureCollection\n   * @param options - Conversion options:\n   *   - propertyFunction: Function to map <map-properties> to GeoJSON properties\n   *   - transform: Whether to transform coordinates to GCRS (EPSG:4326), defaults to true\n   * @returns GeoJSON FeatureCollection object\n   */\n  mapml2geojson(options: any = {}): any {\n    return Util.mapml2geojson(this.el, options);\n  }\n\n  render() {\n    return null;\n  }\n}\n"],"version":3}